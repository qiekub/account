{"version":3,"sources":["images/buymeacoffee_green.png","images/yelp.png","images/facebook.png","images/instagram.png","images/youtube.png","images/twitter.png","images/openstreetmap.svg","locales lazy /^/.//.*/.ftl$/ groupOptions: {} namespace object","components/Localized/index.js","l10n.js","components/LocalStorage/index.js","components/Globals/index.js","components/ConicGradient/index.js","queries.js","functions.js","components/MainMap/PruneCluster_dist/PruneCluster.js","components/MainMap/index.js","images/github_mark_black.svg","components/MainDrawerContent/index.js","components/SearchBar/index.js","components/GeoInput/index.js","components/PresetInput/index.js","components/DateInput/index.js","components/AudienceInput/Box.js","components/AudienceInput/Dustbin.js","components/AudienceInput/index.js","components/Questions/index.js","components/EmojiIcon/index.js","components/Sidebar/index.js","components/FiltersPanelContent/index.js","components/App/index.js","index.js"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","Localized","props","key","elems","br","Fragment","children","withLocalization","Inner","l10n","React","useContext","FluentContext","createElement","getString","args","fallback","_supportedLocales_","fetchMessages","locale","a","path","fetch","default","response","text","messages","FluentResource","getDefaultBundles","bundle","FluentBundle","addResource","ReactLocalization","createMessagesGenerator","currentLocales","all","fetched","reduce","obj","cur","assign","generateBundles","f","AppLocalizationProvider","state","bundles","negotiateLanguages","this","userLocales","defaultLocale","setState","Component","privacy_level_keys","essentials","tracking","storage_functions","get","store","set","value","privacy_level_key","setPrivacy","reject","getPrivacy","isDevEnvironment","local_ip","callback","cache","InMemoryCache","persistCache","storage","window","localStorage","console","error","globalState","globalStateFinishedLoading","graphql","ApolloClient","uri","GlobalsContext","createContext","GlobalsProvider","pageOpenTS","Date","transitionDuration","isSmallScreen","sidebarIsOpen","mainMapFunctions","undefined","cookieOptions","maxAge","domain","secure","navigator","languages","emojis","audience_queer_only","audience_queer_primary","audience_queer_welcome","getInitialGlobalState","Provider","withGlobals","ComponentWrapped","forwardRef","ref","withLocalStorage","globals","useConicGradient","waitingForConicGradient","useRef","useState","isRunning","setIsRunning","conicGradientExists","setConicGradientExists","onReady","useCallback","current","push","getConicGradient","ConicGradient","useEffect","delay","savedCallback","setInterval","clearInterval","useInterval","getID","gql","loadPlace","loadMarkers","search","loadQuestions","isGeoCoordinateLegal","addChangeset","addressFormats","address_formats","item","concat","format","getTranslation","texts","length","getTranslationFromArray","texts_array","Array","isArray","text_object","language","attrs","getColorByPreset","preset_key","colorsByPreset_sorted","pair","startsWith","PruneCluster","__extends","extendStatics","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","constructor","prototype","create","PruneCluster_1","Point","ClusterObject","hashCodeCounter","maxHashCodeValue","Math","pow","Marker","_super","lat","lng","data","category","weight","filtered","_this","call","position","hashCode","Move","SetData","Cluster","marker","stats","ENABLE_MARKERS_LIST","_clusterMarkers","lastMarker","population","totalWeight","averagePosition","AddMarker","h","currentTotalWeight","newWeight","Reset","ComputeBounds","cluster","proj","Project","size","Size","startX","floor","x","startY","y","UnProject","bounds","minLat","maxLat","minLng","maxLng","GetClusterMarkers","ApplyCluster","newCluster","min","max","insertionSort","list","j","tmp","tmpLng","i","_markers","_nbChanges","_clusters","ViewPadding","RegisterMarker","_removeFlag","RegisterMarkers","markers","forEach","_sortMarkers","total","nbChanges","sort","_sortClusters","_indexLowerBoundLng","it","step","first","count","_resetClusterViews","l","ProcessView","heightBuffer","abs","widthBuffer","extendedBounds","firstIndex","clusters","workingClusterList","slice","markerPosition","clusterFound","ll","splice","newClustersList","RemoveMarkers","newMarkersList","FindMarkersInArea","area","aMinLat","aMaxLat","aMinLng","aMaxLng","result","pos","withFiltered","rMinLat","Number","MAX_VALUE","rMaxLat","rMinLng","rMaxLng","FindMarkersBoundsInArea","ComputeGlobalBounds","GetMarkers","GetPopulation","ResetClusters","PruneClusterForLeaflet","L","Layer","Class","extend","initialize","clusterMargin","_map","project","LatLng","getZoom","unproject","_objectsOnMap","spiderfier","PruneClusterLeafletSpiderfier","_hardMove","_resetIcons","_removeTimeoutId","_markersRemoveListTimeout","BuildLeafletCluster","m","icon","BuildLeafletClusterIcon","_leafletClusterBounds","on","cbounds","markersArea","LatLngBounds","zoomLevelBefore","zoomLevelAfter","getBoundsZoom","filteredBounds","_leafletMarker","newMarkersArea","markerPos","isFiltered","currentFilteredBounds","getMaxZoom","fire","center","getLatLng","setView","fitBounds","c","iconSize","maxPopulation","DivIcon","html","className","point","BuildLeafletMarker","PrepareLeafletMarker","setIcon","popup","content","getPopup","setPopupContent","popupOptions","bindPopup","onAdd","_moveStart","_moveEnd","_zoomStart","_zoomEnd","addLayer","onRemove","off","removeLayer","_moveInProgress","hard","_zoomInProgress","getBounds","zoom","marginRatio","resetIcons","southWest","getSouthWest","northEast","getNorthEast","objectsOnMap","newObjectsOnMap","markersOnMap","_removeFromMap","clusterCreationList","clusterCreationListPopOne","opacityUpdateList","workingList","icluster","iclusterData","latMargin","lngMargin","oldMaxLng","oldMinLat","oldMaxLat","newMinLng","newMinLat","newMaxLat","_leafletCollision","_leafletOldPopulation","_leafletOldHashCode","oldMarker","_hashCode","_zoomLevel","forceIconRedraw","setLatLng","_leafletPosition","equals","boundsCopy","Util","_population","idata","remove","pa","jcluster","jdata","pb","oldMinLng","newMaxLng","poisson","creationMarker","iposition","addTo","setOpacity","setTimeout","_icon","DomUtil","addClass","_shadow","clearTimeout","toRemove","FitBounds","RedrawIcons","processView","_2PI","PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_spiralCountTrigger","spiderfyDistanceMultiplier","_cluster","_currentMarkers","_multiLines","multiPolyline","_lines","color","polyline","Spiderfy","Unspiderfy","filter","_currentCenter","points","centerPoint","latLngToLayerPoint","_generatePointsSpiral","_generatePointsCircle","polylines","leafletMarkers","projectedPoints","layerPointToLatLng","setZIndexOffset","startTime","anim","stepRatio","diffLat","diffLng","setLatLngs","_clusterMarker","centerPt","angle","legLength","angleStep","res","round","cos","sin","separation","lengthFactor","MainMap","docs","isGeoChooser","middleMarkerDoc","defaultClusterSize","filters","gotMapRef","bind","createPruneCluster","addMarkersToPruneCluster","filterMarkers","showAllMarkers","setMapPos","viewportChanged","zoomIn","zoomOut","conic_gradient","clusterGroup","onFunctions","functions","setZoom","getCenter","flyToBounds","panBy","panTo","flyTo","invalidateSize","latLngToContainerPoint","useAsGeoChooser","addEventListener","removeEventListener","markerQuerySubscription","unsubscribe","event","map_center","yesOrNo","hideAllMarkers","watchQuery","fetchPolicy","query","query_loadMarkers","variables","subscribe","getMarkers","doc","___preset","preset","presets","___color","colorsByPreset","colors","Map","leafletElement","mapRef","values","stops","counter","currentPos","gapColor","ceil","join","repeating","clusterBounds","corner1","corner2","distance","distanceTo","padding","animate","duration","paddingTopLeft","paddingBottomRight","leafletMarker","divIcon","bg","fg","toLowerCase","name","bindTooltip","sticky","interactive","opacity","permanent","navigate","_id","entries","colors_sum","sum","gradient","dataURL","presets_length","selectedAge","ageOption","audienceQueerOptions","checkAudienceQueerOptions","includes","isInPresets","bool","matchesAudienceQueer","tags","audience_queer","isInAgeRange","min_age","max_age","parsedMin","parseFloat","parsedMax","isNaN","viewport","add","map_zoom","dispatchEvent","Event","mapIsResizing","style","zIndex","bottom","right","pointerEvents","Fab","aria-label","title","width","height","minHeight","borderRadius","marginBottom","onClick","onViewportChanged","preferCanvas","useFlyTo","minZoom","maxZoom","zoomSnap","zoomControl","fadeAnimation","worldCopyJump","maxBoundsViscosity","maxBounds","backgroundColor","theme","palette","type","background","TileLayer","detectRetina","tileSize","zoomOffset","attribution","url","withConicGradient","withTheme","ConicGradientProps","_extends","target","arguments","source","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","svgRef","viewBox","fillRule","clipRule","strokeLinejoin","strokeMiterlimit","ForwardRef","ListItemLink","ListItem","button","component","MainDrawerContent","windowIsFullscreen","toogleFullscreen","document","fullscreenEnabled","fullscreenElement","querySelector","requestFullscreen","exitFullscreen","List","href","ListItemText","primary","Link","Button","variant","startIcon","fill","marginLeft","margin","textAlign","rel","src","buymeacoffee_green","alt","boxShadow","shadows","loadingSearchResult","isMainDrawerOpen","searchResults_poi","searchResults_address","showSearchResults","showWebsiteIntro","searchInputRef","createRef","submitTheSearchQuery","saveSearchQueryText","searchKeypressed","closeSidebar","toggleMainDrawer","loadSearchResults","openSearchResult","acceptEssentialPrivacyAndCloseIntro","hideSearchResults","privacy_consent_essentials","prevProps","prevState","snapshot","searchResult","placeID","geometry","boundingbox","southwest","northeast","location","zoomLevel","queryString","test","query_search","searchResults","results","name_translated","JSON","stringify","catch","onStartSearch","blur","onDontFilterTheseIds","onSetSidebarIsOpen","onSetSearchBarValue","finally","leftIcon","IconButton","edge","rightIcon","Icon","Drawer","open","onClose","Paper","elevation","InputBase","placeholder","onFocus","onChange","onKeyPress","disabled","inputRef","inputProps","subheader","ListSubheader","disableSticky","alignItems","address","ListItemIcon","lineHeight","secondary","mapbox_link","Typography","gutterBottom","secondaryTypographyProps","CardActions","justifyContent","NaN","isLegal","initialMapViewport","usedMarker","setStateGeoPos","markerChanged","query_isGeoCoordinateLegal","currentCenter","currentZoom","newZoom","number","toFixed","checkIfLegal","vars","marginTop","filterOptions","createFilterOptions","matchFrom","option","category_name_translated","_options_","categories","_presets_","some","presetKey","preset4options","presetSorter","presetChanged","icon_compare","localeCompare","name_compare","defaultValue","Autocomplete","options","groupBy","getOptionLabel","getOptionSelected","renderOption","blurOnSelect","openOnFocus","clearText","closeText","noOptionsText","openText","renderInput","params","TextField","label","year","month","date","formated","parseDateString","setValue","parts","match","day","getFormatedValue","formatKey","real","isSet","asString","padStart","daysInMonth","getDate","fromEntries","entry","dateInputOrder","split","v","index","autoFocus","helperText","Box","onDelete","useDrag","collect","monitor","isDragging","drag","Chip","cursor","Dustbin","accept","items","onDrop","onRemoveItem","useTheme","useDrop","drop","isOver","canDrop","isActive","hasItems","FormControl","fullWidth","transition","InputLabel","focused","shrink","display","borderWidth","borderStyle","borderColor","main","fontSize","visibility","maxWidth","AudienceInput","DndProvider","backend","Backend","Example","dustbins","setItems","replace","handleDrop","newItems","update","$set","changedItems","Questions","questionsAreLoaded","answersByQuestionId","questionsById","nextQuestionIDs","stageIndex","sourcesText","answer_tags","tagsFromTheDoc","inputValues","renderStage","answerQuestion","submitInputs","setQuestionAsActive","savePresetValue","saveValueByKey","abort","acceptPrivacyPolicy","showQuestions","addSources","finish","saveSourcesText","startQuestions","properties","loadQuestionsQuerySubscription","query_loadQuestions","firstOpenQuestionCounter","questions","questionDoc","hasGeoInputField","possibleAnswers","possibleAnswer","inputtype","question_translated","question","in_one_word_translated","in_one_word","description_translated","description","answer","title_translated","visible","active","answered","possibleAnswersByKey","questionID","questionIDs","answerKey","answerValue","question_doc","followUpQuestionIDs","questionGotAnswered","answer2tags","allKeys","currentQuestionPos","nextQuestionIDs_start_part","nextQuestionIDs_end_part","Set","thisIndex","tmp_inputValues","namespace","toReturn","namespaceWithColon","namespaceWithColonLenght","substring","lenght","tagKeys","newValue","saveInputValue","hasInputField","isMultiRow","heading","dense","disableGutters","primaryTypographyProps","flexDirection","hidden","possibleAnswerKey","possibleAnswerNamespace","getInputValueByNamespace","getInputValue","multiline","flexGrow","border","divider","shape","minWidth","alignSelf","marginRight","onAbort","crypto","getRandomValues","Uint8Array","toString","mutate","mutation","mutation_addChangeset","forID","sources","fromBot","dataset","antiSpamUserIdentifier","onFinish","privacy_policy_link","renderQuestion","EmojiIcon","YelpIcon","backgroundImage","yelp_icon","backgroundSize","backgroundRepeat","FacebookIcon","facebook_icon","InstagramIcon","instagram_icon","YouTubeIcon","youtube_icon","TwitterIcon","twitter_icon","OpenstreetmapIcon","openstreetmap_icon","Sidebar","page","headerText","docCache","wantedTagsList","action","docID","editNewDoc","edit","view","renderView","renderQuestions","getAgeRangeText","checkIfDocIdChanged","abortEdit","placeQuerySubscription","navigateToUnusedID","loadAndViewDoc","isNavigatingToUnusedID","query_getID","query_loadPlace","wantedTags","getPlace","docLocation","typename","emptyDoc","__typename","parseInt","numbers","age","links","URL","hostname","protocol","pathname","audience_namespace_length","audienceTags","audience_namespace","only","welcome","audience","getAudience","audienceHeading","audienceText","audienceIcon","age_range_text","chipFunction","paddingTop","rows","address_format","addr_keys","lastMatchCount","lastAddressFormat","addressFormat","thisMatchCount","getAddressFormat","part","mappedParts","email","phonenumber","get_username_regexp","website","matches","facebook","instagram","youtube","twitter","yelp","osm_id","link","CardContent","renderAudience","renderGeneral","renderLinks","Divider","headerBackgroundColor","headerForegroundColor","getContrastText","alignContent","Card","flexShrink","fontWeight","m_argin","m_inWidth","m_arginRight","paper","FiltersPanelContent","_categories_","audience_queer_values","translation_key","emoji","ages","highest_ages_entry","getFilterObj","has","stateKeyName","closeMenuCallback","audienceKey","delete","popupState","bindTrigger","Menu","bindMenu","anchorOrigin","vertical","horizontal","MenuItem","close","selected","isSelected","toogleAudienceQueer","strong","defaultTheme","createMuiTheme","tonalOffset","HandlePath","onPathChanged","searchBarValue","prefersDarkMode","setSearchBarValue","setSidebarIsOpen","filtersChanged","setTheme","check_color_scheme","check_small_screen","dontFilterTheseIds","matchMedia","matcher_color_scheme","addListener","matcher_small_screen","removeListener","background_paper","background_default","secondary_main","error_main","transitions","complex","enteringScreen","leavingScreen","short","shorter","shortest","standard","easing","easeIn","easeInOut","easeOut","sharp","overrides","MuiLink","root","MuiFab","componentName","functionsObject","newFilters","pathVars","ThemeProvider","StylesProvider","injectFirst","onSetView","onFlyTo","onGetZoom","attr","saveFunctions","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.594c2dec.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/buymeacoffee_green.0da05d79.png\";","module.exports = __webpack_public_path__ + \"static/media/yelp.9b487818.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/instagram.e99806af.png\";","module.exports = __webpack_public_path__ + \"static/media/youtube.fe8ee891.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/openstreetmap.e69a33e8.svg\";","var map = {\n\t\"./de.ftl\": [\n\t\t208,\n\t\t3\n\t],\n\t\"./en.ftl\": [\n\t\t209,\n\t\t4\n\t],\n\t\"./en_GB.ftl\": [\n\t\t210,\n\t\t5\n\t],\n\t\"./en_US.ftl\": [\n\t\t211,\n\t\t6\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 175;\nmodule.exports = webpackAsyncContext;","import React from 'react'\nimport {\n\tLocalized as LocalizedOriginal,\n\t// withLocalization,\n} from '@fluent/react'\n\nimport { FluentContext } from \"../../../node_modules/@fluent/react/esm/context.js\";\n\nconst Localized = props => (\n\t<LocalizedOriginal\n\t\tkey={props.id}\n\t\t{...props}\n\t\telems={{\n\t\t\tbr: <br />,\n\t\t\t...props.elems,\n\t\t}}\n\t>\n\t\t<React.Fragment>{props.children}</React.Fragment>\n\t</LocalizedOriginal>\n)\n\n// A custom withLocalization to have an empty fallback.\n// It is nearly identical to the original.\nfunction withLocalization(Inner) {\n    function WithLocalization(props) {\n        const l10n = React.useContext(FluentContext)\n\n        const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n\n        return React.createElement(Inner, { getString, ...props })\n    }\n    return WithLocalization\n}\n\nexport {\n\twithLocalization,\n\tLocalized,\n\tLocalized as default,\n}\n\n/*\n\nimport { Localized, withLocalization } from '../Localized/'\n\n<Localized id=\"translation_id\" />\nexport default withLocalization(componentName)\n\n\nimport Localized from '../Localized/'\n<Localized id=\"translation_id\" />\n\nimport { withLocalization } from '@fluent/react'\nexport default withLocalization(componentName)\n\n*/","import React from 'react'\n\n// https://projectfluent.org/play/\n\n// import {LocalizationProvider,Localized} from '@fluent/react' // '@fluent/react/compat'\nimport { ReactLocalization, LocalizationProvider } from '@fluent/react'\nimport { FluentBundle, FluentResource } from '@fluent/bundle'\nimport { negotiateLanguages } from '@fluent/langneg'\n\nconst _supportedLocales_ = ['de','en_GB','en_US','en']\nconst _defaultLocale_ = 'en'\n\n\nasync function fetchMessages(locale) {\n\tconst path = await import('./locales/'+locale+'.ftl')\n\n\tconst response = await fetch(path.default)\n\tconst messages = await response.text()\n\n\treturn { [locale]: new FluentResource(messages) }\n}\n\nfunction getDefaultBundles(){\n\tconst bundle = new FluentBundle('')\n\tbundle.addResource(new FluentResource(''))\n\treturn new ReactLocalization([bundle])\n}\n\nasync function createMessagesGenerator(currentLocales) {\n\tconst fetched = await Promise.all(\n\t\tcurrentLocales.map(fetchMessages)\n\t)\n\tconst messages = fetched.reduce(\n\t\t(obj, cur) => Object.assign(obj, cur)\n\t)\n\n\treturn function* generateBundles() {\n\t\tfor (const locale of currentLocales) {\n\t\t\tconst bundle = new FluentBundle(locale)\n\t\t\tbundle.addResource(messages[locale])\n\t\t\tyield bundle\n\t\t}\n\t}\n}\n\nexport class AppLocalizationProvider extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tbundles: getDefaultBundles(),\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\tconst currentLocales = negotiateLanguages(\n\t\t\tthis.props.userLocales,\n\t\t\t_supportedLocales_,\n\t\t\t{ defaultLocale: _defaultLocale_ }\n\t\t)\n\n\t\tconst generateBundles = await createMessagesGenerator(currentLocales)\n\t\tthis.setState({ bundles: new ReactLocalization(generateBundles()) })\n\t}\n\n\trender() {\n\t\tconst { children } = this.props\n\t\tconst { bundles } = this.state\n\n\t\tif (!bundles) {\n\t\t\t// Show a loader.\n\t\t\treturn <div>Loading texts</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<LocalizationProvider l10n={bundles}>\n\t\t\t\t{children}\n\t\t\t</LocalizationProvider>\n\t\t)\n\t}\n}","import React from 'react'\n\nimport store from 'store'\n\n\n\nconst default_privacy_level_key = 'essentials'\nconst privacy_level_keys = {\n\tessentials: 'privacy_consent_essentials',\n\ttracking: 'privacy_consent_tracking',\n}\n\n\n\nconst storage_functions = {\n\tget: (...args) => {\n\t\treturn store.get(...args)\n\t},\n\n\tset: (key, value, privacy_level_key) => {\n\t\t// this is a wrapper to check if the user consented to storing data on their device\n\t\tif (!(!!privacy_level_keys[key])) { // prevent overwriting of privacy settings\n\t\t\tif (!(!!privacy_level_key)) {\n\t\t\t\tprivacy_level_key = default_privacy_level_key // use a default if no privacy_level_key is provided\n\t\t\t}\n\n\t\t\tif (privacy_level_keys[privacy_level_key]) {\n\t\t\t\tconst privacy_level_consent = store.get(privacy_level_keys[privacy_level_key])\n\t\t\t\tif (privacy_level_consent === true) { // check if the user consented\n\t\t\t\t\tstore.set(key, value)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tsetPrivacy: (privacy_level_key, value) => {\n\t\treturn new Promise((resolve,reject)=>{\n\t\t\tif (!(!!privacy_level_key)) {\n\t\t\t\tprivacy_level_key = default_privacy_level_key // use a default if no privacy_level_key is provided\n\t\t\t}\n\n\t\t\tif (privacy_level_keys[privacy_level_key]) {\n\t\t\t\tstore.set(privacy_level_keys[privacy_level_key], !!value) // store as boolean\n\t\t\t\tresolve()\n\t\t\t} else {\n\t\t\t\treject()\n\t\t\t}\n\t\t})\n\t},\n\tgetPrivacy: (privacy_level_key) => {\n\t\tif (!(!!privacy_level_key)) {\n\t\t\tprivacy_level_key = default_privacy_level_key // use a default if no privacy_level_key is provided\n\t\t}\n\n\t\tif (privacy_level_keys[privacy_level_key]) {\n\t\t\treturn store.get(privacy_level_keys[privacy_level_key]) === true\n\t\t}\n\t\treturn false\n\t},\n}\n\nfunction withLocalStorage(Component) {\n\treturn React.forwardRef(function(props, ref){\n\t\treturn <Component store={storage_functions} ref={ref} {...props} />\n\t})\n}\n\nexport { withLocalStorage }","import React from 'react'\n\nimport 'intl-pluralrules'\nimport { AppLocalizationProvider } from '../../l10n.js'\n\nimport local_ip from '../../.env.local_ip.json'\n\nimport ApolloClient from 'apollo-boost'\n\nimport { InMemoryCache } from 'apollo-cache-inmemory'\nimport { persistCache } from 'apollo-cache-persist'\n\nimport { withLocalStorage } from '../LocalStorage/'\n\n\nconst isDevEnvironment = (local_ip !== '')\n\n\n\nasync function getInitialGlobalState(callback){\n\tconst cache = new InMemoryCache()\n\n\ttry {\n\t\t// await before instantiating ApolloClient, else queries might run before the cache is persisted\n\t\tawait persistCache({\n\t\t\tcache,\n\t\t\tstorage: window.localStorage,\n\t\t})\n\t} catch (error) {\n\t\tconsole.error('Error restoring Apollo cache', error)\n\t}\n\t\n\t\n\tconst globalState = {}\n\n\tglobalState.globalStateFinishedLoading = true\n\n\tglobalState.graphql = new ApolloClient({\n\t\tcache,\n\t\turi: (\n\t\t\tisDevEnvironment\n\t\t\t? `http://${local_ip}:5000/qiekub/us-central1/graphql/graphql/v1`\n\t\t\t: `https://api.qiekub.org/graphql/v1/`\n\t\t),\n\t\t// uri: 'https://us-central1-qiekub.cloudfunctions.net/graphql/graphql/v1',\n\t})\n\n\tcallback(globalState)\n}\n\n\n\n// ----------------------------------------------------------------\n\nconst GlobalsContext = React.createContext()\n\nclass GlobalsProvider extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tglobalStateFinishedLoading: false,\n\n\t\t\tpageOpenTS: new Date(),\n\t\n\t\t\tisDevEnvironment,\n\t\n\t\t\ttransitionDuration: 300,\n\t\t\tisSmallScreen: true,\n\t\t\tsidebarIsOpen: false,\n\n\t\t\tmainMapFunctions: undefined,\n\n\t\t\tcookieOptions: {\n\t\t\t\tpath: '/',\n\t\t\t\tmaxAge: 31557600, // expires in one year // these cookies doesn't exist for ever, cause they are used as a simple spam protection. Even one month would probably be enough.\n\t\t\t\t...(\n\t\t\t\t\tisDevEnvironment\n\t\t\t\t\t? undefined\n\t\t\t\t\t: {\n\t\t\t\t\t\tdomain: '.qiekub.org',\n\t\t\t\t\t\tsecure: true,\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t},\n\n\t\t\tuserLocales: /*['de'] ||*/ navigator.languages,\n\n\t\t\temojis: {\n\t\t\t\taudience_queer_only: '',\n\t\t\t\taudience_queer_primary: '',\n\t\t\t\taudience_queer_welcome: '',\n\t\t\t},\n\t\t}\n\t\t// this.state = {\n\t\t// \t...globalState,\n\t\t// \tset: (...attrs) => {\n\t\t// \t\tthis.setState(...attrs)\n\t\t// \t}\n\t\t// }\n\n\t\tgetInitialGlobalState(globalState=>{\n\t\t\tthis.setState(globalState)\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<GlobalsContext.Provider\n\t\t\t\tkey=\"GlobalsContext.Provider\"\n\t\t\t\tvalue={this.state}\n\t\t\t>\n\t\t\t\t<AppLocalizationProvider key=\"AppLocalizationProvider\" userLocales={this.state.userLocales}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.globalStateFinishedLoading\n\t\t\t\t\t\t? this.props.children\n\t\t\t\t\t\t: <>Loading cache data</>\n\t\t\t\t\t}\n\t\t\t\t</AppLocalizationProvider>\n\t\t\t</GlobalsContext.Provider>\n\t\t)\n\t}\n}\n\nfunction useGlobals() {\n\treturn React.useContext(GlobalsContext)\n}\n\nfunction withGlobals(Component) {\n\tconst ComponentWrapped = withLocalStorage(Component)\n\t\n\treturn React.forwardRef(function(props, ref){\n\t\tconst globals = useGlobals()\n\t\treturn <ComponentWrapped globals={globals} ref={ref} {...props} />\n\t})\n}\n\nexport default GlobalsContext\n\nexport { GlobalsContext, GlobalsProvider, withGlobals, useGlobals }\n\n\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\n\nfunction useInterval(callback, delay) {\n\t// source: https://overreacted.io/making-setinterval-declarative-with-react-hooks/\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nfunction useConicGradient() {\n\tconst waitingForConicGradient = useRef([])\n\tconst [isRunning, setIsRunning] = useState(false)\n\tconst [conicGradientExists, setConicGradientExists] = useState(false)\n\n\tconst onReady = useCallback(function(callback){\n\t\tif (!!callback) {\n\t\t\tif (conicGradientExists) {\n\t\t\t\tcallback()\n\t\t\t}else{\n\t\t\t\twaitingForConicGradient.current.push(callback)\n\t\t\t}\n\t\t}\n\t}, [conicGradientExists])\n\n\tconst getConicGradient = useCallback(function(){\n\t\tif (conicGradientExists) {\n\t\t\treturn window.ConicGradient\n\t\t}else{\n\t\t\treturn null\n\t\t}\n\t}, [conicGradientExists])\n\n\tuseEffect(function(){\n\t\tsetIsRunning(true)\n\t}, [])\n\n\tuseInterval(function(){\n\t\tif (!!window.ConicGradient) {\n\t\t\tsetIsRunning(false)\n\t\t\tsetConicGradientExists(true)\n\n\t\t\tfor (const callback of waitingForConicGradient.current) {\n\t\t\t\tcallback()\n\t\t\t}\n\t\t\twaitingForConicGradient.current = []\n\t\t}\n\t}, isRunning ? 10 : null)\n\n\treturn {\n\t\tonReady,\n\t\tgetConicGradient,\n\t}\n}\n\nfunction withConicGradient(Component) {\t\n\treturn React.forwardRef(function(props, ref){\n\t\tconst ConicGradientProps = useConicGradient()\n\t\treturn <Component conic_gradient={ConicGradientProps} ref={ref} {...props} />\n\t})\n}\n\nexport { withConicGradient }\n\n\n","import {gql} from 'apollo-boost'\n\nexport const getID = gql`\n\tquery{\n\t\tid: getID\n\t}\n`\n\nexport const loadPlace = gql`\n\tquery($_id: ID, $wantedTags: [String], $languages: [String]){\n\t\tgetPlace(_id: $_id){\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t... on Place {\n\t\t\t\t\tname (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tgeometry {\n\t\t\t\t\t\tlocation {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttags(keys: $wantedTags)\n\t\t\t\t\tconfidences(keys: $wantedTags)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const loadMarkers = gql`\n\tquery($languages: [String]){\n\t\tgetMarkers{\n\t\t\t_id\n\t\t\tname (languages: $languages){\n\t\t\t\ttext\n\t\t\t\tlanguage\n\t\t\t}\n\t\t\tlng\n\t\t\tlat\n\t\t\tpreset\n\t\t\ttags\n\t\t}\n\t}\n`\n\nexport const search = gql`\n\tquery($query: String=\"\", $languages: [String]){\n\t\tsearch(query: $query, languages: $languages){\n\t\t\tquery\n\t\t\tresults {\n\t\t\t\tplaceID\n\t\t\t\tpreset\n\t\t\t\tname {\n\t\t\t\t\ttext\n\t\t\t\t\tlanguage\n\t\t\t\t}\n\t\t\t\taddress\n\t\t\t\tgeometry {\n\t\t\t\t\tlocation {\n\t\t\t\t\t\tlng\n\t\t\t\t\t\tlat\n\t\t\t\t\t}\n\t\t\t\t\tboundingbox {\n\t\t\t\t\t\tnortheast {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsouthwest {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const loadQuestions = gql`\n\tquery($languages: [String]){\n\t\tquestions: getQuestions {\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t... on Question {\n\t\t\t\t\tquestion (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tin_one_word (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tdescription (languages: $languages){\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\ticon\n\t\t\t\t\tpossibleAnswers {\n\t\t\t\t\t\tinputtype\n\t\t\t\t\t\tnamespace\n\t\t\t\t\t\tparsers\n\t\t\t\t\t\tkey\n\t\t\t\t\t\ticon\n\t\t\t\t\t\ttitle (languages: $languages){\n\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\tlanguage\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdescription (languages: $languages){\n\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\tlanguage\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfollowUpQuestionIDs\n\t\t\t\t\t\ttags\n\t\t\t\t\t\thidden\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const isGeoCoordinateLegal = gql`\n\tquery($lat: Float = 0.0, $lng: Float = 0.0) {\n\t\tisGeoCoordinateLegal(lat: $lat, lng: $lng)\n\t}\n`\n\nexport const addChangeset = gql`\n\tmutation($properties: Changeset_Input){\n\t\taddChangeset(properties: $properties)\n\t}\n`\n\n\n","import { negotiateLanguages } from '@fluent/langneg'\nimport address_formats from './data/dist/address_formats.json'\nconst addressFormats = address_formats.map(item => ({\n\t...item,\n\tkeys: [].concat(...item.format),\n}))\n\n\nexport function uuidv4() {\n\t// source: https://stackoverflow.com/a/2117523/2387277\n\t// source: https://stackoverflow.com/questions/105034/how-to-create-guid-uuid\n\treturn ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n\t\t// eslint-disable-next-line\n\t\t(c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n\t)\n}\n\n\n\nexport function getTranslation(texts, userLocales = []) {\n\t// texts = {\n\t// \ten: 'hello world'\n\t// }\n\n\tif (typeof texts === 'object') {\n\t\tconst keys = Object.keys(texts)\n\t\tif (keys.length > 0) {\n\t\t\tconst currentLocales = negotiateLanguages(\n\t\t\t\tuserLocales,\n\t\t\t\tkeys,\n\t\t\t\t{}\n\t\t\t)\n\n\t\t\tif (currentLocales.length > 0) {\n\t\t\t\treturn texts[currentLocales[0]]\n\t\t\t}\n\t\t\treturn texts[keys[0]]\n\t\t}\n\t}\n\n\treturn ''\n}\nexport function getTranslationFromArray(texts_array, ...attrs) {\n\t// texts_array = [\n\t// \tlanguage: 'en',\n\t// \ttext: 'hello world',\n\t// ]\n\n\tif (!Array.isArray(texts_array)) {\n\t\treturn ''\n\t}\n\n\tconst text_object = {}\n\tfor (const text of texts_array) {\n\t\ttext_object[text.language || ''] = text.text\n\t}\n\n\treturn getTranslation(text_object, ...attrs)\n}\n\n\n\nexport function getPreset(tags,presets) {\n\tconst tags_keys = Object.keys(tags)\n\tfor (const preset_key in presets) {\n\t\tconst preset_tags = presets[preset_key].tags\n\t\tconst preset_tags_keys = Object.keys(preset_tags)\n\n\t\tconst common_keys = preset_tags_keys.filter(key => tags_keys.includes(key))\n\n\t\tif (common_keys.length === preset_tags_keys.length) {\n\t\t\tconst okay_keys = common_keys.filter(key => preset_tags[key] === '*' || tags[key].includes(preset_tags[key]))\n\t\t\tif (okay_keys.length === preset_tags_keys.length) {\n\t\t\t\treturn {\n\t\t\t\t\tkey: preset_key,\n\t\t\t\t\t...presets[preset_key],\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\treturn presets.default\n}\n\n\nexport function getColorByPreset(preset_key,colorsByPreset_sorted){\n\tfor (const pair of colorsByPreset_sorted) {\n\t\tif (preset_key.startsWith(pair[0])) {\n\t\t\treturn pair[1]\n\t\t\t// break\n\t\t}\n\t}\n}\n\n\nexport function getAddressFormat(tags) {\n\n\t// if (!!tags['addr:format']) {\n\t// \tconst format_country_code = tags['addr:format'].toUpperCase()\n\t// \tfor (const addressFormat of addressFormats) {\n\t// \t\tif (addressFormat.countryCodes.includes(format_country_code)) {\n\t// \t\t\treturn addressFormat\n\t// \t\t}\n\t// \t}\n\t// }\n\n\t// TODO: The following code is not getting the correct address format.\n\n\tconst addr_keys = Object.keys(tags)\n\t.filter(key => key.startsWith('addr:'))\n\t.map(key => key.split('addr:')[1])\n\t\n\t// const addr_keys_length = addr_keys.length\n\t\n\tlet lastMatchCount = 0 // 99999\n\tlet lastAddressFormat = null\n\tfor (const addressFormat of addressFormats) {\n\t\tconst thisMatchCount = addr_keys.filter(value => addressFormat.keys.includes(value)).length\n\t\t// const length_difference = Math.abs(addressFormat.keys.length - addr_keys_length) / addr_keys_length\n\t\t// const existing_keys_difference = Math.ceil((1 - (thisMatchCount / addr_keys_length))*100)*0.01\n\t\t// const sum_difference = length_difference + existing_keys_difference\n\t\t\n\t\tif (thisMatchCount >= lastMatchCount) { // if (sum_difference <= lastMatchCount) {\n\t\t\tlastMatchCount = thisMatchCount // sum_difference\n\t\t\tlastAddressFormat = addressFormat\n\t\t}\n\t}\n\n\tif (!!lastAddressFormat) {\n\t\treturn lastAddressFormat\n\t}\n\n\n\treturn address_formats[0]\n}\n\n\nexport function getWantedTagsList(presets){\n\treturn [...new Set([].concat(...Object.values(presets).map(preset=>Object.keys(preset.tags))))]\n}","/* eslint-disable */\n\nimport L from 'leaflet'\n\nvar __extends = (this && this.__extends) || (function() {\n  var extendStatics = Object.setPrototypeOf ||\n    ({\n        __proto__: []\n      }\n      instanceof Array && function(d, b) {\n        d.__proto__ = b;\n      }) ||\n    function(d, b) {\n      for (var p in b)\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n  return function(d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n})();\nvar PruneCluster;\n(function(PruneCluster_1) {\n  var Point = (function() {\n    function Point() {}\n    return Point;\n  }());\n  PruneCluster_1.Point = Point;\n  var ClusterObject = (function() {\n    function ClusterObject() {}\n    return ClusterObject;\n  }());\n  PruneCluster_1.ClusterObject = ClusterObject;\n  var hashCodeCounter = 1;\n  var maxHashCodeValue = Math.pow(2, 53) - 1;\n  var Marker = (function(_super) {\n    __extends(Marker, _super);\n\n    function Marker(lat, lng, data, category, weight, filtered) {\n      if (data === void 0) {\n        data = {};\n      }\n      if (weight === void 0) {\n        weight = 1;\n      }\n      if (filtered === void 0) {\n        filtered = false;\n      }\n      var _this = _super.call(this) || this;\n      _this.data = data;\n      _this.position = {\n        lat: +lat,\n        lng: +lng\n      };\n      _this.weight = weight;\n      _this.category = category;\n      _this.filtered = filtered;\n      _this.hashCode = hashCodeCounter++;\n      return _this;\n    }\n    Marker.prototype.Move = function(lat, lng) {\n      this.position.lat = +lat;\n      this.position.lng = +lng;\n    };\n    Marker.prototype.SetData = function(data) {\n      for (var key in data) {\n        this.data[key] = data[key];\n      }\n    };\n    return Marker;\n  }(ClusterObject));\n  PruneCluster_1.Marker = Marker;\n  var Cluster = (function(_super) {\n    __extends(Cluster, _super);\n\n    function Cluster(marker) {\n      var _this = _super.call(this) || this;\n      _this.stats = [0, 0, 0, 0, 0, 0, 0, 0];\n      _this.data = {};\n      if (!marker) {\n        _this.hashCode = 1;\n        if (Cluster.ENABLE_MARKERS_LIST) {\n          _this._clusterMarkers = [];\n        }\n        return _this;\n      }\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        _this._clusterMarkers = [marker];\n      }\n      _this.lastMarker = marker;\n      _this.hashCode = 31 + marker.hashCode;\n      _this.population = 1;\n      if (marker.category !== undefined) {\n        _this.stats[marker.category] = 1;\n      }\n      _this.totalWeight = marker.weight;\n      _this.position = {\n        lat: marker.position.lat,\n        lng: marker.position.lng\n      };\n      _this.averagePosition = {\n        lat: marker.position.lat,\n        lng: marker.position.lng\n      };\n      return _this;\n    }\n    Cluster.prototype.AddMarker = function(marker) {\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers.push(marker);\n      }\n      var h = this.hashCode;\n      h = ((h << 5) - h) + marker.hashCode;\n      if (h >= maxHashCodeValue) {\n        this.hashCode = h % maxHashCodeValue;\n      } else {\n        this.hashCode = h;\n      }\n      this.lastMarker = marker;\n      var weight = marker.weight,\n        currentTotalWeight = this.totalWeight,\n        newWeight = weight + currentTotalWeight;\n      this.averagePosition.lat =\n        (this.averagePosition.lat * currentTotalWeight +\n          marker.position.lat * weight) / newWeight;\n      this.averagePosition.lng =\n        (this.averagePosition.lng * currentTotalWeight +\n          marker.position.lng * weight) / newWeight;\n      ++this.population;\n      this.totalWeight = newWeight;\n      if (marker.category !== undefined) {\n        this.stats[marker.category] = (this.stats[marker.category] + 1) || 1;\n      }\n    };\n    Cluster.prototype.Reset = function() {\n      this.hashCode = 1;\n      this.lastMarker = undefined;\n      this.population = 0;\n      this.totalWeight = 0;\n      this.stats = [0, 0, 0, 0, 0, 0, 0, 0];\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers = [];\n      }\n    };\n    Cluster.prototype.ComputeBounds = function(cluster) {\n      var proj = cluster.Project(this.position.lat, this.position.lng);\n      var size = cluster.Size;\n      var nbX = Math.floor(proj.x / size),\n        nbY = Math.floor(proj.y / size),\n        startX = nbX * size,\n        startY = nbY * size;\n      var a = cluster.UnProject(startX, startY),\n        b = cluster.UnProject(startX + size, startY + size);\n      this.bounds = {\n        minLat: b.lat,\n        maxLat: a.lat,\n        minLng: a.lng,\n        maxLng: b.lng\n      };\n    };\n    Cluster.prototype.GetClusterMarkers = function() {\n      return this._clusterMarkers;\n    };\n    Cluster.prototype.ApplyCluster = function(newCluster) {\n      this.hashCode = this.hashCode * 41 + newCluster.hashCode * 43;\n      if (this.hashCode > maxHashCodeValue) {\n        this.hashCode = this.hashCode = maxHashCodeValue;\n      }\n      var weight = newCluster.totalWeight,\n        currentTotalWeight = this.totalWeight,\n        newWeight = weight + currentTotalWeight;\n      this.averagePosition.lat =\n        (this.averagePosition.lat * currentTotalWeight +\n          newCluster.averagePosition.lat * weight) / newWeight;\n      this.averagePosition.lng =\n        (this.averagePosition.lng * currentTotalWeight +\n          newCluster.averagePosition.lng * weight) / newWeight;\n      this.population += newCluster.population;\n      this.totalWeight = newWeight;\n      this.bounds.minLat = Math.min(this.bounds.minLat, newCluster.bounds.minLat);\n      this.bounds.minLng = Math.min(this.bounds.minLng, newCluster.bounds.minLng);\n      this.bounds.maxLat = Math.max(this.bounds.maxLat, newCluster.bounds.maxLat);\n      this.bounds.maxLng = Math.max(this.bounds.maxLng, newCluster.bounds.maxLng);\n      for (var category in newCluster.stats) {\n        if (newCluster.stats.hasOwnProperty(category)) {\n          if (this.stats.hasOwnProperty(category)) {\n            this.stats[category] += newCluster.stats[category];\n          } else {\n            this.stats[category] = newCluster.stats[category];\n          }\n        }\n      }\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers = this._clusterMarkers.concat(newCluster.GetClusterMarkers());\n      }\n    };\n    Cluster.ENABLE_MARKERS_LIST = false;\n    return Cluster;\n  }(ClusterObject));\n  PruneCluster_1.Cluster = Cluster;\n\n  function checkPositionInsideBounds(a, b) {\n    return (a.lat >= b.minLat && a.lat <= b.maxLat) &&\n      a.lng >= b.minLng && a.lng <= b.maxLng;\n  }\n\n  function insertionSort(list) {\n    for (var i = 1, j, tmp, tmpLng, length = list.length; i < length; ++i) {\n      tmp = list[i];\n      tmpLng = tmp.position.lng;\n      for (j = i - 1; j >= 0 && list[j].position.lng > tmpLng; --j) {\n        list[j + 1] = list[j];\n      }\n      list[j + 1] = tmp;\n    }\n  }\n\n  function shouldUseInsertionSort(total, nbChanges) {\n    if (nbChanges > 300) {\n      return false;\n    } else {\n      return (nbChanges / total) < 0.2;\n    }\n  }\n  var PruneCluster = (function() {\n    function PruneCluster() {\n      this._markers = [];\n      this._nbChanges = 0;\n      this._clusters = [];\n      this.Size = 166;\n      this.ViewPadding = 0.2;\n    }\n    PruneCluster.prototype.RegisterMarker = function(marker) {\n      if (marker._removeFlag) {\n        delete marker._removeFlag;\n      }\n      this._markers.push(marker);\n      this._nbChanges += 1;\n    };\n    PruneCluster.prototype.RegisterMarkers = function(markers) {\n      var _this = this;\n      markers.forEach(function(marker) {\n        _this.RegisterMarker(marker);\n      });\n    };\n    PruneCluster.prototype._sortMarkers = function() {\n      var markers = this._markers,\n        length = markers.length;\n      if (this._nbChanges && !shouldUseInsertionSort(length, this._nbChanges)) {\n        this._markers.sort(function(a, b) {\n          return a.position.lng - b.position.lng;\n        });\n      } else {\n        insertionSort(markers);\n      }\n      this._nbChanges = 0;\n    };\n    PruneCluster.prototype._sortClusters = function() {\n      insertionSort(this._clusters);\n    };\n    PruneCluster.prototype._indexLowerBoundLng = function(lng) {\n      var markers = this._markers,\n        it, step, first = 0,\n        count = markers.length;\n      while (count > 0) {\n        step = Math.floor(count / 2);\n        it = first + step;\n        if (markers[it].position.lng < lng) {\n          first = ++it;\n          count -= step + 1;\n        } else {\n          count = step;\n        }\n      }\n      return first;\n    };\n    PruneCluster.prototype._resetClusterViews = function() {\n      for (var i = 0, l = this._clusters.length; i < l; ++i) {\n        var cluster = this._clusters[i];\n        cluster.Reset();\n        cluster.ComputeBounds(this);\n      }\n    };\n    PruneCluster.prototype.ProcessView = function(bounds) {\n      var heightBuffer = Math.abs(bounds.maxLat - bounds.minLat) * this.ViewPadding,\n        widthBuffer = Math.abs(bounds.maxLng - bounds.minLng) * this.ViewPadding;\n      var extendedBounds = {\n        minLat: bounds.minLat - heightBuffer - heightBuffer,\n        maxLat: bounds.maxLat + heightBuffer + heightBuffer,\n        minLng: bounds.minLng - widthBuffer - widthBuffer,\n        maxLng: bounds.maxLng + widthBuffer + widthBuffer\n      };\n      this._sortMarkers();\n      this._resetClusterViews();\n      var firstIndex = this._indexLowerBoundLng(extendedBounds.minLng);\n      var markers = this._markers,\n        clusters = this._clusters;\n      var workingClusterList = clusters.slice(0);\n      for (var i = firstIndex, l = markers.length; i < l; ++i) {\n        var marker = markers[i],\n          markerPosition = marker.position;\n        if (markerPosition.lng > extendedBounds.maxLng) {\n          break;\n        }\n        if (markerPosition.lat > extendedBounds.minLat &&\n          markerPosition.lat < extendedBounds.maxLat &&\n          !marker.filtered) {\n          var clusterFound = false,\n            cluster;\n          for (var j = 0, ll = workingClusterList.length; j < ll; ++j) {\n            cluster = workingClusterList[j];\n            if (cluster.bounds.maxLng < marker.position.lng) {\n              workingClusterList.splice(j, 1);\n              --j;\n              --ll;\n              continue;\n            }\n            if (checkPositionInsideBounds(markerPosition, cluster.bounds)) {\n              cluster.AddMarker(marker);\n              clusterFound = true;\n              break;\n            }\n          }\n          if (!clusterFound) {\n            cluster = new Cluster(marker);\n            cluster.ComputeBounds(this);\n            clusters.push(cluster);\n            workingClusterList.push(cluster);\n          }\n        }\n      }\n      var newClustersList = [];\n      for (i = 0, l = clusters.length; i < l; ++i) {\n        cluster = clusters[i];\n        if (cluster.population > 0) {\n          newClustersList.push(cluster);\n        }\n      }\n      this._clusters = newClustersList;\n      this._sortClusters();\n      return this._clusters;\n    };\n    PruneCluster.prototype.RemoveMarkers = function(markers) {\n      if (!markers) {\n        this._markers = [];\n        return;\n      }\n      for (var i = 0, l = markers.length; i < l; ++i) {\n        markers[i]._removeFlag = true;\n      }\n      var newMarkersList = [];\n      for (i = 0, l = this._markers.length; i < l; ++i) {\n        if (!this._markers[i]._removeFlag) {\n          newMarkersList.push(this._markers[i]);\n        } else {\n          delete this._markers[i]._removeFlag;\n        }\n      }\n      this._markers = newMarkersList;\n    };\n    PruneCluster.prototype.FindMarkersInArea = function(area) {\n      var aMinLat = area.minLat,\n        aMaxLat = area.maxLat,\n        aMinLng = area.minLng,\n        aMaxLng = area.maxLng,\n        markers = this._markers,\n        result = [];\n      var firstIndex = this._indexLowerBoundLng(aMinLng);\n      for (var i = firstIndex, l = markers.length; i < l; ++i) {\n        var pos = markers[i].position;\n        if (pos.lng > aMaxLng) {\n          break;\n        }\n        if (pos.lat >= aMinLat && pos.lat <= aMaxLat &&\n          pos.lng >= aMinLng) {\n          result.push(markers[i]);\n        }\n      }\n      return result;\n    };\n    PruneCluster.prototype.ComputeBounds = function(markers, withFiltered) {\n      if (withFiltered === void 0) {\n        withFiltered = true;\n      }\n      if (!markers || !markers.length) {\n        return null;\n      }\n      var rMinLat = Number.MAX_VALUE,\n        rMaxLat = -Number.MAX_VALUE,\n        rMinLng = Number.MAX_VALUE,\n        rMaxLng = -Number.MAX_VALUE;\n      for (var i = 0, l = markers.length; i < l; ++i) {\n        if (!withFiltered && markers[i].filtered) {\n          continue;\n        }\n        var pos = markers[i].position;\n        if (pos.lat < rMinLat)\n          rMinLat = pos.lat;\n        if (pos.lat > rMaxLat)\n          rMaxLat = pos.lat;\n        if (pos.lng < rMinLng)\n          rMinLng = pos.lng;\n        if (pos.lng > rMaxLng)\n          rMaxLng = pos.lng;\n      }\n      return {\n        minLat: rMinLat,\n        maxLat: rMaxLat,\n        minLng: rMinLng,\n        maxLng: rMaxLng\n      };\n    };\n    PruneCluster.prototype.FindMarkersBoundsInArea = function(area) {\n      return this.ComputeBounds(this.FindMarkersInArea(area));\n    };\n    PruneCluster.prototype.ComputeGlobalBounds = function(withFiltered) {\n      if (withFiltered === void 0) {\n        withFiltered = true;\n      }\n      return this.ComputeBounds(this._markers, withFiltered);\n    };\n    PruneCluster.prototype.GetMarkers = function() {\n      return this._markers;\n    };\n    PruneCluster.prototype.GetPopulation = function() {\n      return this._markers.length;\n    };\n    PruneCluster.prototype.ResetClusters = function() {\n      this._clusters = [];\n    };\n    return PruneCluster;\n  }());\n  PruneCluster_1.PruneCluster = PruneCluster;\n})(PruneCluster || (PruneCluster = {}));\nexport var PruneCluster;\n(function(PruneCluster) {})(PruneCluster || (PruneCluster = {}));\nexport var PruneClusterForLeaflet = (L.Layer ? L.Layer : L.Class).extend({\n  initialize: function(size, clusterMargin) {\n    var _this = this;\n    if (size === void 0) {\n      size = 120;\n    }\n    if (clusterMargin === void 0) {\n      clusterMargin = 20;\n    }\n    this.Cluster = new PruneCluster.PruneCluster();\n    this.Cluster.Size = size;\n    this.clusterMargin = Math.min(clusterMargin, size / 4);\n    this.Cluster.Project = function(lat, lng) {\n      return _this._map.project(new L.LatLng(lat, lng), Math.floor(_this._map.getZoom()));\n    };\n    this.Cluster.UnProject = function(x, y) {\n      return _this._map.unproject(new L.Point(x, y), Math.floor(_this._map.getZoom()));\n    };\n    this._objectsOnMap = [];\n    this.spiderfier = new PruneClusterLeafletSpiderfier(this);\n    this._hardMove = false;\n    this._resetIcons = false;\n    this._removeTimeoutId = 0;\n    this._markersRemoveListTimeout = [];\n  },\n  RegisterMarker: function(marker) {\n    this.Cluster.RegisterMarker(marker);\n  },\n  RegisterMarkers: function(markers) {\n    this.Cluster.RegisterMarkers(markers);\n  },\n  RemoveMarkers: function(markers) {\n    this.Cluster.RemoveMarkers(markers);\n  },\n  BuildLeafletCluster: function(cluster, position) {\n    var _this = this;\n    var m = new L.Marker(position, {\n      icon: this.BuildLeafletClusterIcon(cluster)\n    });\n    m._leafletClusterBounds = cluster.bounds;\n    m.on('click', function() {\n      var cbounds = m._leafletClusterBounds;\n      var markersArea = _this.Cluster.FindMarkersInArea(cbounds);\n      var b = _this.Cluster.ComputeBounds(markersArea);\n      if (b) {\n        var bounds = new L.LatLngBounds(new L.LatLng(b.minLat, b.maxLng), new L.LatLng(b.maxLat, b.minLng));\n        var zoomLevelBefore = _this._map.getZoom(),\n          zoomLevelAfter = _this._map.getBoundsZoom(bounds, false, new L.Point(20, 20));\n        if (zoomLevelAfter === zoomLevelBefore) {\n          var filteredBounds = [];\n          for (var i = 0, l = _this._objectsOnMap.length; i < l; ++i) {\n            var o = _this._objectsOnMap[i];\n            if (o.data._leafletMarker !== m) {\n              if (o.bounds.minLat >= cbounds.minLat &&\n                o.bounds.maxLat <= cbounds.maxLat &&\n                o.bounds.minLng >= cbounds.minLng &&\n                o.bounds.maxLng <= cbounds.maxLng) {\n                filteredBounds.push(o.bounds);\n              }\n            }\n          }\n          if (filteredBounds.length > 0) {\n            var newMarkersArea = [];\n            var ll = filteredBounds.length;\n            for (i = 0, l = markersArea.length; i < l; ++i) {\n              var markerPos = markersArea[i].position;\n              var isFiltered = false;\n              for (var j = 0; j < ll; ++j) {\n                var currentFilteredBounds = filteredBounds[j];\n                if (markerPos.lat >= currentFilteredBounds.minLat &&\n                  markerPos.lat <= currentFilteredBounds.maxLat &&\n                  markerPos.lng >= currentFilteredBounds.minLng &&\n                  markerPos.lng <= currentFilteredBounds.maxLng) {\n                  isFiltered = true;\n                  break;\n                }\n              }\n              if (!isFiltered) {\n                newMarkersArea.push(markersArea[i]);\n              }\n            }\n            markersArea = newMarkersArea;\n          }\n          if (markersArea.length < 200 || zoomLevelAfter >= _this._map.getMaxZoom()) {\n            _this._map.fire('overlappingmarkers', {\n              cluster: _this,\n              markers: markersArea,\n              center: m.getLatLng(),\n              marker: m\n            });\n          } else {\n            zoomLevelAfter++;\n          }\n          _this._map.setView(m.getLatLng(), zoomLevelAfter);\n        } else {\n          _this._map.fitBounds(bounds);\n        }\n      }\n    });\n    return m;\n  },\n  BuildLeafletClusterIcon: function(cluster) {\n    var c = 'prunecluster prunecluster-';\n    var iconSize = 38;\n    var maxPopulation = this.Cluster.GetPopulation();\n    if (cluster.population < Math.max(10, maxPopulation * 0.01)) {\n      c += 'small';\n    } else if (cluster.population < Math.max(100, maxPopulation * 0.05)) {\n      c += 'medium';\n      iconSize = 40;\n    } else {\n      c += 'large';\n      iconSize = 44;\n    }\n    return new L.DivIcon({\n      html: \"<div><span>\" + cluster.population + \"</span></div>\",\n      className: c,\n      iconSize: L.point(iconSize, iconSize)\n    });\n  },\n  BuildLeafletMarker: function(marker, position) {\n    var m = new L.Marker(position);\n    this.PrepareLeafletMarker(m, marker.data, marker.category);\n    return m;\n  },\n  PrepareLeafletMarker: function(marker, data, category) {\n    if (data.icon) {\n      if (typeof data.icon === 'function') {\n        marker.setIcon(data.icon(data, category));\n      } else {\n        marker.setIcon(data.icon);\n      }\n    }\n    if (data.popup) {\n      var content = typeof data.popup === 'function' ? data.popup(data, category) : data.popup;\n      if (marker.getPopup()) {\n        marker.setPopupContent(content, data.popupOptions);\n      } else {\n        marker.bindPopup(content, data.popupOptions);\n      }\n    }\n  },\n  onAdd: function(map) {\n    this._map = map;\n    map.on('movestart', this._moveStart, this);\n    map.on('moveend', this._moveEnd, this);\n    map.on('zoomend', this._zoomStart, this);\n    map.on('zoomend', this._zoomEnd, this);\n    this.ProcessView();\n    map.addLayer(this.spiderfier);\n  },\n  onRemove: function(map) {\n    map.off('movestart', this._moveStart, this);\n    map.off('moveend', this._moveEnd, this);\n    map.off('zoomend', this._zoomStart, this);\n    map.off('zoomend', this._zoomEnd, this);\n    for (var i = 0, l = this._objectsOnMap.length; i < l; ++i) {\n      map.removeLayer(this._objectsOnMap[i].data._leafletMarker);\n    }\n    this._objectsOnMap = [];\n    this.Cluster.ResetClusters();\n    map.removeLayer(this.spiderfier);\n    this._map = null;\n  },\n  _moveStart: function() {\n    this._moveInProgress = true;\n  },\n  _moveEnd: function(e) {\n    this._moveInProgress = false;\n    this._hardMove = e.hard;\n    this.ProcessView();\n  },\n  _zoomStart: function() {\n    this._zoomInProgress = true;\n  },\n  _zoomEnd: function() {\n    this._zoomInProgress = false;\n    this.ProcessView();\n  },\n  ProcessView: function() {\n    var _this = this;\n    if (!this._map || this._zoomInProgress || this._moveInProgress) {\n      return;\n    }\n    var map = this._map,\n      bounds = map.getBounds(),\n      zoom = Math.floor(map.getZoom()),\n      marginRatio = this.clusterMargin / this.Cluster.Size,\n      resetIcons = this._resetIcons;\n    var southWest = bounds.getSouthWest(),\n      northEast = bounds.getNorthEast();\n    var clusters = this.Cluster.ProcessView({\n      minLat: southWest.lat,\n      minLng: southWest.lng,\n      maxLat: northEast.lat,\n      maxLng: northEast.lng\n    });\n    var objectsOnMap = this._objectsOnMap,\n      newObjectsOnMap = [],\n      markersOnMap = new Array(objectsOnMap.length);\n    for (var i = 0, l = objectsOnMap.length; i < l; ++i) {\n      var marker = objectsOnMap[i].data._leafletMarker;\n      markersOnMap[i] = marker;\n      marker._removeFromMap = true;\n    }\n    var clusterCreationList = [];\n    var clusterCreationListPopOne = [];\n    var opacityUpdateList = [];\n    var workingList = [];\n    for (i = 0, l = clusters.length; i < l; ++i) {\n      var icluster = clusters[i],\n        iclusterData = icluster.data;\n      var latMargin = (icluster.bounds.maxLat - icluster.bounds.minLat) * marginRatio,\n        lngMargin = (icluster.bounds.maxLng - icluster.bounds.minLng) * marginRatio;\n      for (var j = 0, ll = workingList.length; j < ll; ++j) {\n        var c = workingList[j];\n        if (c.bounds.maxLng < icluster.bounds.minLng) {\n          workingList.splice(j, 1);\n          --j;\n          --ll;\n          continue;\n        }\n        var oldMaxLng = c.averagePosition.lng + lngMargin,\n          oldMinLat = c.averagePosition.lat - latMargin,\n          oldMaxLat = c.averagePosition.lat + latMargin,\n          newMinLng = icluster.averagePosition.lng - lngMargin,\n          newMinLat = icluster.averagePosition.lat - latMargin,\n          newMaxLat = icluster.averagePosition.lat + latMargin;\n        if (oldMaxLng > newMinLng && oldMaxLat > newMinLat && oldMinLat < newMaxLat) {\n          iclusterData._leafletCollision = true;\n          c.ApplyCluster(icluster);\n          break;\n        }\n      }\n      if (!iclusterData._leafletCollision) {\n        workingList.push(icluster);\n      }\n    }\n    clusters.forEach(function(cluster) {\n      var m = undefined;\n      var data = cluster.data;\n      if (data._leafletCollision) {\n        data._leafletCollision = false;\n        data._leafletOldPopulation = 0;\n        data._leafletOldHashCode = 0;\n        return;\n      }\n      var position = new L.LatLng(cluster.averagePosition.lat, cluster.averagePosition.lng);\n      var oldMarker = data._leafletMarker;\n      if (oldMarker) {\n        if (cluster.population === 1 && data._leafletOldPopulation === 1 && cluster.hashCode === oldMarker._hashCode) {\n          if (resetIcons || oldMarker._zoomLevel !== zoom || cluster.lastMarker.data.forceIconRedraw) {\n            _this.PrepareLeafletMarker(oldMarker, cluster.lastMarker.data, cluster.lastMarker.category);\n            if (cluster.lastMarker.data.forceIconRedraw) {\n              cluster.lastMarker.data.forceIconRedraw = false;\n            }\n          }\n          oldMarker.setLatLng(position);\n          m = oldMarker;\n        } else if (cluster.population > 1 && data._leafletOldPopulation > 1 && (oldMarker._zoomLevel === zoom ||\n            data._leafletPosition.equals(position))) {\n          oldMarker.setLatLng(position);\n          if (resetIcons || cluster.population != data._leafletOldPopulation ||\n            cluster.hashCode !== data._leafletOldHashCode) {\n            var boundsCopy = {};\n            L.Util.extend(boundsCopy, cluster.bounds);\n            oldMarker._leafletClusterBounds = boundsCopy;\n            oldMarker.setIcon(_this.BuildLeafletClusterIcon(cluster));\n          }\n          data._leafletOldPopulation = cluster.population;\n          data._leafletOldHashCode = cluster.hashCode;\n          m = oldMarker;\n        }\n      }\n      if (!m) {\n        if (cluster.population === 1) {\n          clusterCreationListPopOne.push(cluster);\n        } else {\n          clusterCreationList.push(cluster);\n        }\n        data._leafletPosition = position;\n        data._leafletOldPopulation = cluster.population;\n        data._leafletOldHashCode = cluster.hashCode;\n      } else {\n        m._removeFromMap = false;\n        newObjectsOnMap.push(cluster);\n        m._zoomLevel = zoom;\n        m._hashCode = cluster.hashCode;\n        m._population = cluster.population;\n        data._leafletMarker = m;\n        data._leafletPosition = position;\n      }\n    });\n    clusterCreationList = clusterCreationListPopOne.concat(clusterCreationList);\n    for (i = 0, l = objectsOnMap.length; i < l; ++i) {\n      icluster = objectsOnMap[i];\n      var idata = icluster.data;\n      marker = idata._leafletMarker;\n      if (idata._leafletMarker._removeFromMap) {\n        var remove = true;\n        if (marker._zoomLevel === zoom) {\n          var pa = icluster.averagePosition;\n          latMargin = (icluster.bounds.maxLat - icluster.bounds.minLat) * marginRatio,\n            lngMargin = (icluster.bounds.maxLng - icluster.bounds.minLng) * marginRatio;\n          for (j = 0, ll = clusterCreationList.length; j < ll; ++j) {\n            var jcluster = clusterCreationList[j],\n              jdata = jcluster.data;\n            if (marker._population === 1 && jcluster.population === 1 &&\n              marker._hashCode === jcluster.hashCode) {\n              if (resetIcons || jcluster.lastMarker.data.forceIconRedraw) {\n                this.PrepareLeafletMarker(marker, jcluster.lastMarker.data, jcluster.lastMarker.category);\n                if (jcluster.lastMarker.data.forceIconRedraw) {\n                  jcluster.lastMarker.data.forceIconRedraw = false;\n                }\n              }\n              marker.setLatLng(jdata._leafletPosition);\n              remove = false;\n            } else {\n              var pb = jcluster.averagePosition;\n              var oldMinLng = pa.lng - lngMargin,\n                newMaxLng = pb.lng + lngMargin;\n              oldMaxLng = pa.lng + lngMargin;\n              oldMinLat = pa.lat - latMargin;\n              oldMaxLat = pa.lat + latMargin;\n              newMinLng = pb.lng - lngMargin;\n              newMinLat = pb.lat - latMargin;\n              newMaxLat = pb.lat + latMargin;\n              if ((marker._population > 1 && jcluster.population > 1) &&\n                (oldMaxLng > newMinLng && oldMinLng < newMaxLng && oldMaxLat > newMinLat && oldMinLat < newMaxLat)) {\n                marker.setLatLng(jdata._leafletPosition);\n                marker.setIcon(this.BuildLeafletClusterIcon(jcluster));\n                var poisson = {};\n                L.Util.extend(poisson, jcluster.bounds);\n                marker._leafletClusterBounds = poisson;\n                jdata._leafletOldPopulation = jcluster.population;\n                jdata._leafletOldHashCode = jcluster.hashCode;\n                marker._population = jcluster.population;\n                remove = false;\n              }\n            }\n            if (!remove) {\n              jdata._leafletMarker = marker;\n              marker._removeFromMap = false;\n              newObjectsOnMap.push(jcluster);\n              clusterCreationList.splice(j, 1);\n              --j;\n              --ll;\n              break;\n            }\n          }\n        }\n        if (remove) {\n          if (!marker._removeFromMap)\n            console.error(\"wtf\");\n        }\n      }\n    }\n    for (i = 0, l = clusterCreationList.length; i < l; ++i) {\n      icluster = clusterCreationList[i],\n        idata = icluster.data;\n      var iposition = idata._leafletPosition;\n      var creationMarker;\n      if (icluster.population === 1) {\n        creationMarker = this.BuildLeafletMarker(icluster.lastMarker, iposition);\n      } else {\n        creationMarker = this.BuildLeafletCluster(icluster, iposition);\n      }\n      creationMarker.addTo(map);\n      creationMarker.setOpacity(0);\n      opacityUpdateList.push(creationMarker);\n      idata._leafletMarker = creationMarker;\n      creationMarker._zoomLevel = zoom;\n      creationMarker._hashCode = icluster.hashCode;\n      creationMarker._population = icluster.population;\n      newObjectsOnMap.push(icluster);\n    }\n    window.setTimeout(function() {\n      for (i = 0, l = opacityUpdateList.length; i < l; ++i) {\n        var m = opacityUpdateList[i];\n        if (m._icon)\n          L.DomUtil.addClass(m._icon, \"prunecluster-anim\");\n        if (m._shadow)\n          L.DomUtil.addClass(m._shadow, \"prunecluster-anim\");\n        m.setOpacity(1);\n      }\n    }, 1);\n    if (this._hardMove) {\n      for (i = 0, l = markersOnMap.length; i < l; ++i) {\n        marker = markersOnMap[i];\n        if (marker._removeFromMap) {\n          map.removeLayer(marker);\n        }\n      }\n    } else {\n      if (this._removeTimeoutId !== 0) {\n        window.clearTimeout(this._removeTimeoutId);\n        for (i = 0, l = this._markersRemoveListTimeout.length; i < l; ++i) {\n          map.removeLayer(this._markersRemoveListTimeout[i]);\n        }\n      }\n      var toRemove = [];\n      for (i = 0, l = markersOnMap.length; i < l; ++i) {\n        marker = markersOnMap[i];\n        if (marker._removeFromMap) {\n          marker.setOpacity(0);\n          toRemove.push(marker);\n        }\n      }\n      if (toRemove.length > 0) {\n        this._removeTimeoutId = window.setTimeout(function() {\n          for (i = 0, l = toRemove.length; i < l; ++i) {\n            map.removeLayer(toRemove[i]);\n          }\n          _this._removeTimeoutId = 0;\n        }, 300);\n      }\n      this._markersRemoveListTimeout = toRemove;\n    }\n    this._objectsOnMap = newObjectsOnMap;\n    this._hardMove = false;\n    this._resetIcons = false;\n  },\n  FitBounds: function(withFiltered) {\n    if (withFiltered === void 0) {\n      withFiltered = true;\n    }\n    var bounds = this.Cluster.ComputeGlobalBounds(withFiltered);\n    if (bounds) {\n      this._map.fitBounds(new L.LatLngBounds(new L.LatLng(bounds.minLat, bounds.maxLng), new L.LatLng(bounds.maxLat, bounds.minLng)));\n    }\n  },\n  GetMarkers: function() {\n    return this.Cluster.GetMarkers();\n  },\n  RedrawIcons: function(processView) {\n    if (processView === void 0) {\n      processView = true;\n    }\n    this._resetIcons = true;\n    if (processView) {\n      this.ProcessView();\n    }\n  }\n});\nexport var PruneClusterLeafletSpiderfier = (L.Layer ? L.Layer : L.Class).extend({\n  _2PI: Math.PI * 2,\n  _circleFootSeparation: 25,\n  _circleStartAngle: Math.PI / 6,\n  _spiralFootSeparation: 28,\n  _spiralLengthStart: 11,\n  _spiralLengthFactor: 5,\n  _spiralCountTrigger: 8,\n  spiderfyDistanceMultiplier: 1,\n  initialize: function(cluster) {\n    this._cluster = cluster;\n    this._currentMarkers = [];\n    this._multiLines = !!L.multiPolyline;\n    this._lines = this._multiLines ?\n      L.multiPolyline([], {\n        weight: 1.5,\n        color: '#222'\n      }) :\n      L.polyline([], {\n        weight: 1.5,\n        color: '#222'\n      });\n  },\n  onAdd: function(map) {\n    this._map = map;\n    this._map.on('overlappingmarkers', this.Spiderfy, this);\n    this._map.on('click', this.Unspiderfy, this);\n    this._map.on('zoomend', this.Unspiderfy, this);\n  },\n  Spiderfy: function(data) {\n    var _this = this;\n    if (data.cluster !== this._cluster) {\n      return;\n    }\n    this.Unspiderfy();\n    var markers = data.markers.filter(function(marker) {\n      return !marker.filtered;\n    });\n    this._currentCenter = data.center;\n    var centerPoint = this._map.latLngToLayerPoint(data.center);\n    var points;\n    if (markers.length >= this._spiralCountTrigger) {\n      points = this._generatePointsSpiral(markers.length, centerPoint);\n    } else {\n      if (this._multiLines) {\n        centerPoint.y += 10;\n      }\n      points = this._generatePointsCircle(markers.length, centerPoint);\n    }\n    var polylines = [];\n    var leafletMarkers = [];\n    var projectedPoints = [];\n    for (var i = 0, l = points.length; i < l; ++i) {\n      var pos = this._map.layerPointToLatLng(points[i]);\n      var m = this._cluster.BuildLeafletMarker(markers[i], data.center);\n      m.setZIndexOffset(5000);\n      m.setOpacity(0);\n      this._currentMarkers.push(m);\n      this._map.addLayer(m);\n      leafletMarkers.push(m);\n      projectedPoints.push(pos);\n    }\n    window.setTimeout(function() {\n      for (i = 0, l = points.length; i < l; ++i) {\n        leafletMarkers[i].setLatLng(projectedPoints[i])\n          .setOpacity(1);\n      }\n      var startTime = +new Date();\n      var interval = 42,\n        duration = 290;\n      var anim = window.setInterval(function() {\n        polylines = [];\n        var now = +new Date();\n        var d = now - startTime;\n        if (d >= duration) {\n          window.clearInterval(anim);\n          stepRatio = 1.0;\n        } else {\n          var stepRatio = d / duration;\n        }\n        var center = data.center;\n        for (i = 0, l = points.length; i < l; ++i) {\n          var p = projectedPoints[i],\n            diffLat = p.lat - center.lat,\n            diffLng = p.lng - center.lng;\n          polylines.push([center, new L.LatLng(center.lat + diffLat * stepRatio, center.lng + diffLng * stepRatio)]);\n        }\n        _this._lines.setLatLngs(polylines);\n      }, interval);\n    }, 1);\n    this._lines.setLatLngs(polylines);\n    this._map.addLayer(this._lines);\n    if (data.marker) {\n      this._clusterMarker = data.marker.setOpacity(0.3);\n    }\n  },\n  _generatePointsCircle: function(count, centerPt) {\n    var circumference = this.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),\n      legLength = circumference / this._2PI,\n      angleStep = this._2PI / count,\n      res = [],\n      i, angle;\n    res.length = count;\n    for (i = count - 1; i >= 0; i--) {\n      angle = this._circleStartAngle + i * angleStep;\n      res[i] = new L.Point(Math.round(centerPt.x + legLength * Math.cos(angle)), Math.round(centerPt.y + legLength * Math.sin(angle)));\n    }\n    return res;\n  },\n  _generatePointsSpiral: function(count, centerPt) {\n    var legLength = this.spiderfyDistanceMultiplier * this._spiralLengthStart,\n      separation = this.spiderfyDistanceMultiplier * this._spiralFootSeparation,\n      lengthFactor = this.spiderfyDistanceMultiplier * this._spiralLengthFactor,\n      angle = 0,\n      res = [],\n      i;\n    res.length = count;\n    for (i = count - 1; i >= 0; i--) {\n      angle += separation / legLength + i * 0.0005;\n      res[i] = new L.Point(Math.round(centerPt.x + legLength * Math.cos(angle)), Math.round(centerPt.y + legLength * Math.sin(angle)));\n      legLength += this._2PI * lengthFactor / angle;\n    }\n    return res;\n  },\n  Unspiderfy: function() {\n    var _this = this;\n    for (var i = 0, l = this._currentMarkers.length; i < l; ++i) {\n      this._currentMarkers[i].setLatLng(this._currentCenter).setOpacity(0);\n    }\n    var markers = this._currentMarkers;\n    window.setTimeout(function() {\n      for (i = 0, l = markers.length; i < l; ++i) {\n        _this._map.removeLayer(markers[i]);\n      }\n    }, 300);\n    this._currentMarkers = [];\n    this._map.removeLayer(this._lines);\n    if (this._clusterMarker) {\n      this._clusterMarker.setOpacity(1);\n    }\n  },\n  onRemove: function(map) {\n    this.Unspiderfy();\n    map.off('overlappingmarkers', this.Spiderfy, this);\n    map.off('click', this.Unspiderfy, this);\n    map.off('zoomend', this.Unspiderfy, this);\n  }\n});\n\n\n// export PruneClusterForLeaflet\n\nexport default PruneCluster\n","import React from 'react'\n\nimport { withLocalization } from '../Localized/'\nimport { withConicGradient } from '../ConicGradient/'\n\nimport { navigate } from '@reach/router'\nimport {\n\tloadMarkers as query_loadMarkers,\n} from '../../queries.js'\n\nimport './index.css'\n\n// import categories from '../../data/dist/categories.json'\nimport presets from '../../data/dist/presets.json'\nimport colors from '../../data/dist/colors.json'\nimport colorsByPreset from '../../data/dist/colorsByPreset.json'\nimport { getColorByPreset/*, getPreset, getWantedTagsList*/ } from '../../functions.js'\n\nimport { withGlobals } from '../Globals/'\n\nimport {\n\tFab,\n} from '@material-ui/core'\nimport {\n\tAddRounded as ZoomInIcon, // ZoomInRounded\n\tRemoveRounded as ZoomOutIcon, // ZoomOutRounded\n} from '@material-ui/icons'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport { Map, TileLayer } from 'react-leaflet'\nimport L from 'leaflet'\nimport './leaflet/leaflet.css'\n\nimport {PruneCluster, PruneClusterForLeaflet} from './PruneCluster_dist/PruneCluster.js'\n\nPruneCluster.Cluster.ENABLE_MARKERS_LIST = true\n\nclass MainMap extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tdocs: [],\n\t\t\tisGeoChooser: false,\n\t\t\tmiddleMarkerDoc: undefined,\n\t\t}\n\n\t\tthis.defaultClusterSize = 120\n\n\t\tthis.filters = null\n\n\t\t// this.MarkerLayerRef = React.createRef()\n\t\tthis.map = null\n\t\tthis.markers = []\n\n\t\tthis.ConicGradient = null\n\n\t\tthis.gotMapRef = this.gotMapRef.bind(this)\n\n\t\tthis.createPruneCluster = this.createPruneCluster.bind(this)\n\t\tthis.addMarkersToPruneCluster = this.addMarkersToPruneCluster.bind(this)\n\t\tthis.filterMarkers = this.filterMarkers.bind(this)\n\t\tthis.showAllMarkers = this.showAllMarkers.bind(this)\n\n\t\tthis.setMapPos = this.setMapPos.bind(this)\n\t\tthis.viewportChanged = this.viewportChanged.bind(this)\n\t\tthis.zoomIn = this.zoomIn.bind(this)\n\t\tthis.zoomOut = this.zoomOut.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadMarkers()\n\n\t\tif (this.props.conic_gradient) {\n\t\t\tthis.props.conic_gradient.onReady(()=>{\n\t\t\t\tthis.ConicGradient = this.props.conic_gradient.getConicGradient()\n\t\t\t\tthis.clusterGroup.RedrawIcons()\n\t\t\t})\n\t\t}\n\n\t\tif (this.props.onFunctions) {\n\t\t\tconst functions = {\n\t\t\t\tsetZoom: (...attr) => this.map.setZoom(...attr),\n\t\t\t\tgetZoom: () => this.map.getZoom(),\n\t\t\t\tgetCenter: () => this.map.getCenter(),\n\t\t\t\tgetBounds: () => this.map.getBounds(),\n\t\t\t\tzoomIn: () => this.map.zoomIn(),\n\t\t\t\tflyToBounds: (...attr) => this.map.flyToBounds(...attr),\n\t\t\t\tsetView: (...attr) => this.map.setView(...attr),\n\t\t\t\tpanBy: (...attr) => this.map.panBy(...attr),\n\t\t\t\tpanTo: (...attr) => this.map.panTo(...attr),\n\t\t\t\tflyTo: (...attr) => this.map.flyTo(...attr),\n\t\t\t\tinvalidateSize: (...attr) => this.map.invalidateSize(...attr),\n\t\t\t\tproject: (...attr) => this.map.project(...attr),\n\t\t\t\tunproject: (...attr) => this.map.unproject(...attr),\n\t\t\t\tlatLngToContainerPoint: (...attr) => this.map.latLngToContainerPoint(...attr),\n\n\t\t\t\tuseAsGeoChooser: (...attr) => this.useAsGeoChooser(...attr),\n\t\t\t}\n\t\t\tthis.props.globals.mainMapFunctions = functions\n\t\t\tthis.props.onFunctions(functions)\n\t\t}\n\n\t\twindow.addEventListener('updateMainMapView', this.setMapPos)\n\t}\n\tcomponentDidUpdate(){\n\t\tif (this.props.filters !== this.filters) {\n\t\t\tthis.filters = this.props.filters\n\t\t\tthis.filterMarkers(this.filters)\n\t\t}\n\t}\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener('updateMainMapView', this.setMapPos)\n\t\n\t\tif (this.markerQuerySubscription) {\n\t\t\tthis.markerQuerySubscription.unsubscribe()\n\t\t}\n\t}\n\n\tsetMapPos(event){\n\t\tthis.setState({center:this.props.globals.map_center})\n\t}\n\n\tuseAsGeoChooser(yesOrNo, middleMarkerDoc){\n\t\tif (yesOrNo) {\n\t\t\tthis.setState({\n\t\t\t\tisGeoChooser: true,\n\t\t\t\tmiddleMarkerDoc,\n\t\t\t})\n\t\t\tthis.hideAllMarkers()\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\tisGeoChooser: false,\n\t\t\t\tmiddleMarkerDoc: undefined,\n\t\t\t})\n\t\t\tthis.filterMarkers(this.filters)\n\t\t}\n\t}\n\n\tloadMarkers(){\n\t\tthis.markerQuerySubscription = this.props.globals.graphql.watchQuery({\n\t\t\tfetchPolicy: 'cache-and-network',\n\t\t\tquery: query_loadMarkers,\n\t\t\tvariables: {\n\t\t\t\tlanguages: navigator.languages,\n\t\t\t\t// wantedTags: ['min_age','max_age',...getWantedTagsList(presets)], // this gets us about 11% reduction in size\n\t\t\t},\n\t\t})\n\t\t.subscribe(({data}) => {\n\t\t\tif (!!data && !!data.getMarkers) {\n\t\t\t\tconst docs = data.getMarkers.map(doc=>{\n\t\t\t\t\tdoc.___preset = (\n\t\t\t\t\t\t!!doc.preset && !!presets[doc.preset]\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\tkey: doc.preset,\n\t\t\t\t\t\t\t...presets[doc.preset],\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: presets.default\n\t\t\t\t\t)\n\t\t\t\t\tdoc.___color = getColorByPreset(doc.___preset.key,colorsByPreset) || colors.default\n\n\t\t\t\t\treturn doc\n\t\t\t\t})\n\n\t\t\t\tthis.docs = docs\n\t\t\t\tthis.addMarkersToPruneCluster(docs)\n\t\t\t}\n\t\t})\n\t}\n\n\tgotMapRef(Map){\n\t\tif (!!Map && !!Map.leafletElement) {\n\t\t\tthis.mapRef = Map\n\t\t\tthis.map = Map.leafletElement\n\n\t\t\tthis.createPruneCluster()\n\t\t}\n\t}\n\n\tgetConicGradient(values){\n\t\tif (!(!!this.ConicGradient)) {\n\t\t\treturn ''\n\t\t}\n\n\t\tlet stops = []\n\n\t\tconst gapColor = 'transparent' // this.props.theme.palette.type === 'dark' ? '#181818' : 'white'\n\n\t\tif (values.length === 1) {\n\t\t\tstops = [values[0][0]+' 0']\n\t\t}else{\n\t\t\tlet counter = 0\n\t\t\tlet currentPos = 0\n\t\t\tfor (const pair of values) {\n\t\t\t\tcurrentPos += 5\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\tstops.push(gapColor+' '+currentPos+'deg')\n\t\t\t\t}else{\n\t\t\t\t\tstops.push(gapColor+' 0 '+currentPos+'deg')\n\t\t\t\t}\n\t\n\t\t\t\tif (counter === values.length-1) {\n\t\t\t\t\tstops.push(pair[0]+' 0')\n\t\t\t\t}else{\n\t\t\t\t\tcurrentPos += Math.ceil(pair[1]*360)\n\t\t\t\t\tstops.push(pair[0]+' 0 '+currentPos+'deg')\n\t\t\t\t}\n\n\t\t\t\tcounter += 1\n\t\t\t}\n\t\t}\n\t\tstops = stops.join(', ')\n\n\t\tvar gradient = new this.ConicGradient({\n\t\t    stops: stops, // \"gold 40%, #f06 0\", // required\n\t\t    repeating: false, // Default: false\n\t\t    size: 100, // Default: Math.max(innerWidth, innerHeight)\n\t\t})\n\n\t\treturn gradient\n\t}\n\n\tcreatePruneCluster(){\n\t\tthis.clusterGroup = new PruneClusterForLeaflet()\n\t\tthis.clusterGroup.Cluster.Size = this.defaultClusterSize\n\n\t\tthis.clusterGroup.BuildLeafletCluster = (cluster, position)=>{\n\t\t\tconst marker = new L.Marker(position, {\n\t\t\t\ticon: this.clusterGroup.BuildLeafletClusterIcon(cluster),\n\t\t\t})\n\t\t\n\t\t\tmarker.on('click', ()=>{\n\t\t\t\t// Compute the cluster bounds (it's slow : O(n))\n\t\t\t\tconst markersArea = this.clusterGroup.Cluster.FindMarkersInArea(cluster.bounds)\n\t\t\t\tconst clusterBounds = this.clusterGroup.Cluster.ComputeBounds(markersArea)\n\t\t\n\t\t\t\tif (clusterBounds) {\n\t\t\t\t\tconst corner1 = new L.LatLng(clusterBounds.minLat, clusterBounds.maxLng)\n\t\t\t\t\tconst corner2 = new L.LatLng(clusterBounds.maxLat, clusterBounds.minLng)\n\t\t\t\t\tconst bounds = new L.LatLngBounds(corner1, corner2)\n\t\t\t\t\tconst distance = corner1.distanceTo(corner2)\n\t\t\n\t\t\t\t\tconst zoomLevelBefore = this.clusterGroup._map.getZoom()\n\t\t\t\t\tconst zoomLevelAfter = this.clusterGroup._map.getBoundsZoom(bounds, false, new L.Point(20, 20, null))\n\t\t\n\t\t\t\t\t// If the zoom level doesn't change\n\t\t\t\t\tif (\n\t\t\t\t\t\tdistance < 3 // if distance is less than 3 meters\n\t\t\t\t\t\t|| zoomLevelAfter === zoomLevelBefore // or if the zoom level would't change\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Send an event for the LeafletSpiderfier\n\t\t\t\t\t\tthis.clusterGroup._map.fire('overlappingmarkers', {\n\t\t\t\t\t\t\tcluster: this.clusterGroup,\n\t\t\t\t\t\t\tmarkers: markersArea,\n\t\t\t\t\t\t\tcenter: marker.getLatLng(),\n\t\t\t\t\t\t\tmarker: marker,\n\t\t\t\t\t\t})\n\t\t\n\t\t\t\t\t\t// this.clusterGroup._map.flyTo(position, zoomLevelAfter, {\n\t\t\t\t\t\t// \tanimate: true,\n\t\t\t\t\t\t// \tduration: 0.75,\n\t\t\t\t\t\t// \tpaddingTopLeft: [(this.props.sidebarIsOpen ? 400 : 0), 64],\n\t\t\t\t\t\t// \tpaddingbottomRight: [0, 0]\n\t\t\t\t\t\t// })\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlet padding = 128\n\t\t\t\t\t\tif (this.props.globals.isSmallScreen) {\n\t\t\t\t\t\t\tpadding = 64\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.clusterGroup._map.flyToBounds(bounds, {\n\t\t\t\t\t\t\tanimate: true,\n\t\t\t\t\t\t\tduration: 0.75,\n\t\t\t\t\t\t\tpaddingTopLeft: [(this.props.sidebarIsOpen ? 400+padding : padding), padding],\n\t\t\t\t\t\t\tpaddingBottomRight: [padding, padding]\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\n\t\t\treturn marker\n\t\t}\n\n\n\t\tthis.clusterGroup.PrepareLeafletMarker = (leafletMarker, doc)=>{\n\t\t\tleafletMarker.setIcon(L.divIcon({\n\t\t\t\thtml: `\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"wrapper material-icons-round\"\n\t\t\t\t\t\tstyle=\"${\n\t\t\t\t\t\t\t// doc.___color.key !== 'default'\n\t\t\t\t\t\t\t// ?\n\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t--bg-color:${doc.___color.bg};\n\t\t\t\t\t\t\t\t--fg-color:${doc.___color.fg};\n\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t// : ''\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${doc.___preset.icon ? doc.___preset.icon.toLowerCase() : 'place'}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tclassName: 'marker-custom-icon',\n\t\t\t\ticonSize: L.point(40, 40, true),\n\t\t\t}))\n\t\t\t\n\t\t\tif (!!doc.name && doc.name.length > 0) {\n\t\t\t\tleafletMarker.bindTooltip(doc.name[0].text, {\n\t\t\t\t\tsticky: true,\n\t\t\t\t\tinteractive: false,\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tpermanent: false,\n\t\t\t\t})\n\t\t\t}\n\t\t\n\t\t\tleafletMarker.on('click', () => navigate(`/view/${doc._id}/`) )\n\t\t}\n\n\t\tthis.clusterGroup.BuildLeafletClusterIcon = cluster=>{\n\t\t\tconst colors = Object.entries(\n\t\t\t\tcluster.GetClusterMarkers()\n\t\t\t\t.filter(m => !!m.data.___color.key)\n\t\t\t\t.map(m => \n\t\t\t\t\t// m.data.___color.key === 'default'\n\t\t\t\t\t// ? 'transparent'\n\t\t\t\t\t// :\n\t\t\t\t\tm.data.___color.bg\n\t\t\t\t)\n\t\t\t\t.reduce((obj,preset_key)=>{\n\t\t\t\t\tif (!(!!obj[preset_key])) {\n\t\t\t\t\t\tobj[preset_key] = 0\n\t\t\t\t\t}\n\t\t\t\t\tobj[preset_key] += 1\n\t\t\t\t\treturn obj\n\t\t\t\t},{})\n\t\t\t).sort((a,b)=>a[1]-b[1])\n\t\n\t\t\tconst colors_sum = colors.reduce((sum,pair) => sum+pair[1], 0)\n\t\n\t\t\tconst gradient = this.getConicGradient(colors.map(pair=>{\n\t\t\t\treturn [pair[0] , pair[1]/colors_sum]\n\t\t\t}))\n\t\n\t\t\treturn L.divIcon({\n\t\t\t\thtml: `\n\t\t\t\t\t<div class=\"number\">${cluster.population}</div>\n\t\t\t\t\t<div class=\"pieChart\" style=\"background-image:url(${gradient.dataURL});\"></div>\n\t\t\t\t`,\n\t\t\t\tclassName: 'marker-cluster-custom-icon',\n\t\t\t\ticonSize: L.point(48, 48, true),\n\t\t\t})\n\t\t}\n\n\t\tthis.map.addLayer(this.clusterGroup)\n\t}\n\taddMarkersToPruneCluster(docs){\n\t\tthis.markers = []\n\t\tthis.clusterGroup.RemoveMarkers()\n\n\t\tfor (const doc of docs) {\n\t\t\tlet marker = new PruneCluster.Marker(doc.lat, doc.lng, doc)\n\t\t\tmarker.filtered = true\n\t\t\tthis.markers.push(marker)\n\t\t\tthis.clusterGroup.RegisterMarker(marker)\n\t\t}\n\n\t\tthis.clusterGroup.ProcessView()\n\t\tthis.map.invalidateSize(false)\n\n\t\tthis.filterMarkers(this.filters)\n\t}\n\n\thideAllMarkers(){\n\t\tconst markers_length = this.markers.length\n\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\tthis.markers[i].filtered = true\n\t\t}\n\t\tthis.clusterGroup.ProcessView()\n\t}\n\tshowAllMarkers(){\n\t\tconst markers_length = this.markers.length\n\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\tthis.markers[i].filtered = false\n\t\t}\n\t\tthis.clusterGroup.ProcessView()\n\t}\n\tfilterMarkers(filters){\n\t\tif (this.state.isGeoChooser) {\n\t\t\tthis.hideAllMarkers()\n\t\t} else if (!!this.filters) {\n\t\t\tconst ids = this.filters.ids || []\n\n\t\t\tconst presets = this.filters.presets || []\n\t\t\t// const presets = ['amenity/community_centre']\n\t\t\tconst presets_length = presets.length\n\n\t\t\tconst selectedAge = this.filters.selectedAge\n\t\t\tconst ageOption = this.filters.ageOption\n\t\t\tconst audienceQueerOptions = this.filters.audienceQueerOptions || []\n\t\t\tconst checkAudienceQueerOptions = audienceQueerOptions.length > 0\n\n\t\t\tif (presets_length > 0 || checkAudienceQueerOptions || !!selectedAge) {\n\t\t\t\tconst markers_length = this.markers.length\n\t\t\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\t\t\tconst marker = this.markers[i]\n\n\t\t\t\t\tif (ids.includes(marker.data._id)) {\n\t\t\t\t\t\tthis.markers[i].filtered = false\n\t\t\t\t\t}else{\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet isInPresets = true\n\t\t\t\t\t\tif (presets_length > 0) {\n\t\t\t\t\t\t\tisInPresets = presets.map(preset_key=>{\n\t\t\t\t\t\t\t\treturn marker.data.___preset.key.startsWith(preset_key)\n\t\t\t\t\t\t\t}).reduce((bool,value) => (value ? true : bool), false)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet matchesAudienceQueer = true\n\t\t\t\t\t\tif (checkAudienceQueerOptions) {\n\t\t\t\t\t\t\tif (!audienceQueerOptions.includes(marker.data.tags.audience_queer)) {\n\t\t\t\t\t\t\t\tmatchesAudienceQueer = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet isInAgeRange = true\n\t\t\t\t\t\tif (!!selectedAge) {\n\t\t\t\t\t\t\tisInAgeRange = false\n\t\t\t\t\t\t\tif (ageOption!=='open_end' && !!marker.data.tags.min_age && !!marker.data.tags.max_age) {\n\t\t\t\t\t\t\t\tconst parsedMin = Number.parseFloat(marker.data.tags.min_age)\n\t\t\t\t\t\t\t\tconst parsedMax = Number.parseFloat(marker.data.tags.max_age)\n\t\t\t\t\t\t\t\tisInAgeRange = (\n\t\t\t\t\t\t\t\t\t   (!Number.isNaN(parsedMin) && parsedMin <= selectedAge)\n\t\t\t\t\t\t\t\t\t&& (!Number.isNaN(parsedMax) && parsedMax >= selectedAge)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tif (!!marker.data.tags.min_age) {\n\t\t\t\t\t\t\t\t\tconst parsedMin = Number.parseFloat(marker.data.tags.min_age)\n\t\t\t\t\t\t\t\t\tisInAgeRange = (!Number.isNaN(parsedMin) && parsedMin <= selectedAge)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (isInAgeRange && !!marker.data.tags.max_age){\n\t\t\t\t\t\t\t\t\tconst parsedMax = Number.parseFloat(marker.data.tags.max_age)\n\t\t\t\t\t\t\t\t\tisInAgeRange = (!Number.isNaN(parsedMax) && parsedMax >= selectedAge)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.markers[i].filtered = !(isInPresets && matchesAudienceQueer && isInAgeRange)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.clusterGroup.ProcessView()\n\t\t\t}else{\n\t\t\t\tthis.showAllMarkers()\n\t\t\t}\n\t\t}else{\n\t\t\tthis.showAllMarkers()\n\t\t}\n\t}\n\n\t// getMaxClusterRadius(zoomLevel){\n\t// \tif (zoomLevel<5) {\n\t// \t\treturn 80\n\t// \t} else if (zoomLevel<6) {\n\t// \t\treturn 120\n\t// \t}  else if (zoomLevel<9) {\n\t// \t\treturn 100\n\t// \t} else if (zoomLevel<11) {\n\t// \t\treturn 80\n\t// \t} else if (zoomLevel<16) {\n\t// \t\treturn 60\n\t// \t} else if (zoomLevel<22) {\n\t// \t\treturn 20\n\t// \t}\n\t//\n\t// \treturn 80\n\t// }\n\n\tviewportChanged(viewport){\n\t\tif (viewport.center && viewport.zoom) {\n\t\t\tif (this.props.sidebarIsOpen) { // TODO this.props.sidebarIsOpen isn't enough on small screens\n\t\t\t\tthis.props.globals.map_center = Object.values(this.map.unproject(this.map.project(viewport.center).add([200,0])) ) // map center with sidebar offset\n\t\t\t}else{\n\t\t\t\tthis.props.globals.map_center = viewport.center\n\t\t\t}\n\t\n\t\t\tthis.props.globals.map_zoom = viewport.zoom\n\t\t\twindow.dispatchEvent(new Event('mapViewportUpdated'))\n\t\n\t\t\tif (viewport.zoom >= 18) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 10\n\t\t\t} else if (viewport.zoom >= 16) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 20\n\t\t\t} else if (viewport.zoom >= 14) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 60\n\t\t\t} else if (viewport.zoom >= 8) {\n\t\t\t\tthis.clusterGroup.Cluster.Size = 80\n\t\t\t} else {\n\t\t\t\tthis.clusterGroup.Cluster.Size = this.defaultClusterSize\n\t\t\t}\n\n\t\t\tthis.props.store.set('map_center_fake', this.props.globals.map_center)\n\t\t\tthis.props.store.set('map_center_real', viewport.center)\n\t\t\tthis.props.store.set('map_zoom', this.props.globals.map_zoom)\n\t\t}\n\t}\n\n\tzoomIn(){\n\t\tthis.map.setZoom(this.map.getZoom()+1)\n\t}\n\tzoomOut(){\n\t\tthis.map.setZoom(this.map.getZoom()-1)\n\t}\n\n\trender() {\n\t\t// <ZoomControl position=\"bottomright\" />\n\n\t\treturn (<div className={`${this.props.className} ${this.props.mapIsResizing ? 'mapIsResizing' : ''} ${this.props.sidebarIsOpen ? 'sidebarIsOpen' : ''}`}>\t\t\t\t\t\t\n\t\t\t<div className={`markerInTheMiddel rainbow ${this.state.isGeoChooser ? 'visible' : 'hidden'}`}>\n\t\t\t\t<div className=\"leaflet-marker-icon marker-custom-icon\">\n\t\t\t\t\t{\n\t\t\t\t\t\t!!this.state.middleMarkerDoc &&\n\t\t\t\t\t\t!!this.state.middleMarkerDoc.___color &&\n\t\t\t\t\t\t!!this.state.middleMarkerDoc.___color.bg &&\n\t\t\t\t\t\t!!this.state.middleMarkerDoc.___color.fg &&\n\t\t\t\t\t\t!!this.state.middleMarkerDoc.___preset\n\t\t\t\t\t\t? <div className=\"wrapper material-icons-round\" style={{'--bg-color':this.state.middleMarkerDoc.___color.bg,'--fg-color':this.state.middleMarkerDoc.___color.fg}}>{this.state.middleMarkerDoc.___preset.icon ? this.state.middleMarkerDoc.___preset.icon.toLowerCase() : 'not_listed_location'}</div>\n\t\t\t\t\t\t: <div className=\"wrapper material-icons-round\">not_listed_location</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div style={{\n\t\t\t\tposition: 'fixed',\n\t\t\t\tzIndex: '99999999',\n\t\t\t\tbottom: '28px',\n\t\t\t\tright: '4px',\n\t\t\t\t// margin: '0 8px 8px 0',\n\t\t\t\tpointerEvents: 'none',\n\t\t\t}}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={this.props.getString('zoom_in_aria_label')}\n\t\t\t\t\ttitle={this.props.getString('zoom_in_aria_label')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpointerEvents: 'auto',\n\t\t\t\t\t\tpadding: '0',\n\t\t\t\t\t\twidth: '32px',\n\t\t\t\t\t\theight: '32px',\n\t\t\t\t\t\tminHeight: '32px',\n\t\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\t\t// borderBottomRightRadius: '2px',\n\t\t\t\t\t\t// borderBottomLeftRadius: '2px',\n\t\t\t\t\t\tmarginBottom: '4px',\n\t\t\t\t\t}}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tonClick={this.zoomIn}\n\t\t\t\t>\n\t\t\t\t\t<ZoomInIcon />\n\t\t\t\t</Fab>\n\t\t\t\t<br />\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={this.props.getString('zoom_out_aria_label')}\n\t\t\t\t\ttitle={this.props.getString('zoom_out_aria_label')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpointerEvents: 'auto',\n\t\t\t\t\t\tpadding: '0',\n\t\t\t\t\t\twidth: '32px',\n\t\t\t\t\t\theight: '32px',\n\t\t\t\t\t\tminHeight: '32px',\n\t\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\t\t// borderTopLeftRadius: '2px',\n\t\t\t\t\t\t// borderTopRightRadius: '2px',\n\t\t\t\t\t}}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tonClick={this.zoomOut}\n\t\t\t\t>\n\t\t\t\t\t<ZoomOutIcon />\n\t\t\t\t</Fab>\n\t\t\t</div>\n\n\t\t\t<Map\n\t\t\t\tref={this.gotMapRef}\n\t\t\t\tclassName=\"map\"\n\n\t\t\t\tonViewportChanged={this.viewportChanged}\n\n\t\t\t\tpreferCanvas={true}\n\t\t\t\tuseFlyTo={true}\n\t\t\t\tcenter={this.props.store.get('map_center_real') || [51,10]}\n\t\t\t\tminZoom={2}\n\t\t\t\tzoom={this.props.store.get('map_zoom') || 3}\n\t\t\t\tmaxZoom={22}\n\t\t\t\tzoomSnap={1}\n\t\t\t\tzoomControl={false}\n\n\t\t\t\tfadeAnimation={false}\n\n\t\t\t\tworldCopyJump={true}\n\t\t\t\tmaxBoundsViscosity={1.0}\n\n\t\t\t\tmaxBounds={[[-180,99999],[180,-99999]]}\n\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: (\n\t\t\t\t\t\tthis.props.theme.palette.type === 'dark'\n\t\t\t\t\t\t? this.props.theme.palette.background.default\n\t\t\t\t\t\t: '#ebe7e1'\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tthis.props.theme.palette.type === 'light'\n\t\t\t\t\t? (\n\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\tkey=\"tilelayer_international_lables_light\"\n\t\t\t\t\t\t\tdetectRetina={false}\n\t\t\t\t\t\t\ttileSize={512}\n\t\t\t\t\t\t\tzoomOffset={-1}\n\t\t\t\t\t\t\tattribution={`\n\t\t\t\t\t\t\t\t<a href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\"> Mapbox</a>\n\t\t\t\t\t\t\t\t<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\"> OpenStreetMap</a>\n\t\t\t\t\t\t\t\t| <a href=\"https://www.mapbox.com/map-feedback/\" target=\"_blank\" rel=\"noreferrer\">${this.props.getString('improve_this_map')}</a>\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/qiekub/ck8aum3p70aa51in4ikxao8ii/tiles/512/{z}/{x}/{y}{r}?access_token=pk.eyJ1IjoicWlla3ViIiwiYSI6ImNrOGF1ZGlpdzA1dDgzamx2ajNua3picmMifQ.OYr_o4fX7vPTvZCWZsUs4g\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t\t: (\n\t\t\t\t\t\t<TileLayer\n\t\t\t\t\t\t\tkey=\"tilelayer_international_lables_dark\"\n\t\t\t\t\t\t\tdetectRetina={false}\n\t\t\t\t\t\t\ttileSize={512}\n\t\t\t\t\t\t\tzoomOffset={-1}\n\t\t\t\t\t\t\tattribution={`\n\t\t\t\t\t\t\t\t<a href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\"> Mapbox</a>\n\t\t\t\t\t\t\t\t<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\"> OpenStreetMap</a>\n\t\t\t\t\t\t\t\t| <a href=\"https://www.mapbox.com/map-feedback/\" target=\"_blank\" rel=\"noreferrer\">${this.props.getString('improve_this_map')}</a>\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/qiekub/ck8ozalln0c1g1iog1mpl8aps/tiles/512/{z}/{x}/{y}{r}?access_token=pk.eyJ1IjoicWlla3ViIiwiYSI6ImNrOGF1ZGlpdzA1dDgzamx2ajNua3picmMifQ.OYr_o4fX7vPTvZCWZsUs4g\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_english_labels\"\n\t\t\t\t\tdetectRetina={false}\n\t\t\t\t\tattribution='<a href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\">&copy; MapBox</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">&copy; OpenStreetMap contributors</a>'\n\t\t\t\t\turl={\"https://api.mapbox.com/styles/v1/petacat/ck7h7qgtg4c4b1ikiifin5it7/tiles/256/{z}/{x}/{y}{r}?access_token=pk.eyJ1IjoicGV0YWNhdCIsImEiOiJjaWl0MGpqOHEwM2VhdTZrbmhsNG96MjFrIn0.Uhlmj9xPIaPK_3fLUm4nIw\"}\n\t\t\t\t/>*/}\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_stamen_watercolor\"\n\t\t\t\t\tmaxZoom={19}\n\t\t\t\t\tdetectRetina={window.devicePixelRatio > 1}\n\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors'\n\t\t\t\t\turl=\"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png\"\n\t\t\t\t/>*/}\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_openstreetmap\"\n\t\t\t\t\tmaxZoom={19}\n\t\t\t\t\tdetectRetina={window.devicePixelRatio > 1}\n\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors'\n\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\t\t\t\t/>*/}\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_CartoDB_Voyager\"\n\t\t\t\t\tmaxZoom={19}\n\t\t\t\t\tsubdomains=\"abcd\"\n\t\t\t\t\tdetectRetina={false}\n\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\" target=\"_blank\" rel=\"noreferrer\">CARTO</a>'\n\t\t\t\t\turl=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\n\t\t\t\t/>*/}\n\t\t\t</Map>\n\t\t</div>)\n\t}\n}\n\nexport default withConicGradient(withGlobals(withLocalization(withTheme(MainMap))))\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M70.827,4.583c-37.499,0 -67.91,30.412 -67.91,67.929c0,30.011 19.458,55.469 46.446,64.451c3.398,0.625 4.637,-1.472 4.637,-3.273c0,-1.614 -0.059,-5.884 -0.092,-11.551c-18.892,4.103 -22.877,-9.107 -22.877,-9.107c-3.09,-7.848 -7.543,-9.937 -7.543,-9.937c-6.166,-4.212 0.467,-4.129 0.467,-4.129c6.817,0.48 10.403,7.002 10.403,7.002c6.058,10.379 15.897,7.38 19.767,5.642c0.617,-4.387 2.372,-7.381 4.311,-9.078c-15.081,-1.714 -30.937,-7.544 -30.937,-33.573c0,-7.414 2.648,-13.481 6.992,-18.227c-0.7,-1.718 -3.031,-8.627 0.667,-17.976c0,0 5.7,-1.827 18.675,6.963c5.416,-1.509 11.228,-2.26 17.002,-2.289c5.771,0.029 11.579,0.78 17.003,2.289c12.967,-8.79 18.658,-6.963 18.658,-6.963c3.706,9.349 1.376,16.258 0.679,17.976c4.353,4.746 6.98,10.813 6.98,18.227c0,26.096 -15.881,31.838 -31.007,33.518c2.434,2.098 4.607,6.243 4.607,12.577c0,9.082 -0.084,16.409 -0.084,18.636c0,1.818 1.226,3.932 4.67,3.269c26.967,-9.003 46.409,-34.444 46.409,-64.447c0,-37.517 -30.411,-67.929 -67.923,-67.929Z\"\n});\n\nvar SvgGithubMarkBlack = function SvgGithubMarkBlack(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 142 142\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 2\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgGithubMarkBlack, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/github_mark_black.73a42174.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\n// import './index.css'\n\nimport { withLocalization, Localized } from '../Localized/'\n\nimport {\n\tButton,\n\tLink,\n\t// Icon,\n\n\tList,\n\tListItem,\n\t// ListItemIcon,\n\tListItemText,\n\t// Divider,\n} from '@material-ui/core'\n\nimport {\n\t// HistoryRounded as HistoryIcon,\n\t// ContactSupportRounded as ContactSupportIcon,\n\t// FullscreenRounded as FullscreenIcon,\n\t// FullscreenExitRounded as FullscreenExitIcon,\n} from '@material-ui/icons'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport buymeacoffee_green from '../../images/buymeacoffee_green.png'\nimport {ReactComponent as GithubIcon} from '../../images/github_mark_black.svg'\n\nconst ListItemLink = props => <ListItem button component=\"a\" {...props} />\n\nclass MainDrawerContent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\twindowIsFullscreen: false,\n\t\t}\n\n\t\tthis.toogleFullscreen = this.toogleFullscreen.bind(this)\n\t}\n\n\ttoogleFullscreen(){\n\t\tif (document.fullscreenEnabled) {\n\t\t\tif (document.fullscreenElement === null) {\n\t\t\t\tdocument.querySelector('body').requestFullscreen().then(()=>{\n\t\t\t\t\tthis.setState({windowIsFullscreen:true})\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tdocument.exitFullscreen().then(()=>{\n\t\t\t\t\tthis.setState({windowIsFullscreen:false})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (<>\n\t\t\t<List>\n\t\t\t\t<ListItemLink target=\"_blank\" href=\"https://www.qiekub.org/impressum.html\" aria-label={this.props.getString('imprint')} title={this.props.getString('imprint')}>\n\t\t\t\t\t<ListItemText primary={this.props.getString('imprint')} />\n\t\t\t\t</ListItemLink>\n\t\t\t\t<ListItemLink target=\"_blank\" href=\"https://www.qiekub.org/datenschutz.html\" aria-label={this.props.getString('privacy_policy')} title={this.props.getString('privacy_policy')}>\n\t\t\t\t\t<ListItemText primary={this.props.getString('privacy_policy')} />\n\t\t\t\t</ListItemLink>\n\t\t\t\t<ListItemLink href=\"mailto:thomas.rosen@qiekub.org\" aria-label={this.props.getString('contact')} title={this.props.getString('contact')}>\n\t\t\t\t\t<ListItemText primary={this.props.getString('contact')} />\n\t\t\t\t</ListItemLink>\n\t\t\t</List>\n\t\t\t\t<Link target=\"_blank\" href=\"https://github.com/qiekub\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={this.props.getString('github_button')}\n\t\t\t\t\t\ttitle={this.props.getString('github_button')}\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t\t<GithubIcon style={{\n\t\t\t\t\t\t\t\tfill: 'black',\n\t\t\t\t\t\t\t\tmarginLeft: '0px',\n\t\t\t\t\t\t\t\twidth: '1em',\n\t\t\t\t\t\t\t\theight: '1em',\n\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmargin: '0 16px',\n\t\t\t\t\t\t\twidth: 'calc(100% - 32px)',\n\t\t\t\t\t\t\ttextAlign: 'left',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"github_button\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Link>\n\n\t\t\t{/*<Divider />\n\t\t\t<List>\n\t\t\t\t{document.fullscreenEnabled ? (<ListItem button onClick={this.toogleFullscreen}>\n\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t{this.state.windowIsFullscreen ? <FullscreenExitIcon style={{color:'black'}} /> : <FullscreenIcon style={{color:'black'}} />}\n\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t<ListItemText primary={this.state.windowIsFullscreen ? 'Exit Fullscreen' : 'Enter Fullscreen'} />\n\t\t\t\t</ListItem>) : null}\n\t\t\t</List>*/}\n\n\t\t\t<a\n\t\t\t\taria-label=\"Buy me a coffee\"\n\t\t\t\ttitle=\"Buy me a coffee\"\n\t\t\t\thref=\"https://www.buymeacoffee.com/thomasrosen\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\tstyle={{\n\t\t\t\t\tmargin: '16px',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<img src={buymeacoffee_green} alt=\"Buy Me A Coffee\" style={{\n\t\t\t\t\twidth: '200px',\n\t\t\t\t\tborderRadius: '8px',\n\t\t\t\t\tboxShadow: this.props.theme.shadows[3],\n\t\t\t\t}} />\n\t\t\t</a>\n\t\t</>)\n\t}\n}\n\nexport default withLocalization(withTheme(MainDrawerContent))\n\n\n","import React from 'react'\nimport './index.css'\n\nimport { Localized, withLocalization } from '../Localized/'\nimport { navigate } from '@reach/router'\nimport { withGlobals } from '../Globals/'\nimport { search as query_search } from '../../queries.js'\n\n// import categories from '../../data/dist/categories.json'\nimport presets from '../../data/dist/presets.json'\nimport colors from '../../data/dist/colors.json'\nimport colorsByPreset from '../../data/dist/colorsByPreset.json'\nimport { getTranslationFromArray, getColorByPreset } from '../../functions.js'\n\nimport {\n\tIcon,\n\tPaper,\n\tInputBase,\n\tIconButton,\n\tDrawer,\n\n\tList,\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\tListSubheader,\n\n\tCardActions,\n\tButton,\n\tTypography,\n\tLink,\n} from '@material-ui/core'\n\nimport {\n\t// SearchRounded as SearchIcon,\n\tHourglassEmptyRounded as HourglassEmptyIcon,\n\tCloseRounded as CloseIcon,\n\tArrowBackRounded as ArrowBackIcon,\n\tMenuRounded as MenuIcon,\n} from '@material-ui/icons'\n\nimport MainDrawerContent from '../MainDrawerContent/'\n\nclass SearchBar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tvalue: '',\n\t\t\tloadingSearchResult: false,\n\t\t\tisMainDrawerOpen: false,\n\t\t\tsearchResults_poi: [],\n\t\t\tsearchResults_address: [],\n\t\t\tshowSearchResults: false,\n\t\t\tshowWebsiteIntro: true,\n\t\t}\n\n\t\tthis.searchInputRef = React.createRef()\n\n\t\tthis.submitTheSearchQuery = this.submitTheSearchQuery.bind(this)\n\t\tthis.saveSearchQueryText = this.saveSearchQueryText.bind(this)\n\t\tthis.searchKeypressed = this.searchKeypressed.bind(this)\n\t\tthis.closeSidebar = this.closeSidebar.bind(this)\n\t\tthis.toggleMainDrawer = this.toggleMainDrawer.bind(this)\n\n\t\tthis.loadSearchResults = this.loadSearchResults.bind(this)\n\t\tthis.openSearchResult = this.openSearchResult.bind(this)\n\n\t\tthis.acceptEssentialPrivacyAndCloseIntro = this.acceptEssentialPrivacyAndCloseIntro.bind(this)\n\t\tthis.hideSearchResults = this.hideSearchResults.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.value !== this.state.value) {\n\t\t\tthis.setState({value: this.props.value})\n\t\t}\n\n\t\tconst privacy_consent_essentials = this.props.store.getPrivacy(null)\n\t\tconst showWebsiteIntro = this.props.store.get('showWebsiteIntro')\n\t\tif (privacy_consent_essentials && !showWebsiteIntro) {\n\t\t\tthis.setState({showWebsiteIntro: false})\n\t\t}\n\t}\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tif (\n\t\t\tthis.props.value !== prevProps.value &&\n\t\t\tthis.props.value !== this.state.value\n\t\t) {\n\t\t\tthis.setState({value: this.props.value})\n\t\t}\n\t}\n\tsaveSearchQueryText(event){\n\t\tthis.setState({value: event.target.value}, ()=>{\n\t\t\tthis.loadSearchResults(this.state.value)\n\t\t})\n\t}\n\n\topenSearchResult(searchResult){\n\t\tthis.setState({showSearchResults: false})\n\n\t\tif (!!searchResult.placeID) {\n\t\t\tnavigate(`/view/${searchResult.placeID}/`)\n\t\t}\n\n\t\tif (!!searchResult.geometry.boundingbox) {\n\t\t\tthis.props.globals.mainMapFunctions.flyToBounds([\n\t\t\t\t[\n\t\t\t\t\tsearchResult.geometry.boundingbox.southwest.lat,\n\t\t\t\t\tsearchResult.geometry.boundingbox.southwest.lng,\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tsearchResult.geometry.boundingbox.northeast.lat,\n\t\t\t\t\tsearchResult.geometry.boundingbox.northeast.lng,\n\t\t\t\t]\n\t\t\t], {\n\t\t\t\tanimate: true,\n\t\t\t\tduration: 1.5,\n\t\t\t})\n\t\t\t\n\t\t\t// this.props.globals.mainMapFunctions.setBounds([\n\t\t\t// \t[result.data.geocode.boundingbox[0], result.data.geocode.boundingbox[2]],\n\t\t\t// \t[result.data.geocode.boundingbox[1], result.data.geocode.boundingbox[3]]\n\t\t\t// ])\n\t\t}else if (!!searchResult.geometry.location) {\n\t\t\tconst location = searchResult.geometry.location\n\n\t\t\tlet zoomLevel = this.props.globals.mainMapFunctions.getZoom()\n\t\t\tif (zoomLevel < 17) {\n\t\t\t\tzoomLevel = 17\n\t\t\t}\n\n\t\t\tthis.props.globals.mainMapFunctions.flyTo(\n\t\t\t\t(\n\t\t\t\t\tthis.props.globals.isSmallScreen\n\t\t\t\t\t? location\n\t\t\t\t\t: this.props.globals.mainMapFunctions.unproject( this.props.globals.mainMapFunctions.project(location,zoomLevel).add([-200,0]), zoomLevel) // add sidebar offset\n\t\t\t\t),\n\t\t\t\tzoomLevel,\n\t\t\t\t{\n\t\t\t\t\tanimate: true,\n\t\t\t\t\tduration: 1.5,\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t}\n\n\tloadSearchResults(queryString){\n\t\tif (queryString && queryString !== '' && queryString.length > 1 && /\\S/.test(queryString)) {\n\t\t\tthis.props.globals.graphql.query({\n\t\t\t\t// fetchPolicy: 'no-cache',\n\t\t\t\tquery: query_search,\n\t\t\t\tvariables: {\n\t\t\t\t\tquery: queryString,\n\t\t\t\t\tlanguages: navigator.languages,\n\t\t\t\t},\n\t\t\t}).then(async result => {\n\t\t\t\tif (result.data.search.query === this.state.value) {\n\t\t\t\t\tconst searchResults = result.data.search.results.map(result => {\n\t\t\t\t\t\tconst preset = result.preset\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\tname_translated: getTranslationFromArray(result.name, this.props.globals.userLocales),\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t___preset: (\n\t\t\t\t\t\t\t\t!!preset && !!presets[preset]\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tkey: preset,\n\t\t\t\t\t\t\t\t\t...presets[preset],\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t: presets.default\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t___color: (!!preset ? getColorByPreset(preset,colorsByPreset) : colors.default),\n\t\n\t\t\t\t\t\t\tkey: JSON.stringify(result),\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\n\t\t\t\t\tconst searchResults_poi = searchResults.filter(result => result.preset !== 'address')\n\t\t\t\t\tconst searchResults_address = searchResults.filter(result => result.preset === 'address')\n\t\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tshowSearchResults: true,\n\t\t\t\t\t\tloadingSearchResult: false,\n\t\t\t\t\t\tsearchResults_poi,\n\t\t\t\t\t\tsearchResults_address,\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error('The search was too slow!')\n\t\t\t\t}\n\t\t\t}).catch(error=>{\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowSearchResults: false,\n\t\t\t\t\tloadingSearchResult: false,\n\t\t\t\t\tsearchResults_poi: [],\n\t\t\t\t\tsearchResults_address: [],\n\t\t\t\t})\n\t\t\t\tconsole.error(error)\n\t\t\t})\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\tshowSearchResults: false,\n\t\t\t\tloadingSearchResult: false,\n\t\t\t\tsearchResults_poi: [],\n\t\t\t\tsearchResults_address: [],\n\t\t\t})\n\t\t}\n\t}\n\n\tsubmitTheSearchQuery(){\n\t\tif (this.props.onStartSearch) {\n\t\t\tthis.searchInputRef.current.blur() // unfocus the input element\n\t\t\tthis.setState({loadingSearchResult: true}, ()=>{\n\t\t\t\tthis.loadSearchResults(this.state.value)\n\t\t\t})\n\t\t}\n\t}\n\tsearchKeypressed(event){\n\t\tif (event.key === 'Enter') {\n\t\t\tthis.submitTheSearchQuery()\n\t\t}\n\t}\n\n\tasync closeSidebar(){\n\t\tawait navigate(`/`)\n\n\t\tif (this.props.onDontFilterTheseIds) {\n\t\t\tthis.props.onDontFilterTheseIds([])\n\t\t}\n\n\t\tthis.setState({value: ''}, ()=>{\n\t\t\tif (this.props.onSetSidebarIsOpen) {\n\t\t\t\tthis.props.onSetSidebarIsOpen(false)\n\t\t\t}\n\t\t\tif (this.props.onSetSearchBarValue) {\n\t\t\t\tthis.props.onSetSearchBarValue('')\n\t\t\t}\n\t\t})\n\t}\n\n\ttoggleMainDrawer(){\n\t\tthis.setState((state,props)=>{\n\t\t\treturn {isMainDrawerOpen:!state.isMainDrawerOpen}\n\t\t})\n\t}\n\n\tacceptEssentialPrivacyAndCloseIntro(){\n\t\tthis.props.store.setPrivacy(null, true).finally(()=>{\n\t\t\tthis.props.store.set('showWebsiteIntro', false)\n\t\t\tthis.setState({showWebsiteIntro: false})\n\t\t})\n\t}\n\n\thideSearchResults(){\n\t\tthis.setState({showSearchResults: false})\n\t}\n\n\trender() {\n\t\tlet leftIcon = undefined\n\t\tif (this.state.showSearchResults) {\n\t\t\tleftIcon = (\n\t\t\t\t<IconButton edge=\"end\" style={{margin:'4px',padding:'10px'}} onClick={this.hideSearchResults} aria-label={this.props.getString('close_search_results_aria_label')} title={this.props.getString('close_search_results_aria_label')}>\n\t\t\t\t\t<ArrowBackIcon />\n\t\t\t\t</IconButton>\n\t\t\t)\n\t\t} else {\n\t\t\tleftIcon = (\n\t\t\t\t<IconButton edge=\"end\" style={{margin:'4px',padding:'10px'}} onClick={this.toggleMainDrawer} aria-label={this.props.getString('open_menu_aria_label')} title={this.props.getString('open_menu_aria_label')}>\n\t\t\t\t\t<MenuIcon />\n\t\t\t\t</IconButton>\n\t\t\t)\n\t\t}\n\n\n\t\tlet rightIcon = undefined\n\t\tif (this.props.sidebarIsOpen) {\n\t\t\trightIcon = (\n\t\t\t\t<IconButton style={{margin:'4px',padding:'10px'}} onClick={this.closeSidebar} aria-label={this.props.getString('close_sidebar_aria_label')} title={this.props.getString('close_sidebar_aria_label')}>\n\t\t\t\t\t<CloseIcon />\n\t\t\t\t</IconButton>\n\t\t\t)\n\t\t} else if (this.state.loadingSearchResult) {\n\t\t\trightIcon = (\n\t\t\t\t<Icon style={{margin:'4px',padding:'10px'}}>\n\t\t\t\t\t<HourglassEmptyIcon />\n\t\t\t\t</Icon>\n\t\t\t)\n\t\t}\n\n\t\treturn (<div className={this.props.className}>\n\t\t\t<Drawer\n\t\t\t\topen={this.state.isMainDrawerOpen}\n\t\t\t\tonClose={this.toggleMainDrawer}\n\t\t\t>\n\t\t\t\t<MainDrawerContent />\n\t\t\t</Drawer>\n\n\t\t\t<Paper\n\t\t\t\tclassName={\n\t\t\t\t\t'header '\n\t\t\t\t\t+(this.props.sidebarIsOpen ? 'sidebarIsOpen' : '')\n\t\t\t\t\t+(this.state.showSearchResults && (this.state.searchResults_poi.length > 0 || this.state.searchResults_address.length > 0) ? 'showingSearchResults' : '')\n\t\t\t\t\t+(!this.state.showSearchResults && this.state.showWebsiteIntro ? 'showingWebsiteIntro' : '')\n\t\t\t\t}\n\t\t\t\televation={(this.props.sidebarIsOpen ? 6 : 6)}\n\t\t\t\tvariant=\"elevation\"\n\t\t\t>\n\t\t\t\t<div className=\"searchBar\">\n\t\t\t\t\t{leftIcon}\n\t\t\t\t\t<InputBase\n\t\t\t\t\t\tclassName=\"searchInput\"\n\t\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\t\tplaceholder={this.props.getString('search-for-queerness')}\n\t\t\t\t\t\tonFocus={this.saveSearchQueryText}\n\n\t\t\t\t\t\tonChange={this.saveSearchQueryText}\n\t\t\t\t\t\tonKeyPress={this.searchKeypressed}\n\n\t\t\t\t\t\tdisabled={this.props.sidebarIsOpen}\n\n\t\t\t\t\t\tinputRef={this.searchInputRef}\n\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\ttitle: this.props.getString('search-for-queerness'),\n\t\t\t\t\t\t\t'aria-label': this.props.getString('search-for-queerness')\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{rightIcon}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"scrollWrapper searchResults\">\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.searchResults_poi.length === 0\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\tsubheader={\n\t\t\t\t\t\t\t\t\t<ListSubheader disableSticky>\n\t\t\t\t\t\t\t\t\t\t<Localized id=\"places_listheading\" />\n\t\t\t\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.searchResults_poi.map(result => {\n\t\t\t\t\t\t\t\t\treturn (<ListItem\n\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\talignItems={\n\t\t\t\t\t\t\t\t\t\t\t\tresult.name_translated !== '' && result.address !== ''\n\t\t\t\t\t\t\t\t\t\t\t\t? 'flex-start'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'center'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tkey={result.key}\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this.openSearchResult(result)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"material-icons-round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___preset.icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? result.___color.bg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: result.___color.fg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___preset.icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: result.___color.bg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: '100%',\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '40px',\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '40px',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>{result.___preset.icon}</div>\n\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={result.name_translated} secondary={result.address}/>\n\t\t\t\t\t\t\t\t\t</ListItem>)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.searchResults_address.length === 0\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\tsubheader={\n\t\t\t\t\t\t\t\t\t<ListSubheader disableSticky>\n\t\t\t\t\t\t\t\t\t\t<Localized id=\"addresses_listheading\" />\n\t\t\t\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.searchResults_address.map(result => {\n\t\t\t\t\t\t\t\t\treturn (<ListItem\n\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\talignItems={\n\t\t\t\t\t\t\t\t\t\t\t\tresult.name_translated !== '' && result.address !== ''\n\t\t\t\t\t\t\t\t\t\t\t\t? 'flex-start'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'center'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tkey={result.key}\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this.openSearchResult(result)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"material-icons-round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___preset.icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? result.___color.bg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: result.___color.fg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___preset.icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.___color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: result.___color.bg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: '100%',\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '40px',\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '40px',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>{result.___preset.icon}</div>\n\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={result.name_translated} secondary={result.address}/>\n\t\t\t\t\t\t\t\t\t</ListItem>)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"scrollWrapper websiteIntro\">\n\t\t\t\t\t<List>\n\t\t\t\t\t\t<ListItem alignItems=\"flex-start\">\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<div className=\"emojiIcon\">{this.props.getString('welcome_emoji_icon')}</div>\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tprimary={this.props.getString('welcome_heading')}\n\t\t\t\t\t\t\t\tsecondary={this.props.getString('project-summary')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t\t<ListItem alignItems=\"flex-start\">\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<div className=\"emojiIcon\">{this.props.getString('thanks_emoji_icon')}</div>\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tprimary={this.props.getString('thanks_heading')}\n\t\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t\t<Localized\n\t\t\t\t\t\t\t\t\t\tid=\"thanks_text\"\n\t\t\t\t\t\t\t\t\t\telems={{\n\t\t\t\t\t\t\t\t\t\t\tmapbox_link: <Link href=\"https://www.mapbox.com/community/\" target=\"_blank\" rel=\"noreferrer\"></Link>,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t\t<ListItem alignItems=\"flex-start\">\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<div className=\"emojiIcon\">{this.props.getString('privacy_emoji_icon')}</div>\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tprimary={this.props.getString('privacy_essential_data_heading')}\n\t\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t\t<Localized\n\t\t\t\t\t\t\t\t\t\tid=\"privacy_essential_data_info\"\n\t\t\t\t\t\t\t\t\t\telems={{\n\t\t\t\t\t\t\t\t\t\t\tp: <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom />,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsecondaryTypographyProps={{\n\t\t\t\t\t\t\t\t\tcomponent: 'div',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</List>\n\t\t\t\t\t<CardActions style={{justifyContent: 'flex-end'}}>\n\t\t\t\t\t\t<Button onClick={this.acceptEssentialPrivacyAndCloseIntro}>\n\t\t\t\t\t\t\t<Localized id=\"okay-button\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</CardActions>\n\t\t\t\t</div>\n\t\t\t</Paper>\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withLocalization(SearchBar))\n\n\n\n/*\n\t<Card>\n\tStart Info:\n\n\tWhere can I meet queer people in my town?\n\tWhere is the next queer-youth-center?\n\t\n\tHelp us answer these questions!\n\n\tAdd queer-infos about places around you.\n\n\t-----\n\n\tInfo about who supports the project or which services/libraries/tools are used:\n\tMapbox, OSM, Overpass, GitHub, Firebase\n\t</Card>\n*/\n\n\n","import React from 'react'\n// import './index.css'\n\nimport {\n\tisGeoCoordinateLegal as query_isGeoCoordinateLegal,\n} from '../../queries.js'\n\nimport {\n\tTypography,\n} from '@material-ui/core'\n// import {\n// \tAddRounded as AddIcon,\n// } from '@material-ui/icons'\n\nimport { Localized/*, withLocalization*/ } from '../Localized/'\n\nimport { withGlobals } from '../Globals/'\n\nclass GeoInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tmap_center: this.props.globals.map_center || {lng:NaN,lat:NaN},\n\t\t\tisLegal: true,\n\t\t}\n\n\t\tthis.initialMapViewport = undefined\n\t\tthis.usedMarker = undefined\n\n\t\tthis.setStateGeoPos = this.setStateGeoPos.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener('mapViewportUpdated', this.setStateGeoPos)\n\n\t\tif (this.usedMarker !== this.props.marker) {\n\t\t\tthis.markerChanged(this.props.marker)\n\t\t}\n\t}\n\tcomponentDidChange(){\n\t\tif (this.usedMarker !== this.props.marker) {\n\t\t\tthis.markerChanged(this.props.marker)\n\t\t}\n\t}\n\tcomponentWillUnmount(){\n\t\t// reset map viewport to original state\n\t\tif (\n\t\t\tthis.initialMapViewport &&\n\t\t\tthis.initialMapViewport.center &&\n\t\t\tthis.initialMapViewport.zoom\n\t\t) {\n\t\t\tthis.props.globals.mainMapFunctions.flyTo(this.initialMapViewport.center, this.initialMapViewport.zoom, {\n\t\t\t\tduration: this.props.globals.transitionDuration * 0.001\n\t\t\t})\n\t\t}\n\n\t\twindow.removeEventListener('mapViewportUpdated', this.setStateGeoPos)\n\t\tsetTimeout(()=>{\n\t\t\tthis.props.globals.mainMapFunctions.useAsGeoChooser(false, undefined)\n\t\t}, 1)\n\t}\n\n\tcheckIfLegal(callback){\n\t\tthis.props.globals.graphql.query({\n\t\t\tquery: query_isGeoCoordinateLegal,\n\t\t\tvariables: {\n\t\t\t\tlng: this.state.map_center.lng,\n\t\t\t\tlat: this.state.map_center.lat,\n\t\t\t},\n\t\t}).then(result => {\n\t\t\tcallback(result && result.data && result.data.isGeoCoordinateLegal)\n\t\t}).catch(error=>{\n\t\t\tcallback(false)\n\t\t})\n\t}\n\n\tmarkerChanged(marker){\n\t\tif (\n\t\t\tmarker && \n\t\t\tmarker.center &&\n\t\t\tmarker.zoom\n\t\t) {\n\t\t\tthis.usedMarker = marker\n\n\t\t\tconst currentCenter = this.props.globals.mainMapFunctions.getCenter()\n\t\t\tconst currentZoom = this.props.globals.mainMapFunctions.getZoom()\n\n\t\t\tthis.initialMapViewport = {\n\t\t\t\tcenter: currentCenter,\n\t\t\t\tzoom: currentZoom,\n\t\t\t}\n\n\t\t\n\t\t\tlet markerPos = {\n\t\t\t\tlng: marker.center.lng, \n\t\t\t\tlat: marker.center.lat,\n\t\t\t}\n\n\t\t\tlet newZoom = currentZoom > 18 ? currentZoom : 18\n\t\t\tif (markerPos.lat === 0 && markerPos.lng === 0) {\n\t\t\t\tnewZoom = 3\n\t\t\t\tmarkerPos = {\n\t\t\t\t\tlng: -35, \n\t\t\t\t\tlat: 40,\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (this.props.globals.sidebarIsOpen) { // TODO this.props.globals.sidebarIsOpen isn't enough on small screens\n\t\t\t\tmarkerPos = this.props.globals.mainMapFunctions.unproject(this.props.globals.mainMapFunctions.project(markerPos, newZoom).add([-200,0]), newZoom) // map center with sidebar offset\n\t\t\t}\n\t\t\tthis.props.globals.mainMapFunctions.flyTo(markerPos, newZoom, {\n\t\t\t\tduration: this.props.globals.transitionDuration * 0.001,\n\t\t\t})\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.props.globals.mainMapFunctions.useAsGeoChooser(true, this.props.doc)\n\t\t\t}, this.props.globals.transitionDuration)\n\t\t}\n\t}\n\n\tsetStateGeoPos(event){\n\t\tconst map_center = this.props.globals.map_center.map(number => Number.parseFloat(number.toFixed(6))) // WHY: https://gis.stackexchange.com/questions/8650/measuring-accuracy-of-latitude-and-longitude\n\n\t\tconst lng = map_center[1]\n\t\tconst lat = map_center[0]\n\n\t\tthis.setState({\n\t\t\tmap_center: {\n\t\t\t\tlng,\n\t\t\t\tlat,\n\t\t\t}\n\t\t}, ()=>{\n\t\t\tthis.checkIfLegal(isLegal => {\n\t\t\t\tthis.setState({isLegal})\n\t\t\t\t// if (this.props.onChange) {\n\t\t\t\t// \tif (isLegal) {\n\t\t\t\t// \t\tthis.props.onChange({\n\t\t\t\t// \t\t\tlng,\n\t\t\t\t// \t\t\tlat,\n\t\t\t\t// \t\t})\n\t\t\t\t// \t}else{\n\t\t\t\t// \t\tthis.props.onChange({\n\t\t\t\t// \t\t\tlng: NaN,\n\t\t\t\t// \t\t\tlat: NaN,\n\t\t\t\t// \t\t})\n\t\t\t\t// \t}\n\t\t\t\t// }\n\t\t\t})\n\t\t})\n\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange({\n\t\t\t\tlng,\n\t\t\t\tlat,\n\t\t\t})\n\t\t}\n\t}\n\n\trender() {\n\t\tconst map_center = this.state.map_center\n\t\t\n\t\treturn (<div style={{margin:'4px 8px'}}>\n\t\t\t<Typography variant=\"body2\" gutterBottom>\n\t\t\t\t<Localized id=\"instructions\" />\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"body2\" style={{opacity:0.6}}>\n\t\t\t\t<Localized id=\"lat\" vars={{ lat: (map_center.lat+'' || '') }} />\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"body2\" style={{opacity:0.6}}>\n\t\t\t\t<Localized id=\"lng\" vars={{ lng: (map_center.lng+'' || '') }} />\n\t\t\t</Typography>\n\n\t\t\t{\n\t\t\t\t!this.state.isLegal\n\t\t\t\t? (\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tkey=\"geoInputErrorMessage_NotLegal\"\n\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: '16px'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"error_message_geo_not_legal\" />\n\t\t\t\t\t</Typography>\n\t\t\t\t)\n\t\t\t\t: undefined\n\t\t\t}\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(GeoInput)\n\n// You can't use this position as it's illegal to be queer there. (Or we aren't sure.)\n\n/*\n\n- klick \"add a place\"\n- hide all icon and all UI\n- add a new icon in the middle of the screen (it stays in the middle even when the map is moved)\n- the icon should be an input field for lat+lng\n- add a submit-button and a heading \"Where is the place located?\"\n\n*/","import React from 'react'\n// import './index.css'\n\nimport {\n\tTextField,\n\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n} from '@material-ui/core'\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete'\n\n// import { Localized/*, withLocalization*/ } from '../Localized/'\nimport { withGlobals } from '../Globals/'\n\nimport { getTranslation } from '../../functions.js'\n\nimport categories from '../../data/dist/categories.json'\nimport _presets_ from '../../data/dist/presets.json'\nimport colors from '../../data/dist/colors.json'\n\n\n\nclass PresetInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.filterOptions = createFilterOptions({\n\t\t\tmatchFrom: 'start',\n\t\t\tstringify: option => option.name_translated+' | '+option.category_name_translated,\n\t\t})\n\n\t\tthis._options_ = [].concat(\n\t\t\t...(\n\t\t\t\tcategories\n\t\t\t\t.map(category =>\n\t\t\t\t\tObject.values(_presets_)\n\t\t\t\t\t.filter(preset => category.presets.some(\n\t\t\t\t\t\tpresetKey => preset.key === presetKey || preset.key.startsWith(presetKey+'/')\n\t\t\t\t\t))\n\t\t\t\t\t.map(preset => this.preset4options({\n\t\t\t\t\t\t...preset,\n\t\t\t\t\t\tcategory_name_translated: getTranslation(category.name, this.props.globals.userLocales),\n\t\t\t\t\t\tcolor: category.color,\n\t\t\t\t\t}))\n\t\t\t\t\t.sort(this.presetSorter)\n\t\t\t\t)\n\t\t\t),\n\t\t\t...(\n\t\t\t\tObject.values(_presets_)\n\t\t\t\t.filter(preset => !categories.some(\n\t\t\t\t\tcategory => category.presets.some(\n\t\t\t\t\t\tpresetKey => (\n\t\t\t\t\t\t\tpreset.key === presetKey\n\t\t\t\t\t\t\t|| preset.key.startsWith(presetKey+'/')\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t))\n\t\t\t\t.map(preset => this.preset4options({\n\t\t\t\t\t...preset,\n\t\t\t\t\tcategory_name_translated: 'Weitere',\n\t\t\t\t\tcolor: colors.default,\n\t\t\t\t}))\n\t\t\t\t.sort(this.presetSorter)\n\t\t\t)\n\t\t)\n\n\t\tthis.presetChanged = this.presetChanged.bind(this)\n\t}\n\n\n\tpresetSorter(a, b){\n\t\tconst icon_compare = b.icon.localeCompare(a.icon)\n\t\tconst name_compare = -b.name_translated.localeCompare(a.name_translated)\n\t\treturn icon_compare === 0 ? name_compare : icon_compare\n\t}\n\n\tpreset4options(preset){\n\t\treturn {\n\t\t\t...preset,\n\t\t\tname_translated: getTranslation(preset.name, this.props.globals.userLocales),\n\t\t\ticon: preset.icon ? preset.icon.toLowerCase() : '',\n\t\t}\n\t}\n\n\tpresetChanged(event, value){\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange(value.key ||undefined)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet defaultValue = undefined\n\t\tif (this.props.defaultValue && _presets_[this.props.defaultValue]) {\n\t\t\tdefaultValue = this.preset4options({\n\t\t\t\t..._presets_[this.props.defaultValue],\n\t\t\t\tcategory_name_translated: '', // isn't really needed\n\t\t\t\tcolor: colors.default, // isn't really needed\n\t\t\t})\n\t\t}\n\n\t\treturn (<div style={{margin:'8px 8px 4px 8px'}}>\n\t\t\t<Autocomplete\n\t\t\t\toptions={this._options_}\n\t\t\t\tgroupBy={preset => preset.category_name_translated || ''}\n\t\t\t\tgetOptionLabel={preset => preset.name_translated}\n\t\t\t\tgetOptionSelected={(preset, value) => !!value && value.key === preset.key}\n\t\t\t\n\t\t\t\trenderOption={(preset) => (<ListItem\n\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmargin: '-6px -16px -6px -24px',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"material-icons-round\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: (\n\t\t\t\t\t\t\t\t\tpreset.icon\n\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\tpreset.color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t? preset.color.bg\n\t\t\t\t\t\t\t\t\t\t: preset.color.fg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tbackgroundColor: (\n\t\t\t\t\t\t\t\t\tpreset.icon\n\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\tpreset.color.key === 'default'\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: preset.color.bg\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tborderRadius: '100%',\n\t\t\t\t\t\t\t\twidth: '40px',\n\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\tlineHeight: '40px',\n\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>{preset.icon}</div>\n\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t<ListItemText primary={preset.name_translated}/>\n\t\t\t\t</ListItem>)}\n\t\t\t\t\n\t\t\t\tblurOnSelect\n\t\t\t\topenOnFocus\n\t\t\t\n\t\t\t\tclearText=\"nextQuestionIDs\"\n\t\t\t\tcloseText=\"Close\"\n\t\t\t\tnoOptionsText=\"No options\"\n\t\t\t\topenText=\"Open\"\n\t\t\t\n\t\t\t\tfilterOptions={this.filterOptions}\n\t\t\t\tdefaultValue={defaultValue}\n\t\t\t\tonChange={this.presetChanged}\n\t\t\t\n\t\t\t\trenderInput={(params) => (<TextField\n\t\t\t\t\t{...params}\n\t\t\t\n\t\t\t\t\tlabel={this.props.label || ''}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t/>)}\n\t\t\t/>\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(PresetInput)\n\n\n\n","import React from 'react'\nimport './index.css'\n\nimport {\n\tTextField,\n\tTypography,\n} from '@material-ui/core'\n// import {\n// \tAddRounded as AddIcon,\n// } from '@material-ui/icons'\n\nimport { withLocalization } from '../Localized/'\nimport { withGlobals } from '../Globals/'\n\nclass DateInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tyear: '',\n\t\t\tmonth: '',\n\t\t\tdate: '',\n\t\t}\n\n\t\tthis.formated = {\n\t\t\tyear: null,\n\t\t\tmonth: null,\n\t\t\tdate: null,\n\t\t}\n\n\t\tthis.parseDateString = this.parseDateString.bind(this)\n\t\tthis.setValue = this.setValue.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.parseDateString()\n\t}\n\tcomponentDidChange(){\n\t\tthis.parseDateString()\n\t}\n\tparseDateString(){\n\t\tconst defaultValue = this.props.defaultValue\n\n\t\tlet parts = []\n\t\tif (!!defaultValue) {\n\t\t\tif (!!defaultValue['']) {\n\t\t\t\tparts = defaultValue[''].match(/(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?/)\n\t\t\t} else if (typeof defaultValue === 'string') {\n\t\t\t\tparts = defaultValue.match(/(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?/)\n\t\t\t}\n\t\t}\n\n\t\tlet year = ''\n\t\tif (\n\t\t\t!(\n\t\t\t\tdefaultValue.hasOwnProperty('year:is_set') &&\n\t\t\t\tdefaultValue['year:is_set'] === false\n\t\t\t)\n\t\t\t&& (defaultValue['year'] || parts[1])\n\t\t) {\n\t\t\tyear = (defaultValue['year'] || parts[1])\n\t\t}\n\n\t\tlet month = ''\n\t\tif (\n\t\t\t!(\n\t\t\t\tdefaultValue.hasOwnProperty('month:is_set') &&\n\t\t\t\tdefaultValue['month:is_set'] === false\n\t\t\t)\n\t\t\t&& (defaultValue['month'] || parts[2])\n\t\t) {\n\t\t\tmonth = (defaultValue['month'] || parts[2])\n\t\t}\n\n\t\tlet day = ''\n\t\tif (\n\t\t\t!(\n\t\t\t\tdefaultValue.hasOwnProperty('day:is_set') &&\n\t\t\t\tdefaultValue['day:is_set'] === false\n\t\t\t)\n\t\t\t&& (defaultValue['day'] || parts[3])\n\t\t) {\n\t\t\tday = (defaultValue['day'] || parts[3])\n\t\t}\n\n\t\tthis.setState({year, month, day}, ()=>{\n\t\t\tthis.formated = {\n\t\t\t\tyear: this.getFormatedValue('year', year),\n\t\t\t\tmonth: this.getFormatedValue('month', month),\n\t\t\t\tday: this.getFormatedValue('day', day),\n\t\t\t}\n\t\t})\n\t}\n\n\tgetFormatedValue(formatKey,value){\n\t\tconst real = value\n\t\tlet isSet = false\n\t\tlet asString = ''\n\t\tvalue *= 1\n\n\t\tif (formatKey === 'year') {\n\t\t\tif (value > 99999) {\n\t\t\t\tvalue = 99999\n\t\t\t} else {\n\t\t\t\tisSet = true\n\t\t\t}\n\t\t\tasString = (value+'').padStart(4,'0')\n\t\t} else if (formatKey === 'month') {\n\t\t\tif (value > 12) {\n\t\t\t\tvalue = 12\n\t\t\t} else if (value < 1) {\n\t\t\t\tvalue = 1\n\t\t\t} else {\n\t\t\t\tisSet = true\n\t\t\t}\n\t\t\tasString = (value+'').padStart(2,'0')\n\t\t} else if (formatKey === 'day') {\n\t\t\tlet daysInMonth = 31\n\t\t\tif (\n\t\t\t\tthis.formated.year &&\n\t\t\t\tthis.formated.year.isSet &&\n\t\t\t\tthis.formated.month &&\n\t\t\t\tthis.formated.month.isSet\n\t\t\t) {\n\t\t\t\tdaysInMonth = new Date(this.formated.year.value, this.formated.month.value, 0).getDate()\n\t\t\t}\n\n\t\t\tif (value > daysInMonth) {\n\t\t\t\tvalue = daysInMonth\n\t\t\t} else if (value < 1) {\n\t\t\t\tvalue = 1\n\t\t\t} else {\n\t\t\t\tisSet = true\n\t\t\t}\n\t\t\tasString = (value+'').padStart(2,'0')\n\t\t}\n\n\t\treturn {\n\t\t\tasString,\n\t\t\tvalue,\n\t\t\tisSet,\n\t\t\treal,\n\t\t}\n\t}\n\n\tsetValue(formatKey,value){\n\t\tthis.formated[formatKey] = this.getFormatedValue(formatKey,value)\n\t\tif (formatKey !== 'day') {\n\t\t\tthis.formated.day = this.getFormatedValue('day',this.formated.day.real)\n\t\t}\n\n\t\tconst values = Object.fromEntries(Object.entries(this.formated).map(entry => [\n\t\t\tentry[0],\n\t\t\tentry[1].value,\n\t\t]))\n\t\tconst isSet = Object.fromEntries(Object.entries(this.formated).map(entry => [\n\t\t\tentry[0]+':is_set',\n\t\t\tentry[1].isSet,\n\t\t]))\n\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange({\n\t\t\t\t'': this.formated.year.asString+'-'+this.formated.month.asString+'-'+this.formated.day.asString,\n\t\t\t\t...values,\n\t\t\t\t...isSet,\n\t\t\t})\n\t\t}\n\t}\n\n\trender() {\n\t\tconst dateInputOrder = this.props.getString('date-input-order', null, '').split('-').filter(v=>!!v && v !== ' ') // year-month-day\n\n\t\treturn (<div\n\t\t\tclassName=\"DateInput\"\n\t\t>\n\t\t\t<div className=\"TextFields\">\n\t\t\t\t{\n\t\t\t\t\tdateInputOrder.map((formatKey,index) => (<TextField\n\t\t\t\t\t\tautoFocus={formatKey === 'year'}\n\t\t\t\t\t\tclassName=\"TextField\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tkey={formatKey+'_'+this.state[formatKey]}\n\t\t\t\t\t\tlabel={this.props.getString(`${formatKey}-label`, null, formatKey)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tdefaultValue={this.state[formatKey]}\n\t\t\t\t\t\tonChange={event => this.setValue(formatKey,event.target.value)}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t{\n\t\t\t\t!!this.props.helperText\n\t\t\t\t? <Typography className=\"helperText\" variant=\"caption\">{this.props.helperText}</Typography>\n\t\t\t\t: null\n\t\t\t}\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withLocalization(DateInput))\n\n\n","import React from \"react\"\nimport { useDrag } from \"react-dnd\"\n\nimport {\n\tChip,\n} from '@material-ui/core'\n\nconst Box = ({ index, type, label, onDelete }) => {\n\tconst item = { index, type }\n\n\tconst [{ isDragging }, drag] = useDrag({\n\t\titem,\n\t\tcollect: monitor => ({\n\t\t\tisDragging: monitor.isDragging(),\n\t\t})\n\t})\n\n\treturn (\n\t\t<Chip\n\t\t\tref={drag}\n\t\t\tlabel={label}\n\t\t\tstyle={{\n\t\t\t\tcursor: 'move',\n\t\t\t\tmargin: '0 2px 4px 2px',\n\t\t\t\t'WebkitTouchCallout': 'none',\n\t\t\t\t  'WebkitUserSelect': 'none',\n\t\t\t\t   'KhtmlUserSelect': 'none',\n\t\t\t\t     'MozUserSelect': 'none',\n\t\t\t\t      'MsUserSelect': 'none',\n\t\t\t\t        'userSelect': 'none',\n\t\t\t\topacity: isDragging ? 0.4 : 1,\n\t\t\t}}\n\t\t\tonDelete={\n\t\t\t\ttypeof onDelete === 'function'\n\t\t\t\t? () => onDelete(item)\n\t\t\t\t: null\n\t\t\t}\n\t\t/>\n\t)\n}\nexport default Box\n","import React from 'react'\n\nimport { useTheme } from '@material-ui/core/styles'\n\nimport { useDrop } from 'react-dnd'\nimport Box from './Box.js'\n\nimport {\n\tFormControl,\n\tInputLabel,\n} from '@material-ui/core'\n\nconst Dustbin = ({ label, accept, items, onDrop, onRemoveItem }) => {\n\tconst theme = useTheme()\n\n\tconst [{ isOver, canDrop }, drop] = useDrop({\n\t\taccept,\n\t\tdrop: onDrop,\n\t\tcollect: monitor => ({\n\t\t\tisOver: monitor.isOver(),\n\t\t\tcanDrop: monitor.canDrop()\n\t\t})\n\t})\n\n\tconst isActive = isOver && canDrop\n\tconst hasItems = items.length > 0\n\tconst activeHelperText = '' // (isActive ? ' Release to drop' : '')\n\n\treturn (\n\t\t<FormControl\n\t\t\tref={drop}\n\t\t\tvariant=\"outlined\"\n\t\t\tcolor=\"secondary\"\n\t\t\tfullWidth\n\t\t\tstyle={{\n\t\t\t\ttransition: 'margin-top 0.2s ease',\n\t\t\t\tmarginTop: (hasItems ? '16px' : '8px'),\n\t\t\t}}\n\t\t>\n\t\t\t<InputLabel focused={hasItems && isActive} shrink={hasItems}>\n\t\t\t\t{label}{activeHelperText}\n\t\t\t</InputLabel>\n\t\t<fieldset\n\t\t\tstyle={{\n\t\t\t\tdisplay: 'block',\n\t\t\t\twidth: 'auto',\n\t\t\t\tminHeight: '1.1875em',\n\t\t\t\tpadding: '18.5px 8px',\n\t\t\t\tborderWidth: '1px',\n\t\t\t\tborderStyle: 'solid',\n\t\t\t\tborderColor: (\n\t\t\t\t\tisActive\n\t\t\t\t\t? theme.palette.secondary.main\n\t\t\t\t\t: (\n\t\t\t\t\t\ttheme.palette.type === 'dark'\n\t\t\t\t\t\t? 'rgba(255,255,255,0.23)'\n\t\t\t\t\t\t: 'rgba(0,0,0,0.23)'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\ttransition: 'border-color 200ms ease 0ms',\n\t\t\t\tborderRadius: '8px',\n\t\t\t\tmarginTop: '-5px',\n\t\t\t}}\n\t\t>\n\t\t\t<legend\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\theight: '11px',\n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\tpadding: '0',\n\t\t\t\t\tfontSize: '0.75em',\n\t\t\t\t\ttextAlign: 'left',\n\t\t\t\t\tvisibility: 'hidden',\n\n\t\t\t\t\t...(\n\t\t\t\t\t\thasItems\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\tmaxWidth: '1000px',\n\t\t\t\t\t\t\ttransition: 'max-width 100ms ease 50ms',\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\tmaxWidth: '0.01px',\n\t\t\t\t\t\t\ttransition: 'max-width 50ms ease 0ms',\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span style={{padding: '0 5px'}}>{label}{activeHelperText}</span>\n\t\t\t</legend>\n\n\t\t\t<div style={{margin: '-13px 0 -14px 0'}}>\n\t\t\t\t{items.map(item => (\n\t\t\t\t\t<Box\n\t\t\t\t\t\tkey={item.index}\n\t\t\t\t\t\tindex={item.index}\n\t\t\t\t\t\tlabel={item.label}\n\t\t\t\t\t\ttype={item.type}\n\t\t\t\t\t\tonDelete={onRemoveItem}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</fieldset>\n\t\t</FormControl>\n\t)\n}\nexport default Dustbin\n\n\t\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport { DndProvider } from 'react-dnd'\nimport Backend from 'react-dnd-html5-backend'\nimport update from 'immutability-helper'\n\nimport Dustbin from './Dustbin.js'\nimport Box from './Box.js'\n\nimport Localized from '../Localized/'\n\nconst AudienceInput = ({ defaultValue, onChange }) => {\n\treturn (\n\t\t<DndProvider backend={Backend}>\n\t\t\t<Example defaultValue={defaultValue} onChange={onChange} />\n\t\t</DndProvider>\n\t)\n}\n\nexport default AudienceInput\n\n\n\n\n\n////////////////////////////////////////////////////////////////\n\n\n\n\n\nconst accept_type = 'box'\n\nconst Example = ({ defaultValue, onChange }) => {\n\tconst [dustbins] = useState([\n\t\t{ value: 'only', label: <Localized id=\"audience_input_label_only\" /> },\n\t\t{ value: 'primary', label: <Localized id=\"audience_input_label_primary\" /> },\n\t\t{ value: 'welcome', label: <Localized id=\"audience_input_label_welcome\" /> },\n\t\t{ value: 'no', label: <Localized id=\"audience_input_label_no\" /> }\n\t])\n\tconst [items, setItems] = useState([])\n\n\tuseEffect(()=>{\n\t\tsetItems(\n\t\t\t[\n\t\t\t\t'queer',\n\t\t\t\t'youth',\n\t\t\t\t'trans',\n\t\t\t\t'inter',\n\t\t\t\t'sexuality:bi',\n\t\t\t\t'sexuality:lesbian',\n\t\t\t\t'sexuality:gay',\n\t\t\t\t'allies',\n\t\t\t\t'cis',\n\t\t\t\t'men',\n\t\t\t\t'women',\n\t\t\t]\n\t\t\t.map(key => ({\n\t\t\t\tkey: key,\n\t\t\t\tlabel: <Localized id={key.replace(/:/g, '_')} />,\n\t\t\t\tvalue: defaultValue[key] || null,\n\t\t\t\tdefaultValue: defaultValue[key] || null,\n\t\t\t\ttype: accept_type,\n\t\t\t}))\n\t\t)\n\t}, [defaultValue])\n\n\tconst handleDrop = useCallback(\n\t\t(value, item) => {\n\t\t\tconst newItems = update(items, {\n\t\t\t\t[item.index]: {\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\t$set: value\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tsetItems(newItems)\n\n\t\t\tconst changedItems = Object.fromEntries(\n\t\t\t\tnewItems\n\t\t\t\t.filter(item => item.hasOwnProperty('value') && item.value !== item.defaultValue)\n\t\t\t\t.map(item => [item.key, item.value || false])\n\t\t\t)\n\n\t\t\tonChange(changedItems)\n\t\t},\n\t\t[items, onChange]\n\t)\n\n\treturn (\n\t\t<div style={{margin:'0 8px'}}>\n\t\t\t<div>\n\t\t\t\t{items\n\t\t\t\t\t.map((item, index) => ({ ...item, index }))\n\t\t\t\t\t.filter(item => item.value === null)\n\t\t\t\t\t.map(item => (\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tkey={item.index}\n\t\t\t\t\t\t\tindex={item.index}\n\t\t\t\t\t\t\tlabel={item.label}\n\t\t\t\t\t\t\ttype={item.type}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t{dustbins.map(({ value, label }) => (\n\t\t\t\t<Dustbin\n\t\t\t\t\tkey={value}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\taccept={[accept_type]}\n\t\t\t\t\titems={items\n\t\t\t\t\t\t.map((item, index) => ({ ...item, index }))\n\t\t\t\t\t\t.filter(item => item.value === value)}\n\t\t\t\t\tonDrop={item => handleDrop(value, item)}\n\t\t\t\t\tonRemoveItem={item => handleDrop(null, item)}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t)\n}","import React from 'react'\nimport './index.css'\n\n\n\nimport { Localized, withLocalization } from '../Localized/'\n// import { navigate } from '@reach/router'\n\nimport {\n\tloadQuestions as query_loadQuestions,\n\taddChangeset as mutation_addChangeset,\n} from '../../queries.js'\n\n// import categories from '../../data/dist/categories.json'\nimport _presets_ from '../../data/dist/presets.json'\n// import colors from '../../data/dist/colors.json'\n// import colorsByPreset from '../../data/dist/colorsByPreset.json'\nimport { uuidv4, getTranslationFromArray/*, getPreset, getColorByPreset*/ } from '../../functions.js'\n\nimport { withGlobals } from '../Globals/'\n\nimport {\n\tLink,\n\tTypography,\n\tButton,\n\tFab,\n\tPaper,\n\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\n\tTextField,\n} from '@material-ui/core'\nimport {\n\tDoneRounded as DoneIcon,\n\tArrowBackRounded as ArrowBackIcon,\n\tArrowForwardRounded as ArrowForwardIcon,\n} from '@material-ui/icons'\n// import {\n// \tAutocomplete\n// } from '@material-ui/lab'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport GeoInput from '../GeoInput/'\nimport PresetInput from '../PresetInput/'\nimport DateInput from '../DateInput/'\nimport AudienceInput from '../AudienceInput/'\n\n\n\n// const nextQuestionIDs_templates = {\n// \timprove: ['start_improve'],\n// \tcreate: ['name','geo_pos','answer_more'],\n// }\n\n/*\nconst _parsers_ = {\n\turls: function(value){\n\t\tlet urls = value.match(/[^\\s]+(?:\\.|:|\\/).+(?=\\s|$)/iumg)\n\t\t// This is not a good regexp but it work okayish.\n\t\t// A comment on url matching: https://stackoverflow.com/questions/827557/how-do-you-validate-a-url-with-a-regular-expression-in-python/827621#827621\n\n\t\turls = [...new Set(urls.filter(v=>v))]\n\n\t\tif (urls.length === 1) {\n\t\t\treturn {urls: urls[0]}\n\t\t} else if (urls.length > 1) {\n\t\t\treturn {urls: urls}\n\t\t}\n\n\t\treturn undefined\n\t},\n\tsocialmedia: function(value){\n\t\t// https://wiki.openstreetmap.org/wiki/Key:contact\n\n\t\tlet keys = {\n\t\t\t'instagram.com': 'instagram',\n\t\t\t'facebook.com': 'facebook',\n\t\t\t'twitter.com': 'twitter',\n\t\t\t'youtube.com': 'youtube',\n\t\t\t't.me': 'telegram',\n\t\t\t'foursquare.com': 'foursquare',\n\t\t}\n\n\t\tlet tags = Array.from(value.matchAll(\n\t\t\t/[^\\s]*?([^.\\s]+\\.[^.\\s/]+)\\/[^\\s]+/iumg\n\t\t), match => match)\n\t\t.reduce((tags,match) => {\n\t\t\tconst key = keys[match[1]]\n\t\t\tif (key) {\n\t\t\t\tif (!tags[key]) {\n\t\t\t\t\ttags[key] = []\n\t\t\t\t}\n\t\t\t\ttags[key].push(match[0])\n\t\t\t}\n\t\t\treturn tags\n\t\t}, {})\n\n\t\tfor (const key in tags) {\n\t\t\tif (tags[key].length === 1) {\n\t\t\t\ttags[key] = tags[key][0]\n\t\t\t}\n\t\t\ttags['contact:'+key] = tags[key]\n\t\t}\n\n\t\tconsole.log('tags', tags)\n\n\t\t// usernames = [...new Set(usernames.filter(v=>v))]\n\n\t\t// if (usernames.length === 1) {\n\t\t// \treturn {\n\t\t// \t\tinstagram: usernames[0],\n\t\t// \t\t'contact:instagram': usernames[0],\n\t\t// \t}\n\t\t// } else if (usernames.length > 1) {\n\t\t// \treturn {\n\t\t// \t\tinstagram: usernames,\n\t\t// \t\t'contact:instagram': usernames,\n\t\t// \t}\n\t\t// }\n\n\t\treturn undefined\n\t},\n\twikidata: function(value){\n\t\t// http://www.wikidata.org/wiki/Q9141\n\n\t\tlet ids = Array.from(value.matchAll(\n\t\t\t/wikidata\\.org\\/wiki\\/([A-Z0-9]+)(?=\\s|$)/gmiu\n\t\t), m => m[1])\n\n\t\tids = [...new Set(ids.filter(v=>v))]\n\n\t\tif (ids.length === 1) {\n\t\t\treturn {wikidata: ids[0]}\n\t\t} else if (ids.length > 1) {\n\t\t\treturn {wikidata: ids}\n\t\t}\n\n\t\treturn undefined\n\t},\n\twikipedia: function(value){\n\t\tlet ids = Array.from(value.matchAll(\n\t\t\t/(?:([a-z]+)\\.)?wikipedia\\.org\\/wiki\\/([^/\\s]+)(?=\\s|$)/iugm\n\t\t), m => (!!m[1] ? m[1]+':' : '')+m[2])\n\n\t\tids = [...new Set(ids.filter(v=>v))]\n\n\t\tif (ids.length === 1) {\n\t\t\treturn {wikidata: ids[0]}\n\t\t} else if (ids.length > 1) {\n\t\t\treturn {wikidata: ids}\n\t\t}\n\n\t\treturn undefined\n\t},\n}\n*/\n\n// console.log(\n// \t_parsers_.socialmedia(`\n// \t\tinstagram.com/thomasrosen\n// \t\thttps://www.instagram.com/thomasrosen/\n// \t`)\n// )\n\nclass Questions extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tquestionsAreLoaded: false,\n\t\t\tanswersByQuestionId: {},\n\n\t\t\tquestionsById: {},\n\t\t\tnextQuestionIDs: [], // nextQuestionIDs_templates.create,\n\n\t\t\tstageIndex: 0, // 0=privacy -> 1=questions -> 2=sources\n\t\t}\n\n\t\t// this.answerIDs = new Set()\n\t\tthis.sourcesText = ''\n\t\tthis.answer_tags = {}\n\t\tthis.tagsFromTheDoc = {}\n\n\t\tthis.inputValues = {}\n\n\t\tthis.renderStage = this.renderStage.bind(this)\n\n\t\tthis.answerQuestion = this.answerQuestion.bind(this)\n\t\tthis.loadQuestions = this.loadQuestions.bind(this)\n\t\tthis.submitInputs = this.submitInputs.bind(this)\n\n\t\tthis.setQuestionAsActive = this.setQuestionAsActive.bind(this)\n\t\tthis.savePresetValue = this.savePresetValue.bind(this)\n\t\tthis.saveValueByKey = this.saveValueByKey.bind(this)\n\n\t\tthis.abort = this.abort.bind(this)\n\t\tthis.acceptPrivacyPolicy = this.acceptPrivacyPolicy.bind(this)\n\t\tthis.showQuestions = this.showQuestions.bind(this)\n\t\tthis.addSources\t = this.addSources.bind(this)\n\t\tthis.finish = this.finish.bind(this)\n\t\tthis.saveSourcesText = this.saveSourcesText.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\t// skip privacy consent screen when already agreed\n\t\tconst privacy_contented_to_tracking = this.props.store.getPrivacy('tracking')\n\t\tif (privacy_contented_to_tracking) {\n\t\t\tthis.setState({stageIndex: 1})\n\t\t}\n\n\t\tthis.setState((state, props) => {\n\t\t\tif (this.state.nextQuestionIDs.length === 0 && this.props.startQuestions.length > 0) {\n\t\t\t\treturn {nextQuestionIDs: this.props.startQuestions}\n\t\t\t}\n\t\t})\n\n\t\tthis.loadQuestions()\n\t}\n\tcomponentDidUpdate(){\n\t\tif (\n\t\t\t!!this.props.doc &&\n\t\t\t// !!this.props.doc._id &&\n\t\t\t!!this.props.doc.properties &&\n\t\t\t!!this.props.doc.properties.tags &&\n\t\t\tthis.props.doc.properties.tags !== this.tagsFromTheDoc\n\t\t) {\n\t\t\tthis.tagsFromTheDoc = this.props.doc.properties.tags\n\t\t}\n\t}\n\tcomponentWillUnmount(){\n\t\tif (!!this.loadQuestionsQuerySubscription) {\n\t\t\tthis.loadQuestionsQuerySubscription.unsubscribe()\n\t\t}\n\t}\n\n\tloadQuestions(){\n\t\tthis.loadQuestionsQuerySubscription = this.props.globals.graphql.watchQuery({\n\t\t\tfetchPolicy: 'cache-and-network',\n\t\t\tquery: query_loadQuestions,\n\t\t\tvariables: {\n\t\t\t\tlanguages: navigator.languages,\n\t\t\t},\n\t\t})\n\t\t.subscribe(({data}) => {\n\t\t\tif (!!data && !this.state.questionsAreLoaded) {\n\t\t\t\tconst nextQuestionIDs = [\n\t\t\t\t\t...this.props.startQuestions,\n\t\t\t\t\t...this.state.nextQuestionIDs,\n\t\t\t\t]\n\t\n\t\t\t\tlet firstOpenQuestionCounter = 0\n\t\t\t\tconst questionsById = data.questions.reduce((obj,questionDoc)=>{\n\t\n\t\t\t\t\tconst hasGeoInputField = questionDoc.properties.possibleAnswers.filter(possibleAnswer => possibleAnswer.inputtype === 'geo').length > 0\n\t\n\t\t\t\t\tif (this.props.globals.isSmallScreen && hasGeoInputField) {\n\t\t\t\t\t\tfirstOpenQuestionCounter += 1\n\t\t\t\t\t}\n\t\n\t\t\t\t\tquestionDoc.properties.question_translated = getTranslationFromArray(questionDoc.properties.question, this.props.globals.userLocales)\n\t\n\t\t\t\t\tquestionDoc.properties.in_one_word_translated = getTranslationFromArray(questionDoc.properties.in_one_word, this.props.globals.userLocales)\n\t\n\t\t\t\t\tquestionDoc.properties.description_translated = getTranslationFromArray(questionDoc.properties.description, this.props.globals.userLocales)\n\t\n\t\t\t\t\tquestionDoc.properties.possibleAnswers = questionDoc.properties.possibleAnswers.map(answer => ({\n\t\t\t\t\t\t...answer,\n\t\t\t\t\t\ttitle_translated: getTranslationFromArray(answer.title, this.props.globals.userLocales),\n\t\t\t\t\t\tdescription_translated: getTranslationFromArray(answer.description, this.props.globals.userLocales),\n\t\t\t\t\t}))\n\t\n\t\t\t\t\tobj[questionDoc._id] = {\n\t\t\t\t\t\t...questionDoc,\n\t\t\t\t\t\t\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tactive: (questionDoc._id === nextQuestionIDs[firstOpenQuestionCounter]),\n\t\t\t\t\t\tanswered: false,\n\t\n\t\t\t\t\t\tpossibleAnswersByKey: questionDoc.properties.possibleAnswers.reduce((possibleAnswersByKey,possibleAnswer) => {\n\t\t\t\t\t\t\tpossibleAnswersByKey[possibleAnswer.key] = possibleAnswer\n\t\t\t\t\t\t\treturn possibleAnswersByKey\n\t\t\t\t\t\t}, {}),\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn obj\n\t\t\t\t}, {})\n\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tquestionsById,\n\t\t\t\t\tquestionsAreLoaded: true,\n\t\t\t\t}/*, ()=>{\n\t\t\t\t\tthis.setQuestionAsActive(nextQuestionIDs[0])\n\t\t\t\t}*/)\n\t\t\t}\n\t\t})\n\t}\n\n\tsetQuestionAsActive(questionID){\n\t\t// if (Object.keys(this.inputValues).length > 0) {\n\t\t// \tthis.answerQuestion(questionDoc._id, this.inputValues)\n\t\t// }\n\n\t\tthis.setState((state, props) => {\n\t\t\tconst questionIDs = Object.keys(state.questionsById)\n\n\t\t\tlet questionsById = state.questionsById\n\t\t\tfor (const questionID of questionIDs) {\n\t\t\t\tquestionsById[questionID].active = false\n\t\t\t}\n\t\t\t// if (!questionsById[questionID].answered) {\n\t\t\t\tquestionsById[questionID].active = true\n\t\t\t// }\n\n\t\t\treturn {\n\t\t\t\tquestionsById: questionsById,\n\t\t\t}\n\t\t})\n\t}\n\n\tanswer2tags(questionID, answerKey, answerValue, tags = {}){\n\t\tconst question_doc = this.state.questionsById[questionID]\n\n\t\tif (!!question_doc && !!question_doc.possibleAnswersByKey) {\n\t\t\tconst possibleAnswer = question_doc.possibleAnswersByKey[answerKey]\n\n\t\t\tif (!!possibleAnswer) {\n\t\t\t\tif (\n\t\t\t\t\t!!possibleAnswer.tags\n\t\t\t\t\t&& typeof possibleAnswer.tags === \"object\"\n\t\t\t\t\t&& Object.keys(possibleAnswer.tags).length > 0\n\t\t\t\t) {\n\t\t\t\t\tif (typeof answerValue === \"boolean\") {\n\t\t\t\t\t\tif (answerValue === true) {\n\t\t\t\t\t\t\ttags = {\n\t\t\t\t\t\t\t\t...tags,\n\t\t\t\t\t\t\t\t...possibleAnswer.tags,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t// } else if (typeof doc.answerValue === \"object\") {\n\t\t\t\t\t// \tfor (const key in possibleAnswer.tags) {\n\t\t\t\t\t// \t\tif (doc.answerValue[key]) {\n\t\t\t\t\t// \t\t\ttags[key] = doc.answerValue[key]\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (const key in possibleAnswer.tags) {\n\t\t\t\t\t\t\ttags[key] = answerValue\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\t// add tags from the preset:\n\t\t\t\tif (tags.preset && typeof tags.preset === 'string' && _presets_[tags.preset] && _presets_[tags.preset].tags) {\n\t\t\t\t\ttags = {\n\t\t\t\t\t\t...tags,\n\t\t\t\t\t\t..._presets_[tags.preset].tags,\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// console.log()\n\t\t\t\t// console.log('- parser -----------------------------')\n\t\t\t\t// console.log()\n\n\t\t\t\t// if (\n\t\t\t\t// \t!!possibleAnswer.parsers\n\t\t\t\t// \t&& possibleAnswer.parsers.length > 0\n\t\t\t\t// ) {\n\t\t\t\t// \tconsole.log('possibleAnswer.parsers', possibleAnswer.parsers)\n\n\t\t\t\t// \tfor (const parserKey of possibleAnswer.parsers) {\n\t\t\t\t// \t\tif (_parsers_[parserKey]){\n\t\t\t\t// \t\t\ttags = {\n\t\t\t\t// \t\t\t\t...tags,\n\t\t\t\t// \t\t\t\t..._parsers_[parserKey](answerValue),\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t}\n\t\t\t\t// \t}\n\t\t\t\t// \tconsole.log('tags', tags)\n\t\t\t\t// }\n\n\n\t\t\t}\n\t\t}\n\n\t\treturn tags\n\t}\n\n\tanswerQuestion(questionID, answerValue, followUpQuestionIDs=[]){\n\t\tlet questionGotAnswered = false\n\t\tif (Object.keys(answerValue).length > 0) {\n\t\t\tquestionGotAnswered = true\n\t\t}\n\n\t\tif (questionGotAnswered) {\n\t\t\tthis.answer_tags = {\n\t\t\t\t...this.answer_tags,\n\t\t\t\t...answerValue,\n\t\t\t\t...(Object.entries(answerValue).reduce((tags,entry) => {\n\t\t\t\t\treturn this.answer2tags(questionID, entry[0], entry[1], tags)\n\t\t\t\t}, {}))\n\t\t\t}\n\t\t}\n\n\t\tthis.setState((state, props) => { // start this while mutating\n\t\t\tlet questionsById = state.questionsById\n\t\t\tlet nextQuestionIDs = state.nextQuestionIDs\n\n\t\t\tquestionsById[questionID].active = false\n\t\t\tif (questionGotAnswered) {\n\t\t\t\tquestionsById[questionID].answered = true\n\t\t\t}\n\n\t\t\tif (questionGotAnswered && followUpQuestionIDs.length === 0) {\n\t\t\t\tconst allKeys = Object.keys(answerValue)\n\t\t\t\tfollowUpQuestionIDs = questionsById[questionID].properties.possibleAnswers\n\t\t\t\t.filter(answer => allKeys.includes(answer.key))\n\t\t\t\t.map(answer => answer.followUpQuestionIDs || [])\n\t\t\t\t.reduce((result,followUpQuestionIDs) => {\n\t\t\t\t\treturn [...result, ...followUpQuestionIDs]\n\t\t\t\t}, [])\n\t\t\t}\n\n\t\t\tif (followUpQuestionIDs.length > 0) {\n\t\t\t\tconst currentQuestionPos = nextQuestionIDs.indexOf(questionID)\n\t\t\t\tconst nextQuestionIDs_start_part = nextQuestionIDs.slice(0, currentQuestionPos+1)\n\t\t\t\tconst nextQuestionIDs_end_part = nextQuestionIDs.slice(currentQuestionPos)\n\t\t\t\t\n\t\t\t\tnextQuestionIDs = [...new Set([\n\t\t\t\t\t...nextQuestionIDs_start_part,\n\t\t\t\t\t...followUpQuestionIDs.filter(questionID => !nextQuestionIDs_start_part.includes(questionID)),\n\t\t\t\t\t...nextQuestionIDs_end_part.filter(questionID => !followUpQuestionIDs.includes(questionID))\n\t\t\t\t])]\n\t\t\t}\n\n\t\t\tconst thisIndex = nextQuestionIDs.indexOf(questionID)\n\t\t\tif (thisIndex < nextQuestionIDs.length-1) {\n\t\t\t\tfor (let i=thisIndex+1; i<nextQuestionIDs.length; i+=1) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!!questionsById[nextQuestionIDs[i]]\n\t\t\t\t\t\t&& !questionsById[nextQuestionIDs[i]].answered\n\t\t\t\t\t) {\n\t\t\t\t\t\tquestionsById[nextQuestionIDs[i]].active = true\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (questionGotAnswered) {\n\t\t\t\treturn {\n\t\t\t\t\tnextQuestionIDs,\n\t\t\t\t\tquestionsById,\n\t\t\t\t\tanswersByQuestionId: {\n\t\t\t\t\t\t...state.answersByQuestionId,\n\t\t\t\t\t\t[questionID]: answerValue,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\treturn {\n\t\t\t\t\tnextQuestionIDs,\n\t\t\t\t\tquestionsById,\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tsaveInputValue(questionID, key, value){\n\t\tif (!this.inputValues[questionID]) {\n\t\t\tthis.inputValues[questionID] = {}\n\t\t}\n\t\tthis.inputValues[questionID][key] = value\n\t}\n\tsubmitInputs(questionID){\n\t\tconst tmp_inputValues = this.inputValues[questionID] || {}\n\t\tthis.inputValues[questionID] = {}\n\t\tthis.answerQuestion(questionID, tmp_inputValues)\n\t}\n\tgetInputValueByNamespace(questionID,namespace){\n\t\tlet toReturn = {}\n\t\tconst namespaceWithColon = namespace+':'\n\t\tconst namespaceWithColonLenght = namespaceWithColon.length\n\n\n\t\t// get the unsaved value  \n\t\tif (this.inputValues[questionID]) {\n\t\t\tconst tags = this.inputValues[questionID]\n\t\t\tconst tagKeys = Object.keys(tags)\n\t\t\tfor (const key of tagKeys) {\n\t\t\t\tif (key === namespace) {\n\t\t\t\t\ttoReturn[''] = tags[key]\n\t\t\t\t} else if (key.startsWith(namespaceWithColon)) {\n\t\t\t\t\ttoReturn[key.substring(namespaceWithColonLenght)] = tags[key]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Object.keys(toReturn).lenght > 0) {\n\t\t\t\treturn toReturn\n\t\t\t}\n\t\t}\n\n\n\t\t// get a value from the documents tags\n\t\tif (this.answer_tags) {\n\t\t\tconst tags = this.answer_tags\n\t\t\tconst tagKeys = Object.keys(tags)\n\t\t\tfor (const key of tagKeys) {\n\t\t\t\tif (key === namespace) {\n\t\t\t\t\ttoReturn[''] = tags[key]\n\t\t\t\t} else if (key.startsWith(namespaceWithColon)) {\n\t\t\t\t\ttoReturn[key.substring(namespaceWithColonLenght)] = tags[key]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Object.keys(toReturn).lenght > 0) {\n\t\t\t\treturn toReturn\n\t\t\t}\n\t\t}\n\n\n\t\t// get a value from the documents tags\n\t\tif (this.tagsFromTheDoc) {\n\t\t\tconst tags = this.tagsFromTheDoc\n\t\t\tconst tagKeys = Object.keys(tags)\n\t\t\tfor (const key of tagKeys) {\n\t\t\t\tif (key === namespace) {\n\t\t\t\t\ttoReturn[''] = tags[key]\n\t\t\t\t} else if (key.startsWith(namespaceWithColon)) {\n\t\t\t\t\ttoReturn[key.substring(namespaceWithColonLenght)] = tags[key]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Object.keys(toReturn).lenght > 0) {\n\t\t\t\treturn toReturn\n\t\t\t}\n\t\t}\n\n\n\t\treturn toReturn\n\t}\n\tgetInputValue(questionID,answerKey){\n\n\t\t// get the unsaved value  \n\t\tif (this.inputValues[questionID] && this.inputValues[questionID][answerKey]) {\n\t\t\treturn this.inputValues[questionID][answerKey]\n\t\t}\n\n\t\t// get a value from the given answers\n\t\tconst question_doc = this.state.questionsById[questionID]\n\t\tconst possibleAnswer = question_doc.possibleAnswersByKey[answerKey]\n\t\tconst tagKeys = Object.keys(possibleAnswer.tags || {})\n\n\t\tfor (const key of tagKeys) {\n\t\t\tif (this.answer_tags.hasOwnProperty(key)) {\n\t\t\t\treturn this.answer_tags[key]\n\t\t\t}\n\t\t}\n\n\t\t// get a value from the documents tags\n\t\tfor (const key of tagKeys) {\n\t\t\tif (this.tagsFromTheDoc.hasOwnProperty(key)) {\n\t\t\t\treturn this.tagsFromTheDoc[key]\n\t\t\t}\n\t\t}\n\n\t\treturn ''\n\t}\n\n\tsavePresetValue(questionID,newValue){\n\t\tthis.saveInputValue(questionID, 'preset', newValue.preset)\n\t}\n\tsaveValueByKey(questionID,newValue,namespace){\n\t\tconst keys = Object.keys(newValue)\n\t\tfor (const key of keys) {\n\t\t\tthis.saveInputValue(questionID, (\n\t\t\t\t!!namespace\n\t\t\t\t? (key === '' ? namespace : namespace+':'+key)\n\t\t\t\t: key\n\t\t\t), newValue[key])\n\t\t}\n\t}\n\n\trenderQuestion(questionID){\n\t\tconst questionDoc = this.state.questionsById[questionID]\n\n\t\tif (!(\n\t\t\t!!questionDoc &&\n\t\t\t!!questionDoc._id &&\n\t\t\t!!questionDoc.properties\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\tif (!questionDoc.visible) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst hasGeoInputField = questionDoc.properties.possibleAnswers.filter(possibleAnswer => possibleAnswer.inputtype === 'geo').length > 0\n\n\t\tif (this.props.globals.isSmallScreen && hasGeoInputField) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst hasInputField = questionDoc.properties.possibleAnswers.filter(possibleAnswer => {\n\t\t\treturn (\n\t\t\t\t   possibleAnswer.inputtype === 'text'\n\t\t\t\t|| possibleAnswer.inputtype === 'number'\n\t\t\t\t|| possibleAnswer.inputtype === 'geo'\n\t\t\t\t|| possibleAnswer.inputtype === 'preset'\n\t\t\t\t|| possibleAnswer.inputtype === 'date'\n\t\t\t\t|| possibleAnswer.inputtype === 'audience'\n\t\t\t)\n\t\t}).length > 0\n\n\t\tconst isMultiRow = hasInputField || (questionDoc.properties.possibleAnswers && questionDoc.properties.possibleAnswers.length > 2)\n\n\t\tconst location = this.props.doc.properties.geometry.location\n\n\t\tlet heading = ''\n\t\tif (questionDoc.active) {\n\t\t\tif (questionDoc.properties.question_translated !== '') {\n\t\t\t\theading = questionDoc.properties.question_translated\n\t\t\t} else if (questionDoc.properties.in_one_word_translated !== '') {\n\t\t\t\theading = questionDoc.properties.in_one_word_translated\n\t\t\t}\n\t\t}else{\n\t\t\tif (questionDoc.properties.in_one_word_translated !== '') {\n\t\t\t\theading = questionDoc.properties.in_one_word_translated\n\t\t\t} else if (questionDoc.properties.question_translated !== '') {\n\t\t\t\theading = questionDoc.properties.question_translated\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<Paper\n\t\t\t\tkey={`question_${questionDoc._id}`}\n\t\t\t\tclassName={\n\t\t\t\t\t'questionCard '\n\t\t\t\t\t+(questionDoc.answered ? 'answered ' : '')\n\t\t\t\t\t+(questionDoc.active ? 'active ' : '')\n\t\t\t\t\t+(hasInputField ? 'hasInputField ' : '')\n\t\t\t\t\t+(isMultiRow ? 'isMultiRow ' : '')\n\t\t\t\t}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\televation={0}\n\t\t\t\tonClick={\n\t\t\t\t\t/*!questionDoc.answered &&*/ !questionDoc.active\n\t\t\t\t\t? ()=>this.setQuestionAsActive(questionDoc._id)\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<ListItem dense disableGutters className=\"questionText\">\n\t\t\t\t\t{\n\t\t\t\t\t\tquestionDoc.properties.icon\n\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"material-icons-round\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\t\t\twidth: '40px',\n\t\t\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\t\t\tlineHeight: '40px',\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>{questionDoc.properties.icon}</div>\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<ListItemText\n\t\t\t\t\t\tprimary={heading}\n\t\t\t\t\t\tprimaryTypographyProps={{\n\t\t\t\t\t\t\tvariant: 'body1',\n\t\t\t\t\t\t\t// className: 'questionText',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsecondary={!questionDoc.active ? '' : questionDoc.properties.description_translated}\n\t\t\t\t\t/>\n\t\t\t\t</ListItem>\n\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"possibleAnswers\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tflexDirection: (isMultiRow ? 'column' : 'row'),\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\t!questionDoc.active\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: (questionDoc.properties.possibleAnswers.map(possibleAnswer=>{\n\t\t\t\t\t\t\tif (possibleAnswer.hidden) {\n\t\t\t\t\t\t\t\treturn undefined\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconst possibleAnswerKey = possibleAnswer.key\n\t\t\t\t\t\t\t\tconst possibleAnswerNamespace = possibleAnswer.namespace\n\t\t\t\t\t\t\t\tpossibleAnswer.inputtype = possibleAnswer.inputtype || ''\n\t\t\t\t\t\t\t\tif (possibleAnswer.inputtype === 'date') {\n\t\t\t\t\t\t\t\t\treturn (<DateInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValueByNamespace(questionDoc._id,possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveValueByKey(questionDoc._id, newValue, possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (possibleAnswer.inputtype === 'geo') {\n\t\t\t\t\t\t\t\t\treturn (<GeoInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tmarker={{\n\t\t\t\t\t\t\t\t\t\t\tcenter: location,\n\t\t\t\t\t\t\t\t\t\t\tzoom: 18,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdoc={this.props.doc}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveValueByKey(questionDoc._id, newValue, null)}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (possibleAnswer.inputtype === 'preset') {\n\t\t\t\t\t\t\t\t\treturn (<PresetInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValue(questionDoc._id, possibleAnswerKey)}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveInputValue(questionDoc._id, possibleAnswerKey, newValue)}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (possibleAnswer.inputtype === 'audience') {\n\t\t\t\t\t\t\t\t\treturn (<AudienceInput\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValueByNamespace(questionDoc._id,possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t\tonChange={newValue=>this.saveValueByKey(questionDoc._id, newValue, possibleAnswerNamespace)}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (possibleAnswer.inputtype === 'text') {\n\t\t\t\t\t\t\t\t\treturn (<TextField\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValue(questionDoc._id, possibleAnswerKey)}\n\t\t\t\t\t\t\t\t\t\tonChange={event=>this.saveInputValue(questionDoc._id, possibleAnswerKey, event.target.value)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmargin: '8px 8px 4px 8px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else if (possibleAnswer.inputtype === 'number') {\n\t\t\t\t\t\t\t\t\treturn (<TextField\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\tlabel={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\thelperText={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.getInputValue(questionDoc._id, possibleAnswerKey)}\n\t\t\t\t\t\t\t\t\t\tonChange={event=>this.saveInputValue(questionDoc._id, possibleAnswerKey, event.target.value)}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmargin: '8px 8px 4px 8px',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.answerQuestion(\n\t\t\t\t\t\t\t\t\t\t\t\tquestionDoc._id,\n\t\t\t\t\t\t\t\t\t\t\t\tpossibleAnswer.tags || {},\n\t\t\t\t\t\t\t\t\t\t\t\tpossibleAnswer.followUpQuestionIDs || [],\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\t\t\t\t\tmargin: '4px 8px',\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: (isMultiRow ? '10px 16px' : '16px 8px'),\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: (isMultiRow ? 'flex-start' : 'center'),\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign: (isMultiRow ? 'inherit' : 'center'),\n\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: `inset 0 0 0 999px ${this.props.theme.palette.divider}`,\n\t\t\t\t\t\t\t\t\t\t\t\t// boxShadow: `inset 0 0 0 999px ${this.props.theme.palette.background.default}`,\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 'auto',\n\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: `${this.props.theme.shape.borderRadius}px`,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tisMultiRow && !!possibleAnswer.icon\n\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItemIcon style={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tminWidth: '24px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin: '6px 16px 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talignSelf: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"material-icons-round\">{possibleAnswer.icon}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\tprimary={possibleAnswer.title_translated}\n\t\t\t\t\t\t\t\t\t\t\t\tsecondary={possibleAnswer.description_translated}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\n\t\t\t\t<div className=\"saveButton\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={()=>this.submitInputs(questionDoc._id)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\tboxShadow: `inset 0 0 0 999px ${this.props.theme.palette.divider}`,\n\t\t\t\t\t\t\t// boxShadow: `inset 0 0 0 999px ${this.props.theme.palette.background.default}`,\n\t\t\t\t\t\t\t// boxShadow: 'rgba(0, 0, 0, 0.04) 0px 0px 0px 999px inset',\n\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\tmargin: '0 8px',\n\t\t\t\t\t\t\tpadding: '8px 16px 8px 12px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DoneIcon style={{color:'var(--light-green)',marginRight:'8px'}}/>\n\t\t\t\t\t\t<Localized id=\"save\" />\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{/*<Fab\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tonClick={()=>this.submitInputs(questionDoc._id)}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackground: 'black',\n\t\t\t\t\t\t\tborderRadius: '999px',\n\t\t\t\t\t\t\tpadding: '0 16px 0 20px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"next\" />\n\t\t\t\t\t\t<ArrowForwardIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t</Fab>*/}\n\t\t\t\t</div>\n\t\t\t</Paper>\n\t\t)\n\t}\n\n\tabort(){\n\t\tif (this.props.onAbort) {\n\t\t\tthis.props.onAbort()\n\t\t}\n\t}\n\tacceptPrivacyPolicy(){\n\t\tthis.props.store.setPrivacy('tracking', true).finally(()=>{\n\t\t\tthis.props.store.setPrivacy(null, true).finally(()=>{\n\t\t\t\tthis.props.store.set('uuid', uuidv4(), 'tracking')\n\t\t\t\tthis.showQuestions()\n\t\t\t})\n\t\t})\n\t}\n\tshowQuestions(){\n\t\tthis.setState({stageIndex:1})\n\t}\n\taddSources(){\n\t\tthis.setState({stageIndex:2})\n\t}\n\tfinish(){\n\t\tif (Object.keys(this.answer_tags).length > 0) {\n\t\t\tthis.props.globals.graphql.mutate({\n\t\t\t\tmutation: mutation_addChangeset,\n\t\t\t\tvariables: {\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tforID: this.props.doc._id,\n\t\t\t\t\t\ttags: this.answer_tags,\n\t\t\t\t\t\tsources: this.sourcesText || '',\n\t\t\t\t\t\tfromBot: false,\n\t\t\t\t\t\tdataset: 'qiekub',\n\t\t\t\t\t\tantiSpamUserIdentifier: this.props.store.get('uuid') || '',\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error=>{\n\t\t\t\tconsole.error('mutation_addChangeset-error', error)\n\t\t\t})\n\t\t}\n\n\t\tif (this.props.onFinish) {\n\t\t\tthis.props.onFinish()\n\t\t}\n\t}\n\n\tsaveSourcesText(event){\n\t\tthis.sourcesText = event.target.value\n\t}\n\n\trenderStage(){\n\t\tconst {stageIndex} = this.state\n\n\t\tif (stageIndex === 0) { // privacy\n\t\t\treturn (<div style={{padding: '16px'}}>\n\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t<Localized id=\"headings_privacy_stage\" />\n\t\t\t\t</Typography>\n\n\t\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\t\t<Localized\n\t\t\t\t\t\tid=\"privacy_info\"\n\t\t\t\t\t\telems={{\n\t\t\t\t\t\t\tprivacy_policy_link: <Link target=\"_blank\" href=\"https://www.qiekub.org/datenschutz.html\"></Link>,\n\t\t\t\t\t\t}}\n\t\t\t\t\t></Localized>\n\t\t\t\t</Typography>\n\t\n\t\t\t\t<div style={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\tmargin: '32px 0 64px 0'\n\t\t\t\t}}>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\tonClick={this.abort}\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tboxShadow: 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArrowBackIcon style={{marginRight:'8px'}}/>\n\t\t\t\t\t\t<Localized id=\"abort\" />\n\t\t\t\t\t</Fab>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\tonClick={this.acceptPrivacyPolicy}\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Localized id=\"agree\" />\n\t\t\t\t\t\t<ArrowForwardIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t</Fab>\n\t\t\t\t</div>\n\t\t\t</div>)\n\t\t} else if (stageIndex === 1) { // questions\n\t\t\tif (!this.state.questionsAreLoaded) {\n\t\t\t\treturn (<div style={{margin:'16px'}}>\n\t\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t\t<Localized id=\"headings_questions_stage\" />\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography variant=\"body1\" style={{margin:'0 0 32px 0'}}>\n\t\t\t\t\t\t<Localized id=\"questions_are_loading\" />\n\t\t\t\t\t</Typography>\n\t\n\t\t\t\t\t<Fab\n\t\t\t\t\t\tonClick={this.abort}\n\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArrowBackIcon style={{marginRight:'8px'}}/>\n\t\t\t\t\t\t<Localized id=\"abort\" />\n\t\t\t\t\t</Fab>\n\t\t\t\t</div>)\n\t\t\t} else if (!!this.state.questionsById && Object.keys(this.state.questionsById).length > 0) {\n\t\t\t\treturn (<>\n\t\t\t\t\t<Typography variant=\"h6\" gutterBottom style={{margin:'16px 16px 32px 16px'}}>\n\t\t\t\t\t\t<Localized id=\"headings_questions_stage\" />\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<React.Fragment key=\"questions\">\n\t\t\t\t\t\t{this.state.nextQuestionIDs.map(questionID => this.renderQuestion(questionID))}\n\t\t\t\t\t</React.Fragment>\n\t\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\ttextAlign: 'right',\n\t\t\t\t\t\tmargin: '32px 16px 64px 16px'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.addSources}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Localized id=\"next\" />\n\t\t\t\t\t\t\t<ArrowForwardIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t</div>\n\t\t\t\t</>)\n\t\t\t}\n\t\t} else if (stageIndex === 2) { // sources\n\t\t\treturn (<div style={{padding: '16px'}}>\n\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t<Localized id=\"headings_sources_stage\" />\n\t\t\t\t</Typography>\n\n\t\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\t\t<Localized id=\"sources_info\" />\n\t\t\t\t</Typography>\n\n\t\t\t\t<TextField\n\t\t\t\t\tstyle={{marginTop: '16px'}}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmultiline\n\t\t\t\t\tautoFocus={false}\n\t\t\t\t\tplaceholder={this.props.getString('sources_placeholder')}\n\t\t\t\t\tonChange={this.saveSourcesText}\n\t\t\t\t/>\n\t\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\t\tmargin: '32px 0 64px 0'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.showQuestions}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tboxShadow: 'none',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ArrowBackIcon style={{marginRight:'8px'}}/>\n\t\t\t\t\t\t\t<Localized id=\"back\" />\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tonClick={this.finish}\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Localized id=\"finish\" />\n\t\t\t\t\t\t\t<DoneIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t</div>\n\t\t\t</div>)\n\t\t}\n\n\t\treturn null\n\t}\n\n\trender() {\n\t\tconst doc = this.props.doc\n\n\t\tif (!(\n\t\t\t!!doc &&\n\t\t\t!!doc._id\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\treturn this.renderStage()\n\t}\n}\n\nexport default withGlobals(withLocalization(withTheme(Questions)))\n\n","import React from 'react'\n\nexport default class EmojiIcon extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={this.props.key || this.props.icon}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: '1em',\n\t\t\t\t\theight: '1em',\n\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\tfontSize: '1.5rem',\n\t\t\t\t\tlineHeight: '1em',\n\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t...this.props.style,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{this.props.icon}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","/*\nWheelchair accessible / Not wheelchair accessible\n*/\n\nimport React from 'react'\nimport './index.css'\n\nimport { Localized, withLocalization } from '../Localized/'\n\nimport { navigate } from '@reach/router'\nimport { loadPlace as query_loadPlace } from '../../queries.js'\n\nimport {\n\tgetID as query_getID,\n} from '../../queries.js'\n\n// import categories from '../../data/dist/categories.json'\nimport presets from '../../data/dist/presets.json'\nimport colors from '../../data/dist/colors.json'\nimport colorsByPreset from '../../data/dist/colorsByPreset.json'\nimport { getAddressFormat, getTranslation, getTranslationFromArray, getColorByPreset/*, getPreset, getWantedTagsList*/ } from '../../functions.js'\n\nimport { withGlobals } from '../Globals/'\n\nimport {\n\tChip,\n\tTypography,\n\tFab,\n\n\tList,\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\n\tPaper,\n\tCard,\n\tCardContent,\n\tDivider,\n\n\tIcon,\n} from '@material-ui/core'\nimport {\n\tWarningRounded as WarningIcon,\n\tPlaceRounded as PlaceIcon,\n\t// Block as BlockIcon,\n\t// Announcement as AnnouncementIcon,\n\t// CheckRounded as CheckIcon,\n\t// ChildFriendly as ChildFriendlyIcon,\n\t// Explicit as ExplicitIcon,\n\n\t// Map as MapIcon,\n\tLinkRounded as LinkIcon,\n\n\tPhoneRounded as PhoneIcon,\n\t// PrintRounded as PrintIcon,\n\tMailRounded as MailIcon,\n\n\t// Facebook as FacebookIcon,\n\t// Instagram as InstagramIcon,\n\t// Twitter as TwitterIcon,\n\t// YouTube as YouTubeIcon,\n\n\tEditRounded as EditIcon,\n\t// Done as DoneIcon,\n\t// ArrowBack as ArrowBackIcon,\n\t// ArrowForward as ArrowForwardIcon,\n} from '@material-ui/icons'\n// import {\n// \tAutocomplete\n// } from '@material-ui/lab'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport Questions from '../Questions/'\nimport EmojiIcon from '../EmojiIcon/'\n\nimport yelp_icon from '../../images/yelp.png'\nimport facebook_icon from '../../images/facebook.png'\nimport instagram_icon from '../../images/instagram.png'\nimport youtube_icon from '../../images/youtube.png'\nimport twitter_icon from '../../images/twitter.png'\nimport openstreetmap_icon from '../../images/openstreetmap.svg'\n\nconst YelpIcon\t\t\t= props => <Icon style={{backgroundImage:'url('+yelp_icon+')',\t\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst FacebookIcon\t\t= props => <Icon style={{backgroundImage:'url('+facebook_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst InstagramIcon\t\t= props => <Icon style={{backgroundImage:'url('+instagram_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst YouTubeIcon\t\t= props => <Icon style={{backgroundImage:'url('+youtube_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst TwitterIcon\t\t= props => <Icon style={{backgroundImage:'url('+twitter_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst OpenstreetmapIcon\t= props => <Icon style={{backgroundImage:'url('+openstreetmap_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\n\n\n// import opening_hours from '../../scripts/opening_hours.js/index.js'\n// import '../../scripts/opening_hours+deps.min.js'\n\n// import opening_hours from 'opening_hours'\n\n      // var oh = new window.opening_hours('do', {}, { 'locale': 'de' });\n\n      // var prettified_value = oh.prettifyValue({\n      //   conf: { locale: 'de' },\n      // });\n\nconst ListItemLink = props => <ListItem button component=\"a\" {...props} />\n\n// const tag_suggestions = ['youthcenter','cafe','bar','education','community-center','youthgroup','group','mediaprojects']\n// const this_is_a_place_for_suggestions = ['queer','undecided','friends','family','trans','inter','gay','hetero','bi','lesbian','friend']\n\nclass Sidebar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tdoc: {},\n\t\t\tpage: '', // view edit\n\t\t\theaderText: '',\n\t\t}\n\t\tthis.docCache = null\n\n\t\tthis.wantedTagsList = [\n\t\t\t'name',\n\t\t\t'name:en',\n\t\t\t// 'name:',\n\n\t\t\t'preset',\n\n\t\t\t'audience:',\n\t\t\t'min_age',\n\t\t\t'max_age',\n\n\t\t\t// 'wheelchair',\n\n\t\t\t'addr:',\n\t\t\t'contact:email',\n\t\t\t'contact:phone',\n\n\t\t\t'contact:website',\n\t\t\t'contact:instagram',\n\t\t\t'contact:facebook',\n\t\t\t'contact:twitter',\n\t\t\t'contact:youtube',\n\t\t\t'contact:yelp',\n\t\t\t'osm_id',\n\t\t\t'wikipedia',\n\t\t\t'wikidata',\n\n\t\t\t'opening_date',\n\t\t\t'opening_date:',\n\t\t\t'closing_date',\n\t\t\t'closing_date:',\n\t\t]\n\n\t\tthis.action = undefined\n\t\tthis.docID = undefined\n\n\t\tthis.editNewDoc = this.editNewDoc.bind(this)\n\t\tthis.edit = this.edit.bind(this)\n\t\tthis.view = this.view.bind(this)\n\n\t\tthis.renderView = this.renderView.bind(this)\n\t\tthis.renderQuestions = this.renderQuestions.bind(this)\n\n\t\tthis.getAgeRangeText = this.getAgeRangeText.bind(this)\n\n\t\tthis.checkIfDocIdChanged = this.checkIfDocIdChanged.bind(this)\n\t\tthis.abortEdit = this.abortEdit.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.checkIfDocIdChanged()\n\t}\n\tcomponentDidUpdate(){\n\t\tthis.checkIfDocIdChanged()\n\t}\n\tcomponentWillUnmount(){\n\t\tif (this.placeQuerySubscription) {\n\t\t\tthis.placeQuerySubscription.unsubscribe()\n\t\t}\n\t}\n\tcheckIfDocIdChanged(){\n\t\tconst { action, docID } = this.props\n\n\t\tif (\n\t\t\tthis.action !== action ||\n\t\t\tthis.docID !== docID\n\t\t) {\n\t\t\tthis.action = action\n\t\t\tthis.docID = docID\n\n\t\t\tif (!(!!action) /*|| !(!!docID)*/) {\n\t\t\t\tthis.docCache = null\n\t\t\t\tthis.setState({\n\t\t\t\t\tdoc: {},\n\t\t\t\t\tpage: '',\n\t\t\t\t\theaderText: '',\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tif (action === 'add') {\n\t\t\t\t\tif (!(!!docID) || docID === '') {\n\t\t\t\t\t\tthis.navigateToUnusedID()\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.editNewDoc(docID, 'Place')\n\t\t\t\t\t}\n\t\t\t\t} else if (action === 'view') {\n\t\t\t\t\tif (!!docID && docID !== '') {\n\t\t\t\t\t\tthis.loadAndViewDoc(docID, ()=>{\n\t\t\t\t\t\t\tthis.setState({page:'view'})\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else if (action === 'edit') {\n\t\t\t\t\tif (!!docID && docID !== '') {\n\t\t\t\t\t\tthis.loadAndViewDoc(docID, ()=>{\n\t\t\t\t\t\t\tthis.setState({page:'edit'})\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tnavigateToUnusedID(){\n\t\tif (!this.isNavigatingToUnusedID) {\n\t\t\tthis.isNavigatingToUnusedID = true\n\t\t\tthis.props.globals.graphql.query({\n\t\t\t\tquery: query_getID,\n\t\t\t\tfetchPolicy: 'no-cache',\n\t\t\t}).then(async result => {\n\t\t\t\tnavigate(`./${result.data.id}/`)\n\t\t\t}).catch(error=>{\n\t\t\t\tconsole.error(error)\n\t\t\t}).finally(()=>{\n\t\t\t\t// TODO can I use finally or is 90% browser support to less?\n\t\t\t\tdelete this.isNavigatingToUnusedID\n\t\t\t})\n\t\t}\n\t}\n\n\tloadAndViewDoc(docID, callback){\n\t\tif (!!docID && docID !== '' && docID.length > 1 && /\\S/.test(docID)) {\n\t\t\tthis.placeQuerySubscription = this.props.globals.graphql.watchQuery({\n\t\t\t\tfetchPolicy: 'cache-and-network',\n\t\t\t\tquery: query_loadPlace,\n\t\t\t\tvariables: {\n\t\t\t\t\tlanguages: navigator.languages,\n\t\t\t\t\t_id: docID,\n\t\t\t\t\twantedTags: this.wantedTagsList,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.subscribe(({data}) => {\n\t\t\t\tif (!!data && !!data.getPlace) {\n\t\t\t\t\tconst doc = data.getPlace\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.docCache === null\n\t\t\t\t\t\t|| (doc !== this.docCache && this.props.action === 'view')\n\t\t\t\t\t\t|| (this.docCache !== null && doc._id === this.docCache)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.docCache = doc\n\t\t\t\t\t\n\t\t\t\t\t\tif (this.props.onDontFilterTheseIds) {\n\t\t\t\t\t\t\tthis.props.onDontFilterTheseIds([doc._id])\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst preset = doc.properties.tags.preset\n\n\t\t\t\t\t\tdoc.___preset = (\n\t\t\t\t\t\t\t!!preset && !!presets[preset]\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tkey: preset,\n\t\t\t\t\t\t\t\t...presets[preset],\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: presets.default\n\t\t\t\t\t\t)\n\t\t\t\t\t\tdoc.___color = getColorByPreset(doc.___preset.key,colorsByPreset) || colors.default\n\t\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tdoc: doc,\n\t\t\t\t\t\t\tpage: 'view',\n\t\t\t\t\t\t\theaderText: (\n\t\t\t\t\t\t\t\tdoc &&\n\t\t\t\t\t\t\t\tdoc.properties &&\n\t\t\t\t\t\t\t\tdoc.properties.name &&\n\t\t\t\t\t\t\t\tdoc.properties.name.length > 0\n\t\t\t\t\t\t\t\t? getTranslationFromArray(doc.properties.name, this.props.globals.userLocales)\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}, ()=>{\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t\tlet zoomLevel = this.props.globals.mainMapFunctions.getZoom()\n\t\t\t\t\t\t\tif (zoomLevel < 17) {\n\t\t\t\t\t\t\t\tzoomLevel = 17\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tif (doc.properties.geometry) {\n\t\t\t\t\t\t\t\tif (new Date()*1 - this.props.globals.pageOpenTS*1 < 2000) {\n\t\t\t\t\t\t\t\t\tthis.props.globals.mainMapFunctions.setView(\n\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\tthis.props.globals.isSmallScreen\n\t\t\t\t\t\t\t\t\t\t\t? doc.properties.geometry.location\n\t\t\t\t\t\t\t\t\t\t\t: this.props.globals.mainMapFunctions.unproject(this.props.globals.mainMapFunctions.project(doc.properties.geometry.location, zoomLevel).add([-200,0]), zoomLevel) // add sidebar offset\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tzoomLevel\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t// }else{\n\t\t\t\t\t\t\t\t// \tthis.props.globals.mainMapFunctions.flyTo(\n\t\t\t\t\t\t\t\t// \t\t[doc.properties.geometry.location.lat,doc.properties.geometry.location.lng],\n\t\t\t\t\t\t\t\t// \t\tzoomLevel,\n\t\t\t\t\t\t\t\t// \t\t{\n\t\t\t\t\t\t\t\t// \t\t\tanimate: true,\n\t\t\t\t\t\t\t\t// \t\t\tduration: 1,\n\t\t\t\t\t\t\t\t// \t\t}\n\t\t\t\t\t\t\t\t// \t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tif (!this.props.globals.isSmallScreen) {\n\t\t\t\t\t\t\t\tconst docLocation = doc.properties.geometry.location\n\t\t\t\t\t\t\t\tconst asPixel = this.props.globals.mainMapFunctions.latLngToContainerPoint(docLocation)\n\t\t\t\t\t\t\t\tif (asPixel.x < 400) {\n\t\t\t\t\t\t\t\t\tthis.props.globals.mainMapFunctions.panTo(\n\t\t\t\t\t\t\t\t\t\tthis.props.globals.mainMapFunctions.unproject(this.props.globals.mainMapFunctions.project(docLocation).add([-200,0])) // add sidebar offset\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tthis.props.onSetSidebarIsOpen(true)\n\t\t\t\t\t\t\tthis.props.onSetSearchBarValue(this.state.headerText)\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\teditNewDoc(docID, typename){\n\t\tconst emptyDoc = {\n\t\t\t__typename: 'Doc',\n\t\t\t_id: docID,\n\t\t\tproperties: {\n\t\t\t\t__typename: typename,\n\t\t\t\ttags: {},\n\t\t\t\tgeometry: {\n\t\t\t\t\tlocation: {\n\t\t\t\t\t\tlat: 0,\n\t\t\t\t\t\tlng: 0,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\n\t\temptyDoc.___preset = presets.default\n\t\temptyDoc.___color = getColorByPreset(emptyDoc.___preset.key,colorsByPreset) || colors.default\n\n\n\t\tthis.setState({\n\t\t\tdoc: emptyDoc,\n\t\t\tpage: 'edit',\n\t\t\theaderText: this.props.getString('add_new_place_header_text'),\n\t\t}, ()=>{\n\t\t\tthis.props.onSetSidebarIsOpen(true)\n\t\t\tthis.props.onSetSearchBarValue(this.state.headerText)\n\t\t})\n\t}\n\n\tedit(){\n\t\tnavigate(`/edit/${this.state.doc._id}/`)\n\t}\n\tview(){\n\t\tnavigate(`/view/${this.state.doc._id}/`)\n\t}\n\n\tabortEdit(){\n\t\tif (this.props.action === 'add') {\n\t\t\tnavigate(`/`)\n\t\t}else{\n\t\t\tnavigate(`/view/${this.state.doc._id}/`)\n\t\t}\n\t}\n\n\tgetAgeRangeText(min_age,max_age){\n\t\tmin_age = Number.parseInt(min_age)\n\t\tmax_age = Number.parseInt(max_age)\n\n\t\tif (Number.isNaN(min_age) || min_age < 0) {\n\t\t\tmin_age = null\n\t\t}\n\t\tif (Number.isNaN(max_age) || max_age < 0) {\n\t\t\tmax_age = null\n\t\t}\n\n\t\tif (\n\t\t\t!!min_age && !Number.isNaN(min_age) &&\n\t\t\t!!max_age && !Number.isNaN(max_age)\n\t\t){\n\t\t\tconst numbers = [min_age,max_age].sort((a,b)=>a-b)\n\t\t\tmin_age = numbers[0]\n\t\t\tmax_age = numbers[1]\n\t\t}\n\n\t\treturn (\n\t\t\tmin_age === null && max_age === null\n\t\t\t? '' // 'Fr jedes Alter!'\n\t\t\t: (min_age === null && max_age !== null\n\t\t\t? this.props.getString('max_age_text', {age:max_age}) // 'Bis '+max_age+' Jahre'\n\t\t\t: (min_age !== null && max_age === null\n\t\t\t? this.props.getString('min_age_text', {age:min_age}) // 'Ab '+min_age+' Jahre'\n\t\t\t: (min_age !== null && max_age !== null\n\t\t\t? this.props.getString('age_range_text', {min_age,max_age}) // min_age+' bis '+max_age+' Jahre'\n\t\t\t: ''\n\t\t))))\n\t}\n\n\tparseLinks(links){\n\t\t// const links = `\n\t\t// \thttps://www.anyway-koeln.de/\n\t\t// \thttps://www.instagram.com/anyway_koeln/\n\t\t// `\n\n\t\treturn [...new Set(links.match(/([a-z0-9]*:[^\\s]+)/gmiu))].map(url=>new URL(url)).map(url=>{\n\t\t\tlet obj = {\n\t\t\t\turl,\n\t\t\t\thref: url.href,\n\t\t\t\ttext: url.href,\n\t\t\t\ttype: 'default',\n\t\t\t}\n\n\t\t\tif (url.hostname === 'www.instagram.com' || url.hostname === 'instagram.com') {\n\t\t\t\tobj.type = 'instagram'\n\t\t\t} else if (url.hostname === 'www.facebook.com' || url.hostname === 'facebook.com') {\n\t\t\t\tobj.type = 'facebook'\n\t\t\t}else if (url.hostname === 'www.twitter.com' || url.hostname === 'twitter.com') {\n\t\t\t\tobj.type = 'twitter'\n\t\t\t}else if (url.hostname === 'www.youtube.com' || url.hostname === 'youtube.com') {\n\t\t\t\tobj.type = 'youtube'\n\t\t\t}else if (url.protocol === 'tel:') {\n\t\t\t\tobj.type = 'phonenumber'\n\t\t\t\tobj.text = url.pathname\n\t\t\t}else if (url.protocol === 'mailto:') {\n\t\t\t\tobj.type = 'mail'\n\t\t\t\tobj.text = url.pathname\n\t\t\t}\n\n\t\t\treturn obj\n\t\t})\n\t}\n\n\t/*renderOpeningHours(doc){\n\t\tconst weekdayNames = 'Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ')\n\n\t\tif (!!doc.properties.tags.opening_hours) {\n\t\t\tconst hours = doc.properties.tags.opening_hours\n\n\t\t\ttry {\n\t\t\t\tconst oh = new window.opening_hours(hours, {}, {\n\t\t\t\t\t'locale': 'de-DE'\n\t\t\t\t})\n\t\n\t\t\t\tlet now = new Date()\n\t\t\t\tlet from = new Date(now.getFullYear(), now.getMonth(), now.getDate()-1, 0, 0, 0, 0)\n\t\n\t\t\t\tlet days = []\n\t\t\t\tfor (var i = 0; i < 7; i++) {\n\t\t\t\t\tconst to = new Date(from.getTime()+(86400*1000)) // 86400 = 1 day | 518400 = 6 days\n\t\n\t\t\t\t\tconst weekdayName = weekdayNames[from.getDay()]\n\t\t\t\t\tconst intervals = oh.getOpenIntervals(from, to).map(range=>{\n\t\t\t\t\t\treturn `${(range[0].getHours()+'').padStart(2,'0')}:${(range[0].getMinutes()+'').padStart(2,'0')}${(range[1].getHours()+'').padStart(2,'0')}:${(range[1].getMinutes()+'').padStart(2,'0')}`\n\t\t\t\t\t})\n\t\n\t\t\t\t\tdays.push(<ListItem key={weekdayName} style={{display:'flex',alignItems:'flex-start'}}>\n\t\t\t\t\t\t<ListItemText style={{width:'100px'}}>{weekdayName}</ListItemText>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{intervals.length === 0 ? <ListItemText>Geschlossen</ListItemText> : intervals.map(text=><ListItemText style={{display:'block'}}>{text}</ListItemText>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ListItem>)\n\t\n\t\t\t\t\tfrom = to\n\t\t\t\t}\n\t\n\t\t\t\treturn days\n\t\t\t}catch(error){\n\t\t\t\tconsole.error('Error while parsing opening_hours:', error)\n\t\t\t\treturn null\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t}*/\n\n\tgetAudience(tags){\n\t\tconst audience_namespace = 'audience'\n\t\tconst audience_namespace_length = (audience_namespace+':').length\n\n\t\tconst audienceTags = Object.entries(tags)\n\t\t.filter(entry => entry[0].startsWith(audience_namespace+':'))\n\t\t.map(entry => [entry[0].substring(audience_namespace_length), entry[1]])\n\n\t\treturn {\n\t\t\tonly: audienceTags.filter(entry => entry[0] !== 'queer' && entry[1] === 'only').map(entry => entry[0]),\n\t\t\tprimary: audienceTags.filter(entry => entry[0] !== 'queer' && entry[1] === 'primary').map(entry => entry[0]),\n\t\t\twelcome: audienceTags.filter(entry => entry[0] !== 'queer' && entry[1] === 'welcome').map(entry => entry[0]),\n\t\t}\n\t}\n\n\trenderAudience(tags){\n\t\tconst audience = this.getAudience(tags)\n\n\t\tconst audience_queer = tags['audience:queer']\n\n\t\tlet audienceHeading = null\n\t\tlet audienceText = null\n\t\tlet audienceIcon = null\n\t\tif (audience_queer && audience_queer === 'only') {\n\t\t\taudienceHeading = this.props.getString('audience_heading_queer_only')\n\t\t\taudienceText = this.props.getString('audience_text_queer_only')\n\t\t\taudienceIcon = <EmojiIcon icon={this.props.globals.emojis.audience_queer_only} />\n\t\t} else if (audience_queer && audience_queer === 'primary') {\n\t\t\taudienceHeading = this.props.getString('audience_heading_queer_primary')\n\t\t\taudienceText = this.props.getString('audience_text_queer_primary')\n\t\t\taudienceIcon = <EmojiIcon icon={this.props.globals.emojis.audience_queer_primary} />\n\t\t} else if (audience_queer && audience_queer === 'welcome') {\n\t\t\taudienceHeading = this.props.getString('audience_heading_queer_welcome')\n\t\t\taudienceIcon = <EmojiIcon icon={this.props.globals.emojis.audience_queer_welcome} />\n\t\t} else {\n\t\t\taudienceHeading = this.props.getString('audience_heading_be_cautios')\n\t\t\taudienceText = this.props.getString('audience_text_be_cautios')\n\t\t\taudienceIcon = <WarningIcon />\n\t\t}\n\n\n\t\tconst age_range_text = this.getAgeRangeText(tags.min_age, tags.max_age)\n\n\t\tconst chipFunction = label => (<Chip\n\t\t\tsize=\"small\"\n\t\t\tstyle={{\n\t\t\t\tmargin: '0 4px 4px 0',\n\t\t\t}}\n\t\t\tkey={label}\n\t\t\tlabel={this.props.getString(label.replace(/:/g, '_'), null, label)}\n\t\t/>)\n\n\t\treturn (\n\t\t\t<List key=\"Audience\" dense>\n\t\t\t\t<ListItem>\n\t\t\t\t\t<ListItemIcon style={\n\t\t\t\t\t\t!!audienceText\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\talignSelf: 'flex-start',\n\t\t\t\t\t\t\tpaddingTop: '12px',\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: {}\n\t\t\t\t\t}>\n\t\t\t\t\t\t{audienceIcon}\n\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t<ListItemText\n\t\t\t\t\t\tprimary={audienceHeading}\n\t\t\t\t\t\tsecondary={audienceText}\n\t\t\t\t\t/>\n\t\t\t\t</ListItem>\n\t\t\t\t\n\t\t\t\t{\n\t\t\t\t\taudience.only.length > 0\n\t\t\t\t\t? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tstyle={{marginLeft: '56px'}}\n\t\t\t\t\t\t\t\tprimaryTypographyProps={{\n\t\t\t\t\t\t\t\t\tcomponent: 'div',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tprimary={<>\n\t\t\t\t\t\t\t\t\t{this.props.getString('audience_only_heading')}&nbsp; {audience.only.map(chipFunction)}\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t)\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t{\n\t\t\t\t\taudience.primary.length > 0\n\t\t\t\t\t? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tstyle={{marginLeft: '56px'}}\n\t\t\t\t\t\t\t\tprimaryTypographyProps={{\n\t\t\t\t\t\t\t\t\tcomponent: 'div',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tprimary={<>\n\t\t\t\t\t\t\t\t\t{this.props.getString('audience_primary_heading')}&nbsp; {audience.primary.map(chipFunction)}\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t)\n\t\t\t\t\t: null\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\taudience.welcome.length > 0\n\t\t\t\t\t? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tstyle={{marginLeft: '56px'}}\n\t\t\t\t\t\t\t\tprimaryTypographyProps={{\n\t\t\t\t\t\t\t\t\tcomponent: 'div',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tprimary={<>\n\t\t\t\t\t\t\t\t\t{this.props.getString('audience_welcome_heading')}&nbsp; {audience.welcome.map(chipFunction)}\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t)\n\t\t\t\t\t: null\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\tage_range_text === ''\n\t\t\t\t\t? null\n\t\t\t\t\t: (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tstyle={{marginLeft: '56px'}}\n\t\t\t\t\t\t\t\tprimary={this.props.getString('age_restriction')}\n\t\t\t\t\t\t\t\tsecondary={age_range_text}\n\t\t\t\t\t\t\t\tprimaryTypographyProps={{\n\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\t\t\t\t\t\tmarginRight: '8px',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tsecondaryTypographyProps={{\n\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</List>\n\t\t)\n\t}\n\n\trenderGeneral(tags){\n\n\t\tconst rows = []\n\n\t\tconst address_format = getAddressFormat(tags)\n\t\tif (!!address_format) {\n\t\t\tconst address = address_format.format.map(part => {\n\t\t\t\tconst mappedParts = part.map(key => !!tags['addr:'+key] ? tags['addr:'+key] : null).filter(v=>v)\n\t\t\t\treturn mappedParts.length > 0 ? mappedParts.join(' ') : null\n\t\t\t}).filter(v=>v).join(', ')\n\n\t\t\tif (address !== '') {\n\t\t\t\trows.push(\n\t\t\t\t\t<ListItem target=\"_blank\" key=\"Address\">\n\t\t\t\t\t\t<ListItemIcon><PlaceIcon /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={address} />\n\t\t\t\t\t</ListItem>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tconst email = tags['contact:email'] || tags['email']\n\t\tif (!!email) {\n\t\t\trows.push(\n\t\t\t\t<ListItemLink target=\"_blank\" key=\"Email\" href={'mailto:'+email}>\n\t\t\t\t\t<ListItemIcon><MailIcon /></ListItemIcon>\n\t\t\t\t\t<ListItemText primary={email} />\n\t\t\t\t</ListItemLink>\n\t\t\t)\n\t\t}\n\n\t\tconst phonenumber = tags['contact:phone'] || tags['phone']\n\t\tif (!!phonenumber) {\n\t\t\trows.push(\n\t\t\t\t<ListItemLink target=\"_blank\" key=\"Phonenumber\" href={'tel:'+phonenumber}>\n\t\t\t\t\t<ListItemIcon><PhoneIcon /></ListItemIcon>\n\t\t\t\t\t<ListItemText primary={phonenumber} />\n\t\t\t\t</ListItemLink>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\trows.length === 0\n\t\t\t? null\n\t\t\t: (<List key=\"General\" dense>{rows}</List>)\n\t\t)\n\t}\n\n\trenderLinks(tags){\n\t\t// https://wiki.openstreetmap.org/wiki/Key:contact\n\t\t//\n\t\t// properties.links = `\n\t\t// \thttps://www.anyway-koeln.de/\n\t\t// \thttps://www.instagram.com/anyway_koeln/\n\t\t// \thttps://www.facebook.com/anyway_koeln/\n\t\t// \thttps://www.youtube.com/anyway_koeln/\n\t\t// \thttps://www.twitter.com/anyway_koeln/\n\t\t// \ttel:09234658723\n\t\t// \tmailto:kjqhgr@sadf.asdf\n\t\t// `\n\n\t\t// eslint-disable-next-line\n\t\tconst get_username_regexp = /.*\\/([^\\/]+)\\/?/\n\n\t\tconst links = []\n\n\t\tconst website = tags['contact:website'] || tags['website']\n\t\tif (!!website) {\n\t\t\tconst matches = website.match(/(?:.*?:\\/\\/)?(?:www\\.)?(?:(.+)\\/|(.+))/)\n\t\t\tlinks.push({\n\t\t\t\thref: website,\n\t\t\t\ttext: !!matches ? matches[1] || matches[2] : website,\n\t\t\t\ticon: <LinkIcon />,\n\t\t\t})\n\t\t}\n\n\t\tconst facebook = tags['contact:facebook'] || tags['facebook']\n\t\tif (!!facebook) {\n\t\t\tconst matches = facebook.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\thref: !!matches ? facebook : 'https://facebook.com/'+facebook,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+facebook,\n\t\t\t\ticon: <FacebookIcon />\n\t\t\t})\n\t\t}\n\n\t\tconst instagram = tags['contact:instagram'] || tags['instagram']\n\t\tif (!!instagram) {\n\t\t\tconst matches = instagram.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\thref: !!matches ? instagram : 'https://instagram.com/'+instagram,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+instagram,\n\t\t\t\ticon: <InstagramIcon />\n\t\t\t})\n\t\t}\n\n\t\tconst youtube = tags['contact:youtube'] || tags['youtube']\n\t\tif (!!youtube) {\n\t\t\tconst matches = youtube.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\thref: !!matches ? youtube : 'https://youtube.com/user/'+youtube,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+youtube,\n\t\t\t\ticon: <YouTubeIcon />,\n\t\t\t})\n\t\t}\n\n\t\tconst twitter = tags['contact:twitter'] || tags['twitter']\n\t\tif (!!twitter) {\n\t\t\tconst matches = twitter.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\thref: !!matches ? twitter : 'https://twitter.com/'+twitter,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+twitter,\n\t\t\t\ticon: <TwitterIcon />,\n\t\t\t})\n\t\t}\n\n\t\tconst yelp = tags['contact:yelp'] || tags['yelp']\n\t\tif (!!yelp) {\n\t\t\tlinks.push({\n\t\t\t\thref: yelp,\n\t\t\t\ttext: 'View on Yelp', // TODO: translate\n\t\t\t\ticon: <YelpIcon />,\n\t\t\t})\n\t\t}\n\n\t\tconst osm_id = tags['osm_id']\n\t\tif (!!osm_id) {\n\t\t\tlinks.push({\n\t\t\t\thref: 'https://openstreetmap.org/'+osm_id,\n\t\t\t\ttext: 'View on OpenStreetMap', // TODO: translate\n\t\t\t\ticon: <OpenstreetmapIcon />, // <MapIcon />,\n\t\t\t})\n\t\t}\n\n\t\treturn (\n\t\t\tlinks.length === 0\n\t\t\t? null\n\t\t\t: (<List key=\"Links\" dense>\n\t\t\t\t{links.map(link => (\n\t\t\t\t\t<ListItemLink target=\"_blank\" key={link.href} href={link.href}>\n\t\t\t\t\t\t<ListItemIcon>{link.icon}</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={link.text} />\n\t\t\t\t\t</ListItemLink>\n\t\t\t\t))}\n\t\t\t</List>)\n\t\t)\n\t}\n\n\trenderView(doc){\n\t\tconst properties = doc.properties\n\t\tconst tags = properties.tags\t\n\n\t\treturn (<React.Fragment key=\"view\">\n\t\t\t\t<CardContent>\n\n\t\t\t\t\t{\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{key:'Audience', component:this.renderAudience(tags)},\n\t\t\t\t\t\t\t{key:'General', component:this.renderGeneral(tags)},\n\t\t\t\t\t\t\t{key:'Links', component:this.renderLinks(tags)},\n\t\t\t\t\t\t]\n\t\t\t\t\t\t.filter(v=>!!v.component)\n\t\t\t\t\t\t.reduce((parts,value) => {\n\t\t\t\t\t\t\tparts.push(value.component)\n\t\t\t\t\t\t\tparts.push(<Divider key={\"divider_\"+value.key} style={{margin:'8px -16px'}} />)\n\t\t\t\t\t\t\treturn parts\n\t\t\t\t\t\t}, [])\n\t\t\t\t\t}\n\n\t\t\t\t\t<div key=\"improveButtonWrapper\" style={{\n\t\t\t\t\t\tmarginTop: '32px',\n\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tkey=\"improveButton\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tonClick={this.edit}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tclassName=\"improveFab\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EditIcon className=\"icon\" key=\"improveButtonIcon\"/>\n\t\t\t\t\t\t\t<Localized id=\"improve\" key=\"improveButtonLocalized\" />\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t</React.Fragment>)\n\t}\n\trenderQuestions(doc){\n\t\tconst startQuestions = (\n\t\t\tthis.props.action === 'add'\n\t\t\t? ['preset','geo_pos','name','audience','website','answer_more']\n\t\t\t: ['start_improve']\n\t\t)\n\n\t\treturn (<React.Fragment key=\"editing\">\n\t\t\t<CardContent>\n\t\t\t\t<Questions\n\t\t\t\t\tkey=\"the_questions\"\n\t\t\t\t\tstartQuestions={startQuestions}\n\t\t\t\t\tdoc={doc}\n\t\t\t\t\tonFinish={\n\t\t\t\t\t\tthis.props.action === 'add'\n\t\t\t\t\t\t? this.abortEdit\n\t\t\t\t\t\t: this.view\n\t\t\t\t\t}\n\t\t\t\t\tonAbort={this.abortEdit}\n\t\t\t\t/>\n\t\t\t</CardContent>\n\t\t</React.Fragment>)\n\t}\n\n\trender(){\n\t\tconst doc = this.state.doc\n\n\t\tif (!(\n\t\t\t!!doc &&\n\t\t\t!!doc._id // &&\n\t\t\t// !!doc.properties &&\n\t\t\t// !!doc.properties.tags\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst headerBackgroundColor = (\n\t\t\tdoc.___color.key === 'default'\n\t\t\t? this.props.theme.palette.background.default\n\t\t\t: doc.___color.bg\n\t\t)\n\n\t\tconst headerForegroundColor = (\n\t\t\tdoc.___color.key === 'default'\n\t\t\t? this.props.theme.palette.getContrastText(headerBackgroundColor)\n\t\t\t: doc.___color.fg\n\t\t)\n\n\t\treturn (<>\n\t\t\t<Paper\n\t\t\t\televation={6}\n\t\t\t\tclassName={this.props.className}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: headerBackgroundColor,\n\t\t\t\t\t// background: `linear-gradient(180deg, ${headerBackgroundColor} 50%, ${\n\t\t\t\t\t// \tthis.state.page === 'view'\n\t\t\t\t\t// \t? this.props.theme.palette.background.paper\n\t\t\t\t\t// \t: this.props.theme.palette.background.default\n\t\t\t\t\t// } 50%)`,\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\talignContent: 'stretch',\n\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t}}\n\t\t\t>\n\n\t\t\t<Card\n\t\t\t\televation={0}\n\t\t\t\tstyle={{\n\t\t\t\t\tmargin: '0 0 -8px 0',\n\t\t\t\t\tborderRadius: '0px',\n\t\t\t\t\tpadding: '86px 0 8px 0',\n\t\t\t\t\tflexShrink: 0,\n\n\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\t/*...(\n\t\t\t\t\t\tdoc.___color.key !== 'default'\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\tcolor: doc.___color.fg,\n\t\t\t\t\t\t\tbackground: headerBackgroundColor,\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: undefined\n\t\t\t\t\t)*/\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography gutterBottom variant=\"h4\" component=\"h1\" style={{margin:'0 16px',fontWeight:'900',color:headerForegroundColor}}>\n\t\t\t\t\t\t{this.state.headerText}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t\n\t\t\t\t\t{\n\t\t\t\t\t\tdoc.___preset.key !== '' && doc.___preset.key !== 'default'\n\t\t\t\t\t\t? (<ListItem style={{m_argin:'0 -32px',color:headerForegroundColor}}>\n\t\t\t\t\t\t\t\t<ListItemIcon style={{m_inWidth:'auto',m_arginRight:'16px'}}>\n\t\t\t\t\t\t\t\t\t<div className=\"material-icons-round\" style={{color:headerForegroundColor}}>{doc.___preset.icon ? doc.___preset.icon.toLowerCase() : 'place'}</div>\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary={getTranslation(doc.___preset.name,this.props.globals.userLocales)}/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Card\n\t\t\t\tkey=\"sidebarContentCard\"\n\t\t\t\televation={6}\n\t\t\t\tclassName=\"sidebarContentCard\"\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: (\n\t\t\t\t\t\tthis.state.page === 'view'\n\t\t\t\t\t\t? this.props.theme.palette.background.paper\n\t\t\t\t\t\t: this.props.theme.palette.background.default\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tthis.state.page === 'view'\n\t\t\t\t\t? this.renderView(doc)\n\t\t\t\t\t: this.renderQuestions(doc)\n\t\t\t\t}\n\t\t\t</Card>\n\n\t\t\t</Paper>\n\t\t</>)\n\t}\n}\n\nexport default withGlobals(withLocalization(withTheme(Sidebar)))\n\n\n","import React from 'react'\nimport './index.css'\n\nimport { Localized, withLocalization } from '../Localized/'\n\nimport {\n\tFab,\n\tMenu,\n\tMenuItem,\n} from '@material-ui/core'\n\nimport {\n\tArrowDropDownRounded as ArrowDropDownIcon,\n} from '@material-ui/icons'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport PopupState, { bindTrigger, bindMenu } from 'material-ui-popup-state'\n\nimport { getTranslation } from '../../functions.js'\nimport _categories_ from '../../data/dist/categories.json'\n\nimport { withGlobals } from '../Globals/'\n\n\n\nclass FiltersPanelContent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tcategory: null,\n\t\t\tage: null,\n\t\t\taudience_queer: new Set(),\n\t\t}\n\n\t\tthis.categories = _categories_.map(category => ({\n\t\t\t...category,\n\t\t\tname_translated: getTranslation(category.name, this.props.globals.userLocales),\n\t\t}))\n\n\t\tthis.audience_queer_values = [\n\t\t\t{\n\t\t\t\tkey: 'everything',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_everything',\n\t\t\t\temoji: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'only',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_only',\n\t\t\t\temoji: this.props.globals.emojis.audience_queer_only,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'primary',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_primary',\n\t\t\t\temoji: this.props.globals.emojis.audience_queer_primary,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'welcome',\n\t\t\t\ttranslation_key: 'menu_text_audience_queer_welcome',\n\t\t\t\temoji: this.props.globals.emojis.audience_queer_welcome,\n\t\t\t},\n\t\t]\n\n\t\tthis.ages = Array.apply(null, Array(15)).map((v,i)=>i+14)\n\t\tthis.highest_ages_entry = this.ages[this.ages.length-1]\n\n\t\tthis.setValue = this.setValue.bind(this)\n\t\tthis.getFilterObj = this.getFilterObj.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\t// setTimeout(()=>{\n\t\t\t// this.setValue('age', 27, ()=>{})\n\t\t// }, 1000)\n\t}\n\n\tgetFilterObj(){\n\n\t\t// const tags = {}\n\t\t// if (!!this.state.age) {\n\t\t// \t// gte = Matches values that are greater than or equal to a specified value. #mongodb\n\t\t// \t// lte = Matches values that are less than or equal to a specified value. #mongodb\n\n\t\t// \tif (this.state.age === this.highest_ages_entry) {\n\t\t// \t\ttags.min_age = {gte: this.state.age}\n\t\t// \t\ttags.max_age = {lte: this.state.age}\n\t\t// \t}else{\t\t\t\t\n\t\t// \t\ttags.min_age = {gte: this.state.age}\n\t\t// \t\ttags.max_age = {lte: this.state.age}\n\t\t// \t}\n\t\t// }\n\n\t\treturn {\n\t\t\tpresets: (!!this.state.category ? this.state.category.presets : []),\n\t\t\t\n\t\t\taudienceQueerOptions: this.state.audience_queer.has('eveything') ? [] : [...this.state.audience_queer],\n\t\t\tselectedAge: this.state.age,\n\t\t\tageOption: (this.state.age === this.highest_ages_entry ? 'open_end' : '')\n\t\t}\n\t}\n\n\tsetValue(stateKeyName, value, closeMenuCallback){\n\t\tthis.setState({[stateKeyName]: (!!value ? value : null)}, ()=>{\n\t\t\tif (typeof closeMenuCallback === 'function') {\n\t\t\t\tcloseMenuCallback()\n\t\t\t}\n\n\t\t\tif (this.props.onChange) {\n\t\t\t\tthis.props.onChange(this.getFilterObj())\n\t\t\t}\n\t\t})\n\t}\n\n\ttoogleAudienceQueer(audienceKey){\n\t\tthis.setState((state, props) => {\n\t\t\tlet audience_queer = state.audience_queer\n\n\t\t\tif (audienceKey === 'everything') {\n\t\t\t\tif (audience_queer.size === 0) {\n\t\t\t\t\taudience_queer = new Set(['only','primary','welcome'])\n\t\t\t\t}else{\n\t\t\t\t\taudience_queer = new Set()\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (audience_queer.has(audienceKey)) {\n\t\t\t\t\taudience_queer.delete(audienceKey)\n\t\t\t\t}else{\n\t\t\t\t\taudience_queer.add(audienceKey)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {audience_queer}\n\t\t}, ()=>{\n\t\t\tif (this.props.onChange) {\n\t\t\t\tthis.props.onChange(this.getFilterObj())\n\t\t\t}\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (<div className=\"filterMenuInner\">\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t\taria-label={this.props.getString('what-to-show')}\n\t\t\t\t\t\t\ttitle={this.props.getString('what-to-show')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t!!this.state.category\n\t\t\t\t\t\t\t\t? (<>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{margin:'0 8px 0 -4px',background:this.state.category.color.bg}}></div>\n\t\t\t\t\t\t\t\t\t{this.state.category.name_translated}\n\t\t\t\t\t\t\t\t</>)\n\t\t\t\t\t\t\t\t: <Localized id=\"what-to-show\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"menuBlurredPaperBackground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey=\"everything\"\n\t\t\t\t\t\t\t\tvalue=\"\"\n\t\t\t\t\t\t\t\tonClick={()=>this.setValue('category', null, popupState.close)}\n\t\t\t\t\t\t\t\tselected={!(!!this.state.category)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{background:'transparent'}}></div>\n\t\t\t\t\t\t\t\t<Localized id=\"show-everything\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t{this.categories.map(category=>{\n\t\t\t\t\t\t\t\tconst isSelected = (!!this.state.category && category.name_translated === this.state.category.name_translated)\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={category.name_translated}\n\t\t\t\t\t\t\t\t\tvalue={category.name_translated}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.setValue('category', category,popupState.close)}\n\t\t\t\t\t\t\t\t\tselected={isSelected}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackground: (isSelected ? category.color.bg : ''),\n\t\t\t\t\t\t\t\t\t\t...(\n\t\t\t\t\t\t\t\t\t\t\tthis.props.theme.palette.type === 'light'\n\t\t\t\t\t\t\t\t\t\t\t? {color: (isSelected ? category.color.fg : category.color.bg)}\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t// color: (isSelected ? category.color.fg : category.color.bg),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{background:(isSelected ? category.color.fg : category.color.bg)}}></div>\n\t\t\t\t\t\t\t\t\t{category.name_translated}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t\taria-label={this.props.getString('for-which-age')}\n\t\t\t\t\t\t\ttitle={this.props.getString('for-which-age')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t!!this.state.age\n\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\tthis.state.age===this.highest_ages_entry\n\t\t\t\t\t\t\t\t\t? <Localized id=\"for-age-x-and-up\" vars={{age:this.state.age}}/>\n\t\t\t\t\t\t\t\t\t: <Localized id=\"for-age-x\" vars={{age:this.state.age}} />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: <Localized id=\"for-which-age\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"menuBlurredPaperBackground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey=\"any_age\"\n\t\t\t\t\t\t\t\tonClick={()=>this.setValue('age', null, popupState.close)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot hasIcon material-icons-round\">\n\t\t\t\t\t\t\t\t\t{(!(!!this.state.age) ? 'check' : '')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Localized id=\"any_age\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t{this.ages.map(number=>{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.setValue('age', number, popupState.close)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot hasIcon material-icons-round\">\n\t\t\t\t\t\t\t\t\t\t{(!!this.state.age && number === this.state.age ? 'check' : '')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{number===this.highest_ages_entry ? ' '+number : number}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t\taria-label={this.props.getString('what-to-show')}\n\t\t\t\t\t\t\ttitle={this.props.getString('button_audience_queer_default_text')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.audience_queer.size > 0\n\t\t\t\t\t\t\t\t? (<>\n\t\t\t\t\t\t\t\t\t<Localized id=\"button_audience_queer_default_text\" />\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.audience_queer_values\n\t\t\t\t\t\t\t\t\t\t.filter(audience => this.state.audience_queer.has(audience.key))\n\t\t\t\t\t\t\t\t\t\t.map(audience => {\n\t\t\t\t\t\t\t\t\t\t\treturn <div key={audience.emoji} style={{margin:'0 -4px 0 8px'}}>{audience.emoji}</div>\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</>)\n\t\t\t\t\t\t\t\t: <Localized id=\"button_audience_queer_default_text\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"menuBlurredPaperBackground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.audience_queer_values.map(audience => {\n\t\t\t\t\t\t\t\tconst isSelected = (\n\t\t\t\t\t\t\t\t\taudience.key === 'everything'\n\t\t\t\t\t\t\t\t\t? this.state.audience_queer.size === 0\n\t\t\t\t\t\t\t\t\t: this.state.audience_queer.has(audience.key)\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={audience.key}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.toogleAudienceQueer(audience.key)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={'filterMenuDot hasIcon '+(audience.emoji ? '' : 'material-icons-round')}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t? (audience.emoji ? audience.emoji : 'check')\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Localized\n\t\t\t\t\t\t\t\t\t\t\tid={audience.translation_key}\n\t\t\t\t\t\t\t\t\t\t\telems={{\n\t\t\t\t\t\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\t\t</div>)\n\t}\n}\n\nexport default withGlobals(withTheme(withLocalization(FiltersPanelContent)))\n\n","import React, { useEffect } from 'react'\nimport './index.css'\n\nimport { Router, navigate } from '@reach/router'\n\n// import categories from '../../data/dist/categories.json'\n// import presets from '../../data/dist/presets.json'\n// import colors from '../../data/dist/colors.json'\n// import colorsByPreset from '../../data/dist/colorsByPreset.json'\n\nimport { Localized, withLocalization } from '../Localized/'\n\nimport { withGlobals } from '../Globals/'\n\nimport { createMuiTheme, ThemeProvider, StylesProvider } from '@material-ui/core/styles';\n// import { CssBaseline } from '@material-ui/core'\n\nimport {\n\tFab,\n} from '@material-ui/core'\nimport {\n\tAddRounded as AddIcon,\n\t// FilterList as FilterListIcon,\n\t// ExpandLess as ExpandLessIcon,\n} from '@material-ui/icons'\n\nimport MainMap from '../MainMap/'\nimport SearchBar from '../SearchBar/'\nimport Sidebar from '../Sidebar/'\nimport FiltersPanelContent from '../FiltersPanelContent/'\n\n// import 'typeface-roboto'\n\nconst defaultTheme = createMuiTheme({\n\tpalette: {\n\t\ttype: 'light',\n\t\tprimary: {\n\t\t\tmain: '#fff',\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: '#000',\n\t\t},\n\t\taction: {\n\t\t\tactive: '#000',\n\t\t},\n\t\tbackground: {\n\t\t\tpaper: '#ffffff',\n\t\t\tdefault: '#f9f9f9',\n\t\t},\n\t\ttonalOffset: 0.05,\n\t},\n})\n\nfunction HandlePath(props) {\n\tconst action = props.action ||''\n\tconst docID = props.docID || ''\n\tconst onPathChanged = props.onPathChanged\n\n\tuseEffect(function(){\n\t\tif (!!onPathChanged) {\n\t\t\tonPathChanged({\n\t\t\t\taction,\n\t\t\t\tdocID,\n\t\t\t})\n\t\t}\n\t}, [action, docID, onPathChanged])\n\n\treturn null\n}\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tsearchBarValue: '',\n\t\t\tsidebarIsOpen: false,\n\t\t\tdoc: null,\n\t\t\tprefersDarkMode: false,\n\n\t\t\tfilters: {\n\t\t\t\tpresets: [],\n\t\t\t},\n\t\t\ttheme: defaultTheme,\n\n\t\t\tisSmallScreen: false,\n\n\t\t\taction: '',\n\t\t\tdocID: '',\n\t\t}\n\n\t\tthis.functions = {}\n\n\t\tthis.setSearchBarValue = this.setSearchBarValue.bind(this)\n\t\tthis.setSidebarIsOpen = this.setSidebarIsOpen.bind(this)\n\t\tthis.filtersChanged = this.filtersChanged.bind(this)\n\t\tthis.setTheme = this.setTheme.bind(this)\n\n\t\tthis.check_color_scheme = this.check_color_scheme.bind(this)\n\t\tthis.check_small_screen = this.check_small_screen.bind(this)\n\n\t\tthis.setView = this.setView.bind(this)\n\t\tthis.flyTo = this.flyTo.bind(this)\n\t\tthis.getZoom = this.getZoom.bind(this)\n\n\t\tthis.dontFilterTheseIds = this.dontFilterTheseIds.bind(this)\n\t\tthis.onPathChanged = this.onPathChanged.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tif (!!window.matchMedia) {\n\t\t\t// https://react-theming.github.io/create-mui-theme\n\t\t\t// https://material.io/resources/color/#!/?view.left=0&view.right=0&primary.color=FAFAFA&secondary.color=263238\n\n\t\t\tthis.matcher_color_scheme = window.matchMedia('(prefers-color-scheme: dark)')\n\t\t\tthis.matcher_color_scheme.addListener(this.check_color_scheme)\n\t\t\tthis.check_color_scheme(this.matcher_color_scheme)\n\n\t\t\tthis.matcher_small_screen = window.matchMedia('(min-width: 800px)')\n\t\t\tthis.matcher_small_screen.addListener(this.check_small_screen)\n\t\t\tthis.check_small_screen(this.matcher_small_screen)\n\t\t}else{\n\t\t\tthis.setTheme(false)\n\t\t}\n\t}\n\tcomponentWillUnmount(){\n\t\tif (!!window.matchMedia) {\n\t\t\tthis.matcher_color_scheme.removeListener(this.check_color_scheme)\n\t\t\tthis.matcher_small_screen.removeListener(this.check_small_screen)\n\t\t}\n\t}\n\n\tsetTheme(prefersDarkMode){\n\t\tconst background_paper = prefersDarkMode ? '#202020' : '#ffffff'\n\t\tconst background_default = prefersDarkMode ? '#181818' : '#f9f9f9'\n\n\t\tconst secondary_main = prefersDarkMode ? '#448aff' : '#2962ff' // A200_A700\n\n\t\tconst error_main = prefersDarkMode ? '#f44' : '#e00'\n\n\t\tconst theme = createMuiTheme({\n\t\t\tpalette: {\n\t\t\t\ttype: prefersDarkMode ? 'dark' : 'light',\n\t\t\t\tprimary: {\n\t\t\t\t\tmain: '#fff', // this.state.prefersDarkMode ? '#000' : '#fff' // '#fff'\n\t\t\t\t},\n\t\t\t\tsecondary: {\n\t\t\t\t\tmain: secondary_main,\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tactive: prefersDarkMode ? '#fff' : '#000',\n\t\t\t\t},\n\t\t\t\tbackground: {\n\t\t\t\t\tpaper: background_paper,\n\t\t\t\t\tdefault: background_default,\n\t\t\t\t},\n\t\t\t\terror: {\n\t\t\t\t\tmain: error_main,\n\t\t\t\t},\n\t\t\t\ttonalOffset: 0.05,\n\t\t\t},\n\t\t\tshape: {\n\t\t\t\tborderRadius: 8,\n\t\t\t},\n\t\t\ttransitions: {\n\t\t\t\tduration: {\n\t\t\t\t\tcomplex: 200, // 375,\n\t\t\t\t\tenteringScreen: 200, // 225,\n\t\t\t\t\tleavingScreen: 200, // 195,\n\t\t\t\t\tshort: 200, // 250,\n\t\t\t\t\tshorter: 200, // 200,\n\t\t\t\t\tshortest: 200, // 150,\n\t\t\t\t\tstandard: 200, // 300,\n\t\t\t\t},\n\t\t\t\teasing: {\n\t\t\t\t\teaseIn: \"ease\", // \"cubic-bezier(0.4, 0, 1, 1)\",\n\t\t\t\t\teaseInOut: \"ease\", // \"cubic-bezier(0.4, 0, 0.2, 1)\"\n\t\t\t\t\teaseOut: \"ease\", // \"cubic-bezier(0.0, 0, 0.2, 1)\",\n\t\t\t\t\tsharp: \"ease\", // \"cubic-bezier(0.4, 0, 0.6, 1)\",\n\t\t\t\t},\n\t\t\t},\n\t\t\toverrides: {\n\t\t\t\tMuiLink: {\n\t\t\t\t\troot: {\n\t\t\t\t\t\tcolor: secondary_main,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tMuiFab: {\n\t\t\t\t\troot: {\n\t\t\t\t\t\tbackgroundColor: background_paper,\n\t\t\t\t\t\tcolor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\ttransition: 'background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\t\tbackgroundColor: background_default,\n\t\t\t\t\t\t\tcolor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tsecondary: {\n\t\t\t\t\t\tbackgroundColor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\tcolor: background_paper,\n\t\t\t\t\t\ttransition: 'opacity 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\t\topacity: 0.8,\n\t\t\t\t\t\t\tbackgroundColor: defaultTheme.palette.getContrastText(background_paper),\n\t\t\t\t\t\t\tcolor: background_default,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\n\t\tthis.setState({theme})\n\t}\n\tcheck_color_scheme(event){\n\t\tif(event.matches) {\n\t\t\tthis.setTheme(true)\n\t\t} else {\n\t\t\tthis.setTheme(false)\n\t\t}\n\t}\n\tcheck_small_screen(event){\n\t\tif (event.matches) {\n\t\t\tthis.props.globals.isSmallScreen = false\n\t\t}else{\n\t\t\tthis.props.globals.isSmallScreen = true\n\t\t}\n\n\t\tthis.setState((state, props) => {\n\t\t\tif (this.props.globals.isSmallScreen !== state.isSmallScreen) {\n\t\t\t\treturn {isSmallScreen: this.props.globals.isSmallScreen}\n\t\t\t}\n\t\t\treturn undefined\n\t\t})\n\t\t\n\t\t// const viewport_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)\n\t}\n\n\tsaveFunctions(componentName, functionsObject){\n\t\tthis.functions[componentName] = functionsObject\n\t}\n\n\tsetSearchBarValue(value){\n\t\tthis.setState({searchBarValue:value})\n\t}\n\n\tsetSidebarIsOpen(value){\n\t\t// const center = this.functions['MainMap'].getCenter()\n\t\t// const zoom = this.functions['MainMap'].getZoom()\n\n\t\tthis.props.globals.sidebarIsOpen = value\n\n\t\tthis.setState({\n\t\t\tmapIsResizing: true,\n\t\t\tsidebarIsOpen: value,\n\t\t}, ()=>{\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.setState({mapIsResizing: false})\n\t\t\t}, 300)\n\t\t\t// this.check_small_screen()\n\n\t\t\t// if (new Date()*1 - this.props.globals.pageOpenTS*1 > 2000) {\n\t\t\t// \t// this.functions['MainMap'].invalidateSize()\n\t\t\t// \tsetTimeout(()=>{\n\t\t\t// \t\t// const center2 = this.functions['MainMap'].getCenter()\n\t\t\t// \t\tthis.functions['MainMap'].flyTo(center, Math.round(zoom), {\n\t\t\t// \t\t\tanimate: true,\n\t\t\t// \t\t\tduration: 1.5,\n\t\t\t// \t\t})\n\t\t\t// \t\t// this.functions['MainMap'].invalidateSize()\n\t\t\t// \t}, 500)\n\t\t\t// }\n\n\t\t\t// if (new Date()*1 - this.props.globals.pageOpenTS*1 < 2000) {\n\t\t\t// \tthis.functions['MainMap'].panTo(center, {\n\t\t\t// \t\tanimate: true,\n\t\t\t// \t\tduration: 5,\n\t\t\t// \t})\n\t\t\t// }else{\n\t\t\t// \tthis.functions['MainMap'].panTo(\n\t\t\t// \t\tthis.functions['MainMap'].getCenter(), {\n\t\t\t// \t\tanimate: true,\n\t\t\t// \t\tduration: 5,\n\t\t\t// \t})\n\t\t\t// }\n\t\t})\n\t}\n\n\tsetView(...attr){\n\t\treturn this.functions['MainMap'].setView(...attr)\n\t}\n\tflyTo(...attr){\n\t\treturn this.functions['MainMap'].flyTo(...attr)\n\t}\n\tgetZoom(...attr){\n\t\treturn this.functions['MainMap'].getZoom(...attr)\n\t}\n\n\tfiltersChanged(newFilters){\n\t\tthis.setState((state, props) => ({\n\t\t\tfilters:{\n\t\t\t\t...state.filters,\n\t\t\t\t...newFilters,\n\t\t\t}\n\t\t}))\n\t}\n\n\tdontFilterTheseIds(ids){\n\t\tthis.setState((state, props) => ({\n\t\t\tfilters:{\n\t\t\t\t...state.filters,\n\t\t\t\tids,\n\t\t\t}\n\t\t}))\n\t}\n\n\tonPathChanged(pathVars){\n\t\tthis.setState(pathVars)\n\t}\n\n\trender() {\n\t\treturn (<>\n\t\t\t<ThemeProvider theme={this.state.theme}>\n\t\t\t<StylesProvider injectFirst>\n\n\t\t\t<Router primary={false}>\n\t\t\t\t<HandlePath\n\t\t\t\t\tpath=\"/:action/*docID\"\n\t\t\t\t\tonPathChanged={this.onPathChanged}\n\t\t\t\t/>\n\t\t\t\t<HandlePath\n\t\t\t\t\tpath=\"/\"\n\t\t\t\t\tonPathChanged={this.onPathChanged}\n\t\t\t\t/>\n\t\t\t</Router>\n\t\t\t\n\n\t\t\t<SearchBar\n\t\t\t\tclassName=\"SearchBar\"\n\t\t\t\tvalue={this.state.searchBarValue}\n\t\t\t\tsidebarIsOpen={this.state.sidebarIsOpen}\n\t\t\t\tonSetSidebarIsOpen={this.setSidebarIsOpen}\n\t\t\t\tonSetSearchBarValue={this.setSearchBarValue}\n\t\t\t\tonDontFilterTheseIds={this.dontFilterTheseIds}\n\t\t\t/>\n\n\t\t\t{\n\t\t\t\tthis.state.isSmallScreen\n\t\t\t\t? undefined\n\t\t\t\t: (<Fab\n\t\t\t\t\taria-label={this.props.getString('add-place-fab')}\n\t\t\t\t\ttitle={this.props.getString('add-place-fab')}\n\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\tclassName=\"addNewFab\"\n\t\t\t\t\tonClick={()=>navigate('/add/')}\n\t\t\t\t>\n\t\t\t\t\t<AddIcon style={{color:'var(--light-green)',marginRight:'8px'}} />\n\t\t\t\t\t<Localized id=\"add-place-fab\" />\n\t\t\t\t</Fab>)\n\t\t\t}\n\n\t\t\t<div className=\"filtersPanel\">\n\t\t\t\t<FiltersPanelContent onChange={this.filtersChanged}/>\n\t\t\t</div>\n\n\t\t\t<Sidebar\n\t\t\t\taction={this.state.action}\n\t\t\t\tdocID={this.state.docID}\n\n\t\t\t\tclassName=\"Sidebar\"\n\n\t\t\t\tonSetSearchBarValue={this.setSearchBarValue}\n\t\t\t\tonSetSidebarIsOpen={this.setSidebarIsOpen}\n\n\t\t\t\tonSetView={this.setView}\n\t\t\t\tonFlyTo={this.flyTo}\n\t\t\t\tonGetZoom={this.getZoom}\n\n\t\t\t\tonDontFilterTheseIds={this.dontFilterTheseIds}\n\t\t\t/>\n\t\t\t\n\t\t\t<MainMap\n\t\t\t\tclassName={`page ${this.state.sidebarIsOpen ? 'sidebarIsOpen' : ''}`}\n\t\t\t\tonFunctions={(...attr)=>{this.saveFunctions('MainMap',...attr)}}\n\t\t\t\tfilters={this.state.filters}\n\t\t\t\tmapIsResizing={this.state.mapIsResizing}\n\t\t\t\tsidebarIsOpen={this.state.sidebarIsOpen}\n\t\t\t/>\n\t\t\t\n\t\t</StylesProvider>\n\t\t</ThemeProvider>\n\t\t</>)\n\t}\n}\n\nexport default withGlobals(withLocalization(App))","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\n// import * as serviceWorker from './serviceWorker'\n\nimport App from './components/App/'\nimport { GlobalsProvider } from './components/Globals/'\n\nReactDOM.render(\n\t<GlobalsProvider>\n\t\t<App />\n\t</GlobalsProvider>,\n\tdocument.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister()\n"],"sourceRoot":""}